<?xml version="1.0" encoding="UTF-8"?>
<sect2 id="ekos-focus">
  <title
>Fokusering</title>

  <indexterm>
    <primary
>Verktyg</primary>

    <secondary
>Ekos</secondary>

    <tertiary
>Fokusering</tertiary>
  </indexterm>

  <sect3 id="focus-theory">
    <title
>Operationsteori</title>

    <screenshot>
      <screeninfo
>Ekos fokusering </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="ekos_focus.png" format="PNG" width="75%"/>
        </imageobject>

        <textobject>
          <phrase
>Ekos fokusering</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>För att fokusera en bild, måste Ekos etablera en numerisk metod för att bedöma hur <emphasis
>bra</emphasis
> fokuseringen är. Det är enkelt när man tittar på en bild och kan se att den är <emphasis
>ofokuserad</emphasis
>, eftersom det mänskliga ögat är mycket bra på att detektera det, men <emphasis
>hur</emphasis
> kan Ekos överhuvudtaget veta det? </para>

    <para
>Den mest beprövade metoden är halvflödesradie (HFR), som är ett mått på bredden i bildpunkter räknat från stjärnans centrum tills den ackumulerade intensiteten är hälften av stjärnans totala flöde. När du flyttar dig närmare punkten för optimalt fokus, så blir HFR mindre och når ett minimum vid fokuspunkten innan den ökar när du börjar röra dig bort från fokus. HFR har använts på mängder av olika typer av utrustning och har visat sig vara stabil under en mängd olika omständigheter. </para>

    <para
>Utöver HFR stödjer Ekos andra fokuseringsåtgärder, bland annat ett justerat HFR-mått, FWHM, Antal stjärnor och Fouriereffekt. Det rekommenderas att börja med HFR och när användaren har blivit skicklig på att fokusera sin utrustning, att prova de andra måtten. </para>

    <para
>Efter att Ekos har bearbetat en bild väljer den antingen en enda stjärna och börjar mäta dess HFR, eller så väljer den en uppsättning stjärnor som matchar kriterierna som har ställts in och beräknar en genomsnittlig HFR. Den kan automatiskt välja stjärnor, eller så kan du välja en stjärna manuellt. Det rekommenderas att låta Ekos välja en uppsättning stjärnor. </para>

    <para
>Ekos stöder fyra olika fokuseringsalgoritmer: Engångslinjär, Linjär, Iterativ, Polynomisk. Engångslinjär är den rekommenderade algoritmen. </para>

    <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Engångslinjär</emphasis
>: I algoritmen Engångslinjär, upprättar Ekos en V-kurva och anpassar kurvan till data för att finna fokuseringslösningen. Den går sedan till det beräknade minimat. Viktiga funktioner omfattar: </para>

        <itemizedlist>
          <listitem>
            <para
>Algoritmen kompenserar för fokuseringsenhetens spel. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen är snabb, och använder en genomgång för att identifiera optimal fokusering. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen använder en mer sofistikerad kurvanpassning för att precisera den optimala fokuseringspositionen. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen är mycket inställningsbar med användarkontroll över många parametrar som stegstorlek, antal steg och hur man hanterar extremvärden i datapunkterna. </para>
          </listitem>
        </itemizedlist>
      <para
>Förutsatt att fokuseringsenheten beter sig på ett repeterbart sätt, dvs när den beordras att gå till position X, går den alltid till samma position, kommer algoritmen att vara den bästa att använda.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Linjär</emphasis
>: I den linjära algoritmen går Ekos utåt från sin startpunkt och går sedan inåt och tar regelbundna datapunkter genom punkten med optimalt fokus och sedan vidare inåt för att rita en V-kurva. Den anpassar sedan en kvadratisk kurva till datapunkterna och beräknar punkten för optimalt fokus. Den går sedan ut igen förbi punkten för optimalt fokus, halverar stegstorleken och går in igen för en andra genomgång. Den ser till att följa kurvan från första genomgången och att finna minsta HFR. På grund av slumpmässighet i HFR-mätningarna använder den procentuell tolerans för att avgöra när den har hittat en lösning. Viktiga funktioner omfattar: </para>

        <itemizedlist>
          <listitem>
            <para
>Algoritmen kompenserar för fokuseringsenhetens spel. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen är långsam, och använder två genomgångar för att identifiera optimal fokusering. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen använder kurvanpassning för att precisera den optimala fokuseringspositionen i första genomgången, men använder sedan procentuell tolerans för att försöka stanna så nära HFR som möjligt vid andra genomgången. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen är mycket inställningsbar med användarkontroll över många parametrar som stegstorlek och antal steg. </para>
          </listitem>
        </itemizedlist>
        <para
>Om fokuseringsenheten beter sig på ett inkonsekvent sätt, d.v.s. när den beordras att gå till position X, finns det variabilitet i positionen den går till, då är den här algoritmen den bästa att använda eftersom den har en viss inbyggd tolerans för variabiliteten.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Iterativ</emphasis
>: I den iterativa algoritmen fungerar Ekos iterativt genom att förflytta sig i diskreta steg, som först bestäms av den användarinställningsbara stegstorleken och senare av V-kurvans lutning, för att komma närmare den optimala fokuseringspositionen där den sedan växlar och utför mindre, finare rörelser för att nå optimal fokus. Fokuseringsprocessen stoppas när uppmätt HFR är inom den inställningsbara toleransen för minsta registrerade HFR i processen. Med andra ord, så fort processen börjar söka efter en lösning inom ett snävt begränsat område, kontrollerar den om aktuell HFR är inom den procentuella skillnaden jämfört med minimal HFR som registrerats, och om villkoret är uppfyllt anses den automatiska fokuseringsprocessen vara lyckad. Standardvärdet är satt till 1 % och är tillräckligt för de flesta situationer. Steg-alternativen anger antalet initiala tick som fokuseringsenheten måste gå. Om bilden är kraftigt ur fokus ställer vi in stor stegstorlek (dvs. större än 250). Å andra sidan, om fokus är nära optimalt fokus, ställer vi in stegstorleken till ett mer rimligt område (mindre än 50). Det krävs försök och misstag för att finna bästa tick att börja med, men Ekos använder den bara för den första fokuseringsrörelsen, eftersom alla efterföljande rörelser beror på V.kurvans lutningsberäkningar. Viktiga funktioner omfattar:</para>

        <itemizedlist>
          <listitem>
            <para
>Algoritmen förlitar sig på att fokuseringsenheten har ett väldefinierat spel. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen kan vara snabb med användning av ett minimalt antal steg. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen arbetar med paradigmen "tillräckligt bra", där den stannar när HFR är inom den procentuella toleransen av det uppfattade minimat. </para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Polynomisk</emphasis
>: I polynomalgoritmen startar processen i iterativt läge, men när vi väl går över till andra sidan av V-kurvan (när HFR-värdena börjar öka igen efter att ha minskat ett tag), utför Ekos kvadratisk kurvanpassning för att hitta en lösning som förutsäger minsta möjliga HFR-position. Viktiga funktioner omfattar:</para>

        <itemizedlist>
          <listitem>
            <para
>Algoritmen förlitar sig på att fokuseringsenheten har ett väldefinierat spel. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen kan vara snabb med användning av ett minimalt antal steg. </para>
          </listitem>

          <listitem>
            <para
>Algoritmen använder kurvanpassning för att precisera den optimala fokuseringspositionen. </para>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="optical-train-group">
    <title
>Optikgrupp</title>

    <screenshot>
      <screeninfo
>Optik </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="optical_train_group.png" format="PNG"
                     width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Optikinställningar</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Gruppen Optik visar den för närvarande valda optiken. Normalt är det den primära tagningsoptiken, men annan optik kan väljas. Gruppen består av:</para>

    <itemizedlist>
      <listitem>
        <para
><guibutton
>Optik</guibutton
>: Optiken som för närvarande används av fokuseringsfliken. Håll musen över fältet för en mer detaljerad beskrivning av den valda optiken.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Redigeringsknappen</guibutton
>: Visar optikdialogrutan för att visa och potentiellt ändra optiken.</para>
      </listitem>
    </itemizedlist>

    <para
>Fokuseringsparametrar sparas automatiskt per optik.</para>
  </sect3>

  <sect3 id="focus-focuser-group">
    <title
>Fokuseringsgrupp</title>

    <screenshot>
      <screeninfo
>Fokuseringsinställningar </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focuser_group.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringsinställningar</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Alla fokuseringsenheter kompatibla med INDI stöds. Det rekommenderas att använda <emphasis role="bold"
>absoluta</emphasis
> fokuseringsenheter för bästa resultat eftersom deras absoluta position är känd vid igångsättning. Med INDI är fokuseringsenhetens <emphasis
>nollposition</emphasis
> när dragröret är <emphasis role="bold"
>helt indragen</emphasis
>. Vid fokusering <emphasis
>utåt</emphasis
>, ökar fokuseringsenhetens position, medan den minskar vid fokusering <emphasis
>inåt</emphasis
>. Följande fokuseringsenheter stöds: </para>

    <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Absoluta</emphasis
>: Fokuseringsenheter med absolut position såsom RoboFocus, MoonLite, ASI ZWO </para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Relativa</emphasis
>: Fokuseringsenheter med relativ position. </para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Tidsbaserad</emphasis
>: Tidsbaserade fokusering utan positionsåterkoppling som justerar fokuseringspositionen genom att flytta under en viss tid. </para>
      </listitem>
    </itemizedlist>

    <para
>Fältet <guibutton
>Fokuseringsenhet</guibutton
> innehåller fokuseringsenheten i den tillhörande optiken. </para>

    <para
>För absoluta och relativa fokuseringsenheter är stegstorleken i <emphasis
>tick</emphasis
> och för enkla eller tidsbaserade fokuseringsenheter är stegstorleken i <emphasis
>millisekunder</emphasis
>. Knapparna <guibutton
>In</guibutton
> och <guibutton
>Ut</guibutton
> kan sedan användas för att flytta fokuspunkten med antalet tick som definierats i fältet <guibutton
>Initial stegstorlek</guibutton
> under fliken <link linkend="focus-mechanics"
>Mekanik</link
>.</para>

    <para
>Fältet Steg har två delar:</para>
    <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Vänsterhandssteg</emphasis
>: Aktuell fokuseringsposition. Det matas bara ut och uppdateras när fokuseringsenheten flyttas för att återspegla den aktuella positionen.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Högerhandssteg</emphasis
>: Det är inmatning och låter användaren ange en önskad position. När knappen <guibutton
>Gå till</guibutton
> trycks ned, flyttas fokuspunkten från sin nuvarande position till den position som anges i fältet. </para>
      </listitem>
    </itemizedlist>

    <para
>Vid start visar vänsterhandsstegen den aktuella fokuseringspositionen. Fältet för högerhandssteg är förvalt från optikens sparade inställningar. Det är användbart, om du till exempel har flera optiker som använder samma fokuseringsenhet men löser på olika positioner. I det här fallet kommer högerhandsstegen att innehålla det sista kvarvarande värdet för detta fält för den valda optiken. Så, efter att ha bytt utrustning och valt optisk, om användaren trycker på knappen <guibutton
>Gå till</guibutton
> flyttas fokuseringsenheten till ett bra ställe att börja fokusera från.</para>

    <para
>Knappen <guibutton
>Gå till fokuseringsposition</guibutton
> flyttar fokuseringsenheten till positionen i fältet högerhandssteg. </para>

    <para
>Knappen <guibutton
>Stoppa fokuseringsrörelse</guibutton
> stoppar den pågående fokuseringsrörelsen. </para>

    <para
>Knappen <guibutton
>Automatisk fokusering</guibutton
> startar en automatisk fokuseringskörning. Knappen <guibutton
>Stopp</guibutton
> används för att stoppa körningen. </para>

    <para
>Knappen <guibutton
>Ta bild</guibutton
> tar en bildruta baserat på de aktuella inställningarna i <link linkend="focus-ccd-filter-wheel"
> Kamera och filterhjulsgrupp</link
>. Knappen <guibutton
>Starta bildtagning</guibutton
> börjar ta bildrutor upprepade gånger tills knappe <guibutton
>Stopp</guibutton
> trycks ner. </para>

    <para
>Vissa av fokuseringsalgoritmerna försöker klara av att startas borta från punkten för optimalt fokus, men för förutsägbara resultat är det bäst att utgå från en position som är ungefär i fokus. För förstagångsinstallationen kan <guibutton
>Starta bildtagning</guibutton
> användas tillsammans med knapparna <guibutton
>In</guibutton
> och <guibutton
>Ut</guibutton
> för att justera fokuseringspositionen för att ungefär minimera HFR för stjärnor i de tagna bilderna. När bildtagning används på detta sätt ändras diagrammets <link linkend="focus-v-curve"
>V-kurva</link
> för att visa en tidsserie av bildrutor och deras associerade HFR:er. Det gör bildtagningsprocessen mycket lättare att utföra.</para>

    <para
>Om du är helt ny inom astronomi är det alltid en bra idé att bekanta dig med din utrustning i dagsljus. Det inkluderar att få ungefärlig fokuseringsposition på ett avlägset objekt. Det ger ett bra utgångsläge för att fokusera på stjärnor när natten kommer.</para>
  </sect3>

  <sect3 id="focus-ccd-filter-wheel">
    <title
>Kamera- och filterhjulsgruppen</title>

    <screenshot>
      <screeninfo
>Fokuseringskamera- och filterhjulsgrupp </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_ccdfw_group.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringskamera- och filterhjulsgrupp</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Den här sektionen med parametrar hanterar kamera- och filterinställningar att använda vid fokusering.</para>

    <para
>Den övre raden gör det möjligt att ställa in CCD-parametrar.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Exp</guilabel
>: Exponeringstiden i sekunder.</para>
      </listitem>

      <listitem>
        <para
>Knappen <guibutton
>Växla fullskärmsläge</guibutton
> öppnar fönstret som visar fokuseringsbildrutan i ett separat fönster. Om du trycker på den igen återgår den till fokuseringsfönstret.</para>
      </listitem>

      <listitem>
        <para
>Knappen <guibutton
>Visa i FITS-visning</guibutton
> öppnar ett separat FITS-visningsfönster för att visa fokuseringsbildrutan, förutom fokuseringsbildrutan som redan visas i fokuseringsfönstret.</para>
      </listitem>

      <listitem>
        <para
>Knappen <guibutton
>Direktsänd video</guibutton
> visar motsvarande ruta.</para>
      </listitem>
    </itemizedlist>

    <para
>Nästa rad låter kameraparametrar ställas in. Välj ett värde från indelningskombinationsrutan och ställ sedan in kamerans förstärkning eller ISO.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Indelning</guilabel
>: Att öka indelningen ändrar bildskalan och resulterar i ljusare bildpunkter. Det är i allmänhet bara värt att indela mer än 1 x 1 om bildskalan är översamplad, där ökningen av bildskalan inte leder till en upplösningsförlust. Om du vill öka stjärnans ljusstyrka, försök att öka exponeringen och/eller förstärkningen. Om du är osäker använd 1 x 1.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Förstärkning</guilabel
>: Ställ in förstärkningen för kameran som används för att fokusera. Värdet måste vara tillräckligt högt för att ge ett tydligt stjärnmönster men inte så högt att det skapar för mycket brus som stör fokuseringsfunktionen. Visst experimenterade kan krävas för att hitta ett optimalt värde. Om du är osäker på var du ska börja, prova med enhetsförstärkning för kameran och justera därifrån.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>ISO</guilabel
>: Ställ in ISO för kameran som används för att fokusera. Visst experimenterande krävs för att hitta ett optimalt värde.</para>
      </listitem>
    </itemizedlist>

    <para
>Den tredje raden hanterar temperaturkällan och filter, om det finns något.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>TK</guilabel
>: Välj temperaturkälla från kombinationsrutan. Nedan visas aktuell temperatur från den valda temperaturkällan och temperaturförändringen mellan den senaste lyckade automatiska fokuseringskörningen och den aktuella temperaturen. Det är vanligt att fokusera om efter betydande temperaturförändringar som ändrar teleskopets fokuspunkt.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Filter</guilabel
>: Välj filter att använda.</para>

        <para
>För att börja fokusera är det förmodligen lättare att välja filtret som släpper igenom mest ljus, till exempel Luminans-filtret. Klicka på filterikonen <inlinemediaobject
><imageobject
><imagedata fileref="view-filter.png" format="PNG"/></imageobject
></inlinemediaobject
> för att öppna rutan <link linkend="focus-filter-settings" 
>Filterinställningar</link
>. Det gör att ett antal parametrar kan ställas in per filter som ska användas under en automatisk fokuseringskörning.</para>
      </listitem>

      <listitem>
        <para
>Knappen <guibutton
>Återställ</guibutton
> återställer fokuseringens delbild till fullskärm.</para>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-settings">
    <title
>Fokuseringsinställningar</title>

    <screenshot>
      <screeninfo
>Fokuseringsinställningar </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_settings.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringsinställningar</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Därefter följer fem flikar med parametrar. Parametrarna förblir kvar mellan sessioner. Först ut är fönstret Inställningar.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Välj stjärna automatiskt</guilabel
>: Inställningen är endast relevant om <guilabel
>Delbild</guilabel
> är vald. Om <guilabel
>Välj stjärna automatiskt</guilabel
> väljs i detta fall, väljer Ekos stjärnan som ska användas för fokusering. Annars måste användaren manuellt välja stjärnan med FITS-visning.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Stoppa guidning</guilabel
>: Ställ in alternativet för att avbryta guidningen under en automatisk fokuseringskörning. Syftet med det är att förhindra att guidning får problem med oskarpa stjärnor under fokuseringsprocessen när till exempel guidekikaren fästs på huvudteleskopet med hjälp av en OAG.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Mörk bild</guilabel
>: Markera alternativet för att subtrahera mörka bilder. Alternativet kan vara användbart med brusiga bilder, där ett förutbestämt mörker dras från fokuseringsbilden innan vidare bearbetning.</para>

        <para
>Om heta bildpunkter orsakar problem med fokus, välj mörka bilder och ställ antingen in en vanlig mörk huvudbild: eller en defektbild.</para>

        <para
>Mörka bilder används av fokusering, inriktning och guidning. Se funktionen <link linkend="ekos-capture"
>Tagningsmodul</link
> i Bibliotek med mörka bildrutor för mer information om hur mörka bilder ställs in.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Hela fältet</guilabel
>: Välj för att använda hela fältet för kameran. Med läget väljer fokuseringen automatiskt flera stjärnor för användning i en automatisk fokuseringskörning. Alternativet till det är <guilabel
>Delbild</guilabel
>.</para>
        </listitem>

      <listitem>
        <para
><guilabel
>Delbild</guilabel
>: Välj för att använda en enda stjärna för den automatiska fokuseringsprocessen. Alternativet till det är <guilabel
>Hela fältet</guilabel
> där flera stjärnor används av automatisk fokusering. Beroende på inställningen av <guilabel
>Välj stjärna automatiskt</guilabel
> väljer antingen användaren eller Ekos stjärnan.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Ruta</guilabel
>: Ställer in storleken på rutan som omsluter fokuseringsstjärnan när <emphasis role="bold"
>Delbild</emphasis
> används. Öka den om du har mycket stora stjärnor. För Bahtinov-fokuseringsenheter kan storleken ökas ännu mer för att omsluta Bahtinov-diffraktionsmönstret bättre.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Visningsenheter</guilabel
>: Välj enheter för visning av V-kurvan i automatisk fokusering när HFR eller FWHM är valt. <emphasis role="bold"
>Bildpunkter</emphasis
> och <emphasis role="bold"
>Bågsekunder</emphasis
> stöds.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Guidningsdämpning</guilabel
>: Alternativet används tillsammans med <guilabel
>Stoppa guidning</guilabel
>. Det låter eventuella vibrationer i optiken minska genom att vänta så här många sekunder efter att den automatiska fokuseringsprocessen har slutförts, innan guidningen startas om.</para>
      </listitem>

      <listitem>
        <para
>Nästa uppsättning alternativknappar är relaterade till <emphasis role="bold"
>Maskningsalternativ</emphasis
> som används med <guilabel
>Hela fältet</guilabel
>.</para>
        <para
>Effekten av maskningsalternativ kan ses i <link linkend="focus-display"
>FITS-visningen</link
>.</para>
	  <itemizedlist>
	    <listitem>
	      <para
><guilabel
>Använd alla stjärnor för fokusering</guilabel
>: Välj alternativet om alla stjärnor i fältet ska beaktas vid fokusering.</para>
	    </listitem>
	    
	    <listitem>
              <para
><guilabel
>Ringformad mask:</guilabel
>: Alternativ tillhandahåller två inmatningsfält som tillsammans definierar en ring över kamerans synfält. Stjärnor som faller utanför ringen bortses från vid bearbetning. Inställning av ett inre värde över 0 % gör att stjärnor i mitten av synfältet bortses från. Det kan vara användbart för att undvika att använda stjärnor från bildens mål (till exempel en galax) i fokuseringssyfte. Inställning av ett yttre värde under 100 % gör att stjärnor i kanterna av synfältet bortses ifrån under fokuseringen. Det kan vara användbart om du inte har ett plant fält ut till kanterna på synfältet.</para>
	    </listitem>

	    <listitem>
	      <para
><guilabel
>Mosaikmask</guilabel
>: En 3 x 3 mosaik består av rutor från bildens centrum, hörn och kanter. Alternativet är användbart om du vill inspektera optikens prestanda: Du kanske känner till det från skriptet PixInsight Aberration Inspector. Rutornas storlek kan ställas in i procent av bildrutans bredd, med mellanrumsvärdet som anger utrymmet mellan rutorna.</para>
                <para
>Det finns tre användningsfall för Mosaikmask: <itemizedlist>
                  <listitem>
                    <para
>Kontrollerar fokus i alla delar av sensorn: Masken möjliggör en enkel visuell inspektion och jämförelse av stjärnor i centrum, hörnen och kanterna på sensorn. Det är särskilt användbart för optik som visar aberration om fokus inte uppnås till 100 %.</para>
                  </listitem>
                  <listitem>
		    <para
>Korrigering av bildlutning: Speciellt stora sensorer är mycket känsliga för felaktigt avstånd och lutning av sensorn. I sådana fall visar bilden aberration, särskilt i bildhörnen. Om alla hörn visar samma effekt behöver avståndet korrigeras. Om aberrationerna i hörnen skiljer sig är det vanligtvis resultatet av en lutad sensor.</para>
                  </listitem>
                  <listitem>
                    <para
>Kollimerande Newtonteleskop: Inspektion av bildrutor i oskarpt tillstånd används vanligtvis för att kollimering av Newtonteleskop. Se till exempel Tommy Nawratils <ulink url="https://teleskop-austria.at/information/pdf/JUS_Photonewton_Collimation_Primer_EN.pdf"
> The Photonewton Collimation Primer</ulink
> för mer information.</para>
                  </listitem>
                </itemizedlist
></para>
	    </listitem
>	    
	  </itemizedlist>
      </listitem>

      <listitem>
        <para
>Nästa uppsättning komponenter är relaterade till <emphasis role="bold"
>Adaptiv fokusering</emphasis
>. Det är en experimentell funktion i Ekos. Tanken här är att hålla teleskopet fokuserat genom att anpassa fokuseringspositionen baserat på förändringar i miljöförhållandena utan att behöva utföra en fullständig automatisk fokuseringskörning. Se avsnittet <link linkend="focus-adaptive"
>Adaptiv fokusering</link
> för mer information.</para>

        <para
>Till exempel när temperaturen ändras under en bildbehandlingssession ändras fokuseringspunkten. Genom att sampla temperaturen mellan delbilder är det möjligt att först beräkna temperaturförändringen och sedan omvandla den till ett antal tick av fokuseringsrörelser att utföra mellan delbilder.</para>

        <para
>För att kunna använda <emphasis role="bold"
>Adaptiv fokusering</emphasis
> är det nödvändigt att ställa in viss information om systemet. I synnerhet måste du tala om för Ekos hur många tick (och i vilken riktning) som ska fokuseringsenheten ska flyttas när miljöförhållandena ändras. Det beskrivs i fönstret <link linkend="focus-filter-settings"
>Filterinställningar</link
>. Fönstret visas genom att klicka på filterikonen <inlinemediaobject
><imageobject
><imagedata fileref="view-filter.png" format="PNG"/></imageobject
></inlinemediaobject
>.</para>

        <para
>Följande komponenter är tillgängliga: <itemizedlist>
            <listitem>
              <para
><guilabel
>Adaptiv fokusering</guilabel
>: Välj alternativet för att aktivera <emphasis role="bold"
>Adaptiv fokusering</emphasis
>.</para>
            </listitem>

            <listitem>
              <para
><guilabel
>Minimal förflyttning</guilabel
>: Den minsta tillåtna förflyttningen med adaptiv fokusering.</para>
            </listitem>

            <listitem>
              <para
><guilabel
>Anpassa startposition</guilabel
>: Markera för att tillåta adaptiv fokusering att beräkna startpositionen för en automatisk fokuseringskörning. Startpositionen är den senaste goda lösningspositionen för det valda filtret, anpassad till miljöförändringar.</para>

              <para
>Till exempel, om den aktuella fokuseringspositionen är 1000, temperaturen är 4 °C, och om det röda filtret är valt (senaste goda fokuseringspositionen för röd är 990 vid 5 °C och Ekos är inställt att gå +3 <guilabel
>tick / °C</guilabel
>). Sedan, om Anpassa startposition är avstängt, startar automatisk fokusering vid 1000. Om Anpassa startposition är på, startar automatisk fokusering vid 990 + (5 - 4) * 3 = 993.</para>

              <para
>Funktionen är användbar för att säkerställa att automatisk fokusering börjar från nära fokuseringspunkten, vilket innebär en mer symmetrisk V-kurva. Det är särskilt användbart när du växlar mellan filter som har stora skillnader i fokuseringspunkter.</para>

              <para
>Det är möjligt att använda funktionen på egen hand utan adaptiv fokusering. Markera bara kryssrutan och lämna Tick / °C inställd till noll. På så sätt kommer startpositionen för automatisk fokusering att vara filterberoende och varje automatisk fokuseringskörning startar vid fokuseringspunkten för den senaste lyckade automatiska fokuseringskörningen för det filtret.</para>
            </listitem>

            <listitem>
              <para
><guilabel
>Maximal total förflyttning</guilabel
>: Den maximala totala fokuseringsrörelsen som adaptiv fokusering tillåts under observationssessionen. Syftet med den är som ett "dödmansgrepp" för adaptiv fokusering ifall den sticker iväg. Till exempel, om temperaturkällan går sönder och ger fel temperaturavläsning medan utrustningen är obevakad, kan det resultera i att adaptiv fokusering försöker göra stora fokuseringsrörelser.</para>

              <para
>Om Maximal total förflyttning nås blir <guilabel
>Adaptiv fokusering</guilabel
> avmarkerat tills den kontrolleras manuellt av användaren.</para>
            </listitem>
          </itemizedlist>
        </para>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-process">
    <title
>Fokuseringsprocessen</title>

    <screenshot>
      <screeninfo
>Fokuseringsprocessen </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_process.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringsprocessen</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Det här är parameterrutan för fokuseringsprocessen. Komponenter visas bara om de är relevanta för de val som gjorts.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Detektering</guilabel
>: Välj stjärndetekteringsalgoritm. Varje algoritm har sina styrkor och svagheter. Det rekommenderas att använda SEP, om du inte har en specialiserad användning. Följande är tillgängliga:</para>

        <itemizedlist>
          <listitem>
            <para
><emphasis role="bold"
>SEP</emphasis
>: Inbyggt bibliotek för källextraktion och fotometri. Det är standardvärdet.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Tyngdpunkt</emphasis
>: En extraktionsmetod baserad på att uppskatta stjärnmassan omkring signaltoppar.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Gradient</emphasis
>: En extraktionsmodell för en enda källa baserad på Sobel-filtret. </para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Tröskel</emphasis
>: En algoritm för identifiering av en enda källa baserad på bildpunktsvärden. </para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Bahtinov</emphasis
>: Detekteringsmetoden kan användas när en Bahtinov-mask för fokusering. Ta först en bild, välj sedan stjärnan att fokusera på. En ny bild tas och diffraktionsmönstret analyseras. Tre linjer av diffraktionsmönstret visas som anger hur bra mönstret känns igen och hur bra bilden är fokuserad. När mönstret inte känns igen så väl, kan parametern <emphasis
>Antal rader</emphasis
> justeras för att förbättra igenkänningen. Linjen med cirklar i varje ända är en förstorad indikering av fokus. Ju kortare linjen är desto bättre är bilden fokuserad.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><guilabel
>SEP-profil</guilabel
>: Om stjärndetekteringsalgoritmen är inställd till <emphasis
>SEP</emphasis
>, välj då en parameterprofil att använda med algoritmen. Det rekommenderas att använda standardprofilen 1-Focus-Default som utgångspunkt.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Algoritm</guilabel
>: Välj den automatiska fokuseringsprocessens algoritm: </para>

        <itemizedlist>
        <listitem>
          <para
><emphasis role="bold"
>Engångslinjär</emphasis
>: Det är den rekommenderade algoritmen. I denna algoritm fastställer Ekos en V-kurva och anpassar en kurva till data för att hitta fokuseringslösningen. Den går sedan till den beräknade lösningen.</para>

          <para
>Algoritmen stöder den äldre stilen med kvadratisk kurvtyp, såväl som det nyare <link linkend="Levenberg-Marquardt"
>Levenberg-Marquardt lösningsverktyget</link
> för hyperboliska och paraboliska kurvor. Den viktar också datapunkterna i kurvanpassningsprocessen om <guilabel
>Använd viktning</guilabel
> är markerat och utför en förfiningsprocess om <guilabel
>Förfina kurvanpassning</guilabel
> har valts.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Linjär</emphasis
>: Algoritmen skapar en V-kurva med ungefär <emphasis role="bold"
>utåtsteg</emphasis
> antal steg på varje sida om minimum. Efter att ha skapat V-kurvan anpassar den sedan en andragradsekvation till kurvan (parabolisk form) och använder den för att beräkna fokuseringspositionen som ger minsta HFR. Efter att ha identifierat minimat utför den sedan en andra genomgång som halverar stegstorleken och återskapar kurvan från den fösta genomgången. Den försöker stanna inom <emphasis role="bold"
>Tolerans</emphasis
> av lägsta HFR som beräknats under den första genomgången.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Iterativ</emphasis
>: Flyttar fokuseringsenheten med diskreta steg, initialt bestämda av stegstorleken. När en kurvlutning väl har beräknats, beräknas ytterligare för att nå en optimal lösning. Algoritmen stoppar när uppmätt HFR är inom <emphasis role="bold"
>toleransen</emphasis
> för det minimala HFR-värdet uppmätt under proceduren.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Polynomisk</emphasis
>: Startar med den iterativa metoden. Vid överkorsning till v-kurvans andra sidan, beräknas polynomiska anpassningskoefficienter tillsammans med en möjlig minimal lösning. Algoritmen kan vara snabbare än ett rent iterativ tillvägagångssätt givet en bra datamängd.</para>
        </listitem>
      </itemizedlist>
    </listitem>

    <listitem>
      <para
><guilabel
>Kurvanpassning</guilabel
>: Typ av kurva att anpassa till datapunkterna. </para>
      <itemizedlist>
        <listitem>
          <para
><emphasis role="bold"
>Hyperbel</emphasis
>: Anpassar en hyperbel som använder en icke-linjär minsta kvadratalgoritm som tillhandahålls av GSL (GNU Science Library). Se <link linkend="Levenberg-Marquardt"
>Levenberg-Marquardt lösningsverktyg</link
> för mer information.</para>

          <para
>Det är det rekommenderade alternativet.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Parabel</emphasis
>: Anpassar en parabel med hjälp av en icke-linjär minsta kvadratalgoritm som tillhandahålls av GSL (GNU Science Library). Se <link linkend="Levenberg-Marquardt"
>Levenberg-Marquardt lösningsverktyg</link
> för mer information.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Kvadratisk</emphasis
>: Använder en andragradsekvation med en linjär minsta kvadratalgoritm som tillhandahålls av GSL (GNU Science Library). Det är i själva verket en parabolisk kurva.</para>

          <para
>Det rekommenderas inte längre att använda kurvan.</para>
        </listitem>
      </itemizedlist>
    </listitem>

    <listitem>
    <para
><guilabel
>Mått</guilabel
>: Välj mått att använda i fokuseringsprocessen. Följande är tillgängliga:</para>

    <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>HFR</emphasis
>: Halvflödesradie (HFR) är det rekommenderade måttet. När en stjärna detekteras beräknar Ekos HFR för stjärnan. Det är radien för en tänkt cirkel, centrerad i stjärnans mitt, som omsluter halva stjärnans totala flöde.</para>

        <para
>Den bästa fokuseringspunkten motsvarar minimal HFR.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Justerad HFR</emphasis
>: Det är en experimentell funktion som använder en HFR-beräkning justerad enligt ljusstyrka för att ta hänsyn till det faktum att HFR för ljusstarkare stjärnor är större än för mindre stjärnor.</para>

        <para
>Algoritmen justerar värdet på uppmätt HFR, vanligtvis uppåt, så att HFR som erhålls med den justerade HFR metoden blir högre än de uppmätta HFR-värdena. Det betyder inte att du får sämre resultat genom att använda justerad HFR, bara att måttet är annorlunda.</para>

        <para
>När måttet används är det vanligt att få mindre felstaplar för datapunkterna när <guilabel
>Använd viktning</guilabel
> är valt.</para>

        <para
>Den bästa fokuseringspunkten motsvarar minimal justerad HFR.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>FWHM</emphasis
>: Det är en experimentell funktion som anpassar en Gaussisk yta till varje stjärna och använder den för att beräkna stjärnans fulla bredd och halva maximum (FWHM). FWHM är bredden på en cirkel (eller ellips) centrerad på stjärnans mitt som når stjärnans kant med halva dess maximala intensitet.</para>

        <para
>Den bästa fokuseringspunkten motsvarar minimal FWHM.</para>

        <para
>Förvänta dig att FWHM är ungefär dubbelt så stort som en stjärnas HFR.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Antal stjärnor</emphasis
>: Det är en experimentell funktion som beräknar antalet stjärnor på bilden och använder värdet som fokuseringsmått. Tanken är att när du flyttar dig närmare fokus så blir fler stjärnor detekterbara.</para>

        <para
>Fördelen med åtgärden är att den är väldigt enkel och inte kräver algoritmer för att beräkna HFR eller FWHM.</para>

        <para
>Den bästa fokuseringspunkten motsvarar maximalt antal stjärnor.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Fourier</emphasis
>: Fourier gör en Fouriertransform av bilden och beräknar bildens effekt i frekvensrymden. Antagandet är att för en astronomisk bild av stjärnor och bakgrund kommer stjärnorna att vara Gaussiska. Under en Fouriertransform övergår en Gaussisk funktion till en annan Gaussisk funktion, men bredare stjärnor förvandlas till smalare Gaussiska funktioner i frekvensrymden och vice versa. Så att summeras frekvensrymdens innehåll i  i fokus, vilket i själva verket är ett mått på effekt, är ett maximum.</para>

        <para
>Det följer huvudidén som Tan och Schulz föreslog i sin artikel: <ulink url="https://arxiv.org/pdf/2201.12466.pdf"
>A Fourier method for the determination of focus for telescopes with stars</ulink
> . Observera att dokumentet ger andra bearbetningsförslag utöver idén om att använda Fouriertransformer som inte ingår i Ekos</para>

        <para
>Det är en relativt ny metod i astronomivärlden och kräver ingen stjärndetektering. Tan och Schulz rapporterar goda resultat med både amatörteleskop och professionella teleskop.</para>
      </listitem>
    </itemizedlist>
    </listitem>

    <listitem>
      <para
><guilabel
>PSF</guilabel
>: Om <guilabel
>Mått</guilabel
> är inställt till FWHM, kan PSF-komponent väljas för att använda vid anpassning av en yta till stjärnan. För närvarande stöds bara Gaussiskt.</para>
    </listitem>

    <listitem>
      <para
><guilabel
>Använd viktning</guilabel
>: Det är endast tillgängligt med den engångslinjära fokuseringsalgoritmen och kurvanpassningar av hyperbel och parabel. Det kräver att hela fältet är valt. Alternativet beräknar standardavvikelsen för stjärnmått och använder kvadraten på denna (matematiskt variansen) som en viktning i kurvanpassningsprocessen. Fördelen med det är att datapunkter med mindre tillförlitliga data och därför större HFR-standardavvikelser kommer att tillmätas mindre viktning än mer tillförlitliga datapunkter. Om alternativet är avmarkerat, och för all annan kurvanpassning där alternativet inte är tillåtet, ges alla datapunkter samma viktning i kurvanpassningsprocessen.</para>

      <para
>Standardavvikelsen återges som en felstapel på V-kurvan för varje datapunkt.</para>

      <para
>Det rekommenderas att alternativet markeras.</para>

      <para
>Se <link linkend="Levenberg-Marquardt"
>Levenberg-Marquardt lösningsverktyg</link
> för mer information.</para>
    </listitem>

    <listitem>
      <para
><guilabel
>R²-gräns</guilabel
>: Den är endast tillgängligt med den engångslinjära fokuseringsalgoritmen och kurvanpassningar för hyperbel och parabel. Som en del av den engångslinjära algoritmen beräknas hur mycket kurvan passar datapunkterna, eller <link linkend="Coefficient_of_Determination"
>determinationskoefficienten, R²</link
>. Alternativet tillåter att ett minsta acceptabelt värde på R² definieras som jämförs med värdet som erhålls från kurvanpassningsprocessen. Om minimivärdet inte har uppnåtts körs den automatiska fokuseringen igen. Endast en omkörning görs och även om minimivärdet R² inte har uppfyllts andra gången, anses den automatiska fokuseringskörningen ändå vara lyckad.</para>

      <para
>Experimentera för att finna ett lämpligt värde men en bra utgångspunkt kan vara 0,8 eller 0,9</para>
    </listitem>

    <listitem>
      <para
><guilabel
>Förfina kurvanpassning</guilabel
>: Det är ett experimentellt alternativ endast tillgängligt med den engångslinjära fokuseringsalgoritmen och kurvanpassningar för hyperbel och parabel. Om alternativet är markerat så anpassar Ekos en kurva i slutet av svepet av datapunkter och mäter R². Sedan används Peirces kriterium baserat på Goulds metodik för identifiering av extremvärden. Se <ulink url="https://en.wikipedia.org/wiki/Peirce%27s_criterion"
>Peirce's criterion</ulink
> för mer information, inklusive Peirces originalartikel och Goulds artikel som båda hänvisas till i anmärkningarna. Om Peirces kriterium upptäcker ett eller flera extremvärden, görs ytterligare ett försök till kurvanpassning med extremvärdena borttagna. Återigen beräknas R² och jämförs med den ursprungliga kurvanpassningens R². Om R² är bättre används den senaste körningen, om inte används den ursprungliga kurvanpassningen (med avvikelserna inkluderade).</para>

      <para
>Extremvärden är tydligt markerade på V-kurvan med ett X genom datapunkten.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Medelvärde över</guilabel
>: Antal bildrutor att ta för varje datapunkt. Det är vanligtvis klokt att börja med en, men en ökning av värdet resulterar i en medelvärdesprocess för den stjärna som valts.</para>
      </listitem>

      <listitem>
        <para
>Om <guilabel
>Detektering</guilabel
> är inställd till Tröskel är följande ytterligare fält tillgängligt:</para>
        <itemizedlist>
          <listitem>
            <para
><guilabel
>Tröskel</guilabel
>: Det innehåller ett procentvärde som används för stjärndetektering med detekteringsalgoritmen <emphasis
>Tröskel</emphasis
>. Öka för att begränsa tyngdpunkten till ljusa kärnor. Minska för att omsluta suddiga stjärnor.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
>Om <guilabel
>Detektering</guilabel
> är inställd till Bahtinov är följande ytterligare komponenter tillgängliga:</para>
        <itemizedlist>
          <listitem>
            <para
><guilabel
>Antal rader</guilabel
>: Antalet rader som visas på skärmen när du använder en Bahtinov-mask.</para>
          </listitem>

          <listitem>
            <para
><guilabel
>Sigma</guilabel
>: Sigma för Gaussiska oskärpan som appliceras på bilden innan Bahtinov-kantdetektering utförs.</para>
          </listitem>

          <listitem>
            <para
><guilabel
>Kärnstorlek</guilabel
>: Kärnstorleken för den Gaussiska oskärpa som appliceras på bilden innan Bahtinov-kantdetektering utförs.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
>Om <guilabel
>Algoritm</guilabel
> är inställd till Linjär eller Iterativ är följande ytterligare komponenter tillgängliga:</para>
        <itemizedlist>
          <listitem>
          <para
><guilabel
>Tolerans</guilabel
>: Toleransen i procent används för att bestämma när den automatiska fokuseringsprocessen slutar. Under den automatiska fokuseringsprocessen registreras HFR-värden, och när fokuseringsenheten är nära en optimal position börjar den mäta HFR jämfört med den minsta registrerade HFR under sessionen och stoppar så snart ett uppmätt HFR-värde är inom den procentuella skillnad från minsta registrerade HFR. Minska värdet för att minska fokuseringspunktens optimala lösningsradie. Öka för att expandera lösningsradien. </para>

          <warning>
          <para
>Att ställa in ett för lågt toleransvärde kan orsaka en repetitiv upprepning och skulle troligtvis orsaka en misslyckad automatisk fokuseringsprocess. </para>
          </warning>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-mechanics">
    <title
>Fokuseringsmekanik</title>

    <screenshot>
      <screeninfo
>Fokuseringsmekanik </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_mechanics.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringsmekanik</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Det här är fokuseringens ruta med mekanikparametrar.</para>

  <itemizedlist>
  <listitem>
    <para
><guilabel
>Gångsätt</guilabel
>: Det anger hur den automatiska fokuseringen kommer att "gå" inåt genom sitt svep för att producera V-kurvan som används för att beräkna fokuseringslösningen.</para>

    <para
>Följande är tillgängliga: <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Klassisk</emphasis
>: Det är den rekommenderade inställningen. Svepet inåt följer en serie steg av samma storlek (<guilabel
>Initial stegstorlek</guilabel
>). Algoritmen inkluderar logik för att avgöra när man ska stoppa som gör det exakta antalet steg oförutsägbart men det kommer att vara cirka 2 * (<guilabel
>Multipel för utåtsteg</guilabel
>) + 1.</para>
        <para
>Gångsättet är tolerant mot kurvanpassningsfel i det sista steget där det kommer att ta ytterligare ett steg och försöka lösa igen. Det är också något tolerant mot att inte startas nära fokus så är ett bra val för den första automatiska fokuseringskörningen.</para>
        <para
>På grund av gångsättets "tolerans" för mindre än perfekt inställning är det ett konservativt alternativ att välja, men det sker på bekostnad av extra steg och därför extra tid i den automatiska fokuseringsprocessen.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Fasta steg</emphasis
>: Det här experimentella alternativet är tillgängligt med engångslinjär <guilabel
>Algoritm</guilabel
>. Det är ganska likt Klassisk men <guilabel
>Fasta steg</guilabel
> används för att kontrollera det totala antalet steg som tas.</para>
        <para
>Algoritmen är mer förutsägbar än Klassisk genom att den tar ett bestämt antal steg (så den är snabbare), men är mindre tolerant mot problem med kurvanpassning av den sista datapunkten och måste startas nära fokus.</para>
        <para
>När den är markerad ersätts <guilabel
>Multipel för utåtsteg</guilabel
> med <guilabel
>Fasta steg:</guilabel
> <screenshot>
          <screeninfo
>Fokuseringsmekanik </screeninfo>
          <mediaobject
> <imageobject
> <imagedata fileref="focus_mechanics1.png" format="PNG" width="50%"/>
            </imageobject
><textobject
><phrase
>Fokuseringsmekanik</phrase
></textobject
></mediaobject>
        </screenshot>
        </para>
      </listitem>
      <listitem>
        <para
><emphasis role="bold"
>KFZ-gång</emphasis
>: Det här experimentella alternativet är tillgängligt med engångslinjär <guilabel
>Algoritm</guilabel
>. Det är en variant av Fasta steg så kommentarerna om dess gångsätt är tillämpliga här också.</para>

        <para
>Skillnaden mellan KFZ-gång och Fasta steg är att nära mitten av svepet, som ska vara runt den kritiska fokuseringszonen (KFZ), tar algoritmen steg med hälften av den specificerade storleken.</para>
      </listitem>
    </itemizedlist>
    </para>
  </listitem>

  <listitem>
    <para
><guilabel
>Fokuseringsenhetens dämpning</guilabel
>: Antalet sekunder som ska väntas efter att fokuseringsenheten har flyttats, innan nästa inspelning påbörjas. Syftet är att stoppa eventuella vibrationer i optiken från att påverka nästa bildruta.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Initial stegstorlek</guilabel
>: Det ställer in stegstorleken som ska användas av olika fokuseringsalgoritmer. För absoluta och relativa fokuseringsenheter är det antalet tick. För tidsbaserade fokuseringsenheter är det antal millisekunder.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Multipel för utåtsteg</guilabel
>: Används av linjära och engångslinjära fokuseringsalgoritmer med klassiskt gångsätt. Parametern anger det initiala antalet utåtgående steg som fokuseringsenheten tar i början av en automatisk fokuseringskörning.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Antal steg</guilabel
>: Används av den engångslinjära algoritmen med Fasta steg och KFZ-gång. Parametern specificerar det totala antalet steg som fokuseringsenheten tar för att skapa V-kurvan i en automatisk fokuseringskörning.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Maximal rörelse</guilabel
>: Sätter gränser för rörelsens storlek från den aktuella fokuseringspositionen som är tillåten av algoritmerna för automatisk fokusering. Syftet är att skydda fokuseringsenheten från att röra sig för långt och potentiellt skada sig själv. Å andra sidan måste värdet vara tillräckligt stort för att tillåta tillräcklig fokuseringsrörelse för att göra det möjligt att slutföra de automatiska fokuseringskörningarna.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Maximal stegstorlek</guilabel
>: Används av den iterativa algoritmen för att begränsa den maximala stegstorleken som kan användas.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Drivrutinens spel</guilabel
>: Se avsnittet om <link linkend="focus-backlash"
>Spel</link
>.</para>

    <para
>Det finns två metoder som kan användas:</para>

    <itemizedlist>
      <listitem>
        <para
>Ställ in <guilabel
>Drivrutinens spel</guilabel
> till 0 för att stänga av det och hantera spel på annat ställe.</para>
      </listitem>

      <listitem>
        <para
>Ställ in <guilabel
>Drivrutinens spel</guilabel
> &gt; 0 för att använda drivrutinens spel för att hantera spel i drivrutinen. Observera att fältet endast är redigerbart om drivrutinen stöder spel.</para>
        <para
>Det är samma datafält som visas i INDI-kontrollpanelen för fokuseringsenheten. Det kan ställas in på båda ställena.</para>
      </listitem>
    </itemizedlist>
  </listitem>

  <listitem>
    <para
><guilabel
>AF-översvep</guilabel
>: Se avsnittet om <link linkend="focus-backlash"
>Spel</link
>.</para>

    <para
>Det finns två metoder som kan användas:</para>
    <itemizedlist>
      <listitem>
        <para
>Ställ in <guilabel
>AF-översvep</guilabel
> till 0 för att stänga av det och hantera spel på annat ställe.</para>
      </listitem>

      <listitem>
        <para
>Ställ in <guilabel
>AF-översvep</guilabel
> &gt; 0 för att låta fokuseringsmodulen hantera spel.</para>
      </listitem>
    </itemizedlist>
  </listitem>

  <listitem>
    <para
><guilabel
>Tidsgräns för tagning</guilabel
>: Tiden i sekunder för att vänta på att en tagen bild tas emot innan en överskriden tidsgräns deklareras. Det ska bara hända om det finns problem med kameran under fokuseringsprocessen, så ställ in det till ett tillräckligt högt värde för att det inte ska inträffa under normal drift.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Tidsgräns för rörelse</guilabel
>: Tiden i sekunder för att vänta på att fokuseringsenheten går till begärd position innan en överskriden tidsgräns deklareras. Det ska bara hända om det finns problem med fokuseringsenheten under fokuseringsprocessen, så ställ in det till ett tillräckligt högt värde för att det inte ska inträffa under normal drift.</para>
  </listitem>
  </itemizedlist>
  </sect3>

  <sect3 id="focus-cfz">
    <title
>Fokuseringens kritiska fokuseringszon (KFZ)</title>

    <screenshot>
      <screeninfo
>Fokuseringens KFZ </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_cfz_classic.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringens KFZ</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Det här är fokuseringens ruta med KFZ-parametrar.</para>

  <itemizedlist>
  <listitem>
    <para
><guilabel
>Algorithm</guilabel
>: Specificerar algoritmen för Kritisk fokuseringszon (KFZ). Syftet med den är att beräkna KFZ för utrustningen som är ansluten till optiken. Det är inte nödvändigt att använda funktionen för att kunna fokusera, men den ger användbar information om den är korrekt inställd.</para>

    <para
>Det krävs viss kunskap för att ställa in den korrekt. Det finns mycket information tillgänglig på internet.</para>

    <para
>Tanken med fliken KFZ är att den börjar med data om optiken som används från fliken Fokusering och använder den för att beräkna KFZ. Användaren kan justera parametrar för att undersöka olika scenarier och se hur de påverkar KFZ. Genom att klicka på knappen <guilabel
>Återställ till optik</guilabel
> återställs alla justerade parametrar till optikens värden.</para>

    <para
>Om rutan <guilabel
>Visa</guilabel
> är markerad så ritas KFZ på V-kurvan efter att den automatiska fokuseringen har slutförts. <screenshot>
      <screeninfo
>Fokuseringsmekanik </screeninfo>
      <mediaobject
> <imageobject
> <imagedata fileref="focus_cfz_moustache.png" format="PNG" width="75%"/>
        </imageobject
><textobject
><phrase
>Fokuseringsmekanik</phrase
></textobject
></mediaobject>
    </screenshot
></para>
    <para
>Det är nödvändigt att ange parametern <guilabel
>Stegstorlek</guilabel
> som specificerar hur långt ett tick flyttar fokuseringsenheten i mikrometer.</para>

    <para
>Följande algoritmer är tillgängliga: <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Klassisk</emphasis
>: Det är den rekommenderade inställningen. Ekvationen som används visas uppe till höger i panelen och är den ekvation som oftast ses på Internet. Ekvationen kommer från linjär optikbehandling med diffraktionsringar och har kända begränsningar. Av den anledningen inkluderar den en "toleransfaktor" som kan justeras av användaren. I den ofta citerade artikeln "In Perfect Focus" av Don Goldman och Barry Megdal i Sky &amp; Telescope 2010, föreslår de exempelvis inställningen t = 1/3.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Vågfront</emphasis
>: Ekvationen som används visas längst upp till höger i panelen. Ekvationen kommer från en vågfrontsmetod för KFZ. Återigen har den begränsningar och återigen, av den anledningen inkluderar den en "toleransfaktor" som kan justeras av användaren. <screenshot>
          <screeninfo
>Fokuseringsmekanik </screeninfo>
          <mediaobject
> <imageobject
> <imagedata fileref="focus_cfz_wavefront.png" format="PNG" width="50%"/>
            </imageobject
><textobject
><phrase
>Fokuseringsmekanik</phrase
></textobject
></mediaobject>
        </screenshot>
        </para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Gold</emphasis
>: Metoden är baserad på arbete utfört av Gold Astro och presenteras <ulink url="https://www.goldastro.com/goldfocus/ncfz.php"
>här</ulink
>.</para>
        <screenshot>
          <screeninfo
>Fokuseringsmekanik </screeninfo>
          <mediaobject
> <imageobject
> <imagedata fileref="focus_cfz_gold.png" format="PNG" width="50%"/>
            </imageobject
><textobject
><phrase
>Fokuseringsmekanik</phrase
></textobject
></mediaobject>
        </screenshot>
      </listitem>
    </itemizedlist>
    </para>
  </listitem>

  <listitem>
    <para
><guilabel
>Tolerans</guilabel
>: Den används av algoritmerna Klassisk och Vågfront och är en skalningsfaktor mellan 0 och 1.</para>
    <para
>För den klassiska algoritmen, föreslår Goldman och Megdal 1/3.</para>
    <para
>För vågfrontsalgoritmen har vissa föreslagit 1/3 eller till och med 1/10.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Tolerans (τ)</guilabel
>: Den används av Gold-algoritmen  och är en fokuseringstolerans som procentandel av totalt seende. Gold-webbplatsen föreslår 3-5 % för en bra fokuseringsenhet eller 1-2 % för en fokuseringsenhet av högsta kvalitet. Se <ulink url="https://www.goldastro.com/goldfocus/ncfz.php"
>Gold Astro-webbplatsen</ulink
> för mer information.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Visa</guilabel
>: Markera rutan för att visa beräknad KFZ på V-kurvan efter en lyckad automatisk fokuseringskörning. Den visas som en gul mustasch.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Återställ till optik</guilabel
>: Tryck på knappen för att återställa alla parametrar till standardvärden från det för närvarande anslutna optiken.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Våglängd (λ)</guilabel
>: Ljusvåglängden som ska användas. Den är förinställd från filtret som för närvarande används. Kom ihåg att ställa in den i <link linkend="focus-filter-settings"
>Filterinställningar</link
> för dina filter.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Bländare (A)</guilabel
>: Den är teleskopets öppning i mm. Den är förinställd från optiken som för närvarande är ansluten.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Brännvidd (f)</guilabel
>: Det är teleskopets brännvidd. Den är förinställd från optiken som för närvarande är ansluten.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>FWHM (θ)</guilabel
>: Det används av Gold-algoritmen och är det totala seendet. Det är det kombinerade bidraget från teleskopets diffraktionsgräns och det astronomiska seendet. <ulink url="https://www.goldastro.com/goldfocus/ncfz.php"
>Gold Astro-webbplatsen</ulink
> beskriver hur du kan uppskatta summan när du väl har värden för de individuella bidragen.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>KFZ</guilabel
>: Det är beräknad KFZ i mikrometer och i tick.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Stegstorlek</guilabel
>: Den måste matas in av användaren (eftersom den inte kan beräknas av Ekos). Den anger hur långt ett tick flyttar fokalplanet i mikrometer. </para>
    <para
>För en refraktor är det hur långt dragröret rör sig när fokuseringsenheten flyttas med ett tick. Du kanske kan hämta värdet från specifikationen för fokuseringsenheten (hur många tick för ett helt varv av fokuseringsenheten) och gängstigningen på teleskopets dragrör tillsammans med eventuell utväxling.</para>
    <para
>Alternativt kan du mäta hur långt dragröret rör sig från ände till ände (var noga med att inte tvinga dragröret) med ett skjutmått eller en linjal. Genom att subtrahera positionen längst "in" (in tick) från positionen längst "ut" (in tick) får du fram hur många tick som flyttar dragröret det avståndet du mätte upp. Från det kan du beräkna avståndet i mikrometer ett enstaka tick flyttar dragröret.</para>
    <para
>Andra typer av teleskop har andra sätt att justera fokalplanet, till exempel genom att flytta de primära eller sekundära speglarna. Du måste antingen få stegstorleken från utrustningens dokumentation eller ta reda på hur du mäter den på ett sätt som överensstämmer med det som beskrivs ovan.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>KFZ kamera</guilabel
>: Bildpunktsstorleken för kameran som är ansluten via optiken kan ha en begränsande effekt på KFZ. Så en ekvivalent KFZ för den anslutna kameran beräknas med antagande av en två gångers Nyquist-gräns.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Slutlig KFZ</guilabel
>: Det är den största av KFZ beräknad med den valda algoritmen för den angivna parametern och <guilabel
>KFZ kameran</guilabel
>. Det är värdet som visas och är i själva verket utrustningens KFZ.</para>
  </listitem>

  </itemizedlist>
  </sect3>


  <sect3 id="focus-advisor">
    <title
>Fokuseringsrådgivare</title>

    <screenshot>
      <screeninfo
>Fokuseringsrådgivare </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_advisor.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringsrådgivare</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Det här är fokuseringsrådgivarens ruta. Det är en experimentell funktion för att hjälpa till med hantering av fokuseringsparametrar.</para>

    <para
>Syftet med fokuseringsrådgivaren är att hjälpa personer som kämpar med att använda fokuseringsmodulen i Ekos. Fokuseringsmodulen är funktionsrik och innehåller en hel del parametrar som måste ställas in självständigt för att uppnå bra resultat. Fokuseringsrådgivaren är utformad för att hjälpa till med grundläggande parameterinställning för att uppnå fokus. Den är inte utformad för att uppnå bästa möjliga fokus för utrustningen. Du måste experimentera med inställningarna för att uppnå det. Men fokuseringsrådgivaren ger en grund att börja experimentera med.</para>

    <para
>Så fokuseringsrådgivaren är avsedd för mindre erfarna användare.</para>
    <para
>Om fokuseringsrådgivaren inte verkar ge bra resultat för din installation, varför inte starta en diskussion på forumet så att den kan förbättras för att ge bättre resultat i framtiden. På så sätt kommer den att förbättras med tiden för att bli mer användbar.</para>
    <para
>När du klickar på fokuseringsrådgivarens ruta utarbetar den en serie parameterrekommendationer baserat på optiken du använder för fokusering.</para>
    <para
>Överst i rutan visas information om den anslutna optiken. Sedan visas sex rader relaterade till olika uppsättningar av parametrar som används inom fokusering. Vid varje rad finns en kryssruta för att uppdatera de tillhörande fokuseringsfälten med fokuseringsrådgivarens rekommendationer.</para>
    <para
>Fokuseringsparametrarna är uppdelade i följande grupperingar:</para>

    <itemizedlist>
    <listitem>
    <para
><guilabel
>Stegstorlek</guilabel
>: Det är föreslagen storleken på fokuseringssteget som ska användas. Det är en kritisk parameter. Den är förinställd från rutan Kritisk fokuseringszon (KFZ). Så det första du ska göra är att ställa in den panelen och få ett rimligt värde för KFZ. Alternativt, om du vet ett rimligt värde för din utrustning från andra källor kan du bara ange det.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Multipel för utåtsteg</guilabel
>: Det är den föreslagna multipeln för utåtsteg att använda.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Parametrar för kamera och filterhjul</guilabel
>: Det ställer in parametrarna för sektionen <link linkend="focus-ccd-filter-wheel"
>CCD och filterhjul</link
> på fokuseringsskärmen. Genom att hålla musen över texten kan du se vilka värden fokuseringsrådgivaren rekommenderar i verktygstipset.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Inställningsflikens parametrar</guilabel
>: Det ställer in parametrarna för rutan <link linkend="focus-settings"
>Fokuseringsinställningar</link
> på fokuseringsskärmen. Genom att hålla musen över texten kan du se vilka värden fokuseringsrådgivaren rekommenderar i verktygstipset.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Processflikens parametrar</guilabel
>: Det ställer in parametrarna för rutan <link linkend="focus-process"
>Fokuseringsprocess</link
> på fokuseringsskärmen. Genom att hålla musen över texten kan du se vilka värden fokuseringsrådgivaren rekommenderar i verktygstipset.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Mekanikflikens parametrar</guilabel
>: Det ställer in parametrarna för rutan <link linkend="focus-mechanics"
>Fokuseringsmekanik</link
> på fokuseringsskärmen. Genom att hålla musen över texten kan du se vilka värden fokuseringsrådgivaren rekommenderar i verktygstipset.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Hjälp</guilabel
>: Tryck på knappen för att få hjälp med att använda fokuseringsrådgivaren.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Uppdatera parametrar</guilabel
>: Tryck på knappen för att acceptera fokuseringsrådgivarens rekommendationerna och uppdatera fokuseringsparametrarna där motsvarande kryssruta <guilabel
>Uppdatera</guilabel
> är markerad.</para>
    </listitem>

  </itemizedlist>
  </sect3>

  <sect3 id="focus-filter-settings">
      <title
>Filterinställningar</title>

      <screenshot>
          <screeninfo
>Filterkö </screeninfo>
          <mediaobject>
              <imageobject>
                  <imagedata fileref="filter_settings.png" format="PNG" width="50%"/>
              </imageobject>
              <textobject>
                  <phrase
>Filterkö</phrase>
              </textobject>
          </mediaobject>
      </screenshot>

      <para
>Klicka på filterikonen <inlinemediaobject
><imageobject
><imagedata fileref="view-filter.png" format="PNG"/></imageobject
> </inlinemediaobject
> antingen från Tagning eller Fokusering för att öppna dialogrutan för filterinställningar. Denna ruta låter användaren ställa in data som är associerade med varje filter och används för olika funktioner i systemet.</para>

      <para
>Fokusering med olika filter kan göras på ett av tre sätt i Ekos.</para>

      <itemizedlist>
        <listitem>
          <para
><emphasis role="bold"
>Direkt automatisk fokusering</emphasis
>: När Tagning ändras till filtret är det möjligt att automatiskt fokusera om filtret. Exponeringen som ska användas för det valda filtret tas från fältet <guilabel
>Exponering</guilabel
>. De gör att till exempel smalbandsfilter kan använda en längre exponering än bredbandsfilter under automatisk fokusering.</para>

          <para
>Markera <guilabel
>Automatisk fokusering</guilabel
> för att använda filtret på detta sätt.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Automatisk fokusering med låst filter</emphasis
>: Det är möjligt att ange ett låst filter som ska användas när det krävs för att fokusera filtret. Till exempel, om Ha-filtret används och en automatisk fokuseringskörning krävs, är det möjligt att köra automatisk fokusering med Lum-filtret och sedan, när det är klart, justera fokuseringspositionen med ett positionsvärde som motsvarar den förutbestämda fokuseringsskillnaden mellan Lum- och Ha-filtret (100 tick i exemplet). Det är användbart när det till exempel är svårt att fokusera vissa filter direkt utan alltför långa exponeringstider. Observera att metoden med låst filter också kan användas i <link linkend="ekos-align"
>Inriktningsmodulen</link
> när den utför en inriktning för astrometri.</para>

          <para
>För att använda ett filter på detta sätt, markera <guilabel
>Automatisk fokusering</guilabel
>, ange <guilabel
>Låst filter</guilabel
> som ska användas och se till att positioner för filtret och <guilabel
>Låst filter</guilabel
> är inställda.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Använd positioner</emphasis
>: Det är möjligt att använda filterpositioner för att justera fokus när du byter mellan filter, utan att köra automatisk fokusering. Det kräver en del inställningsarbete i förväg, men har fördelen av att minska antalet automatiska fokuseringskörningar och därför minska tiden för automatisk fokusering.</para>

          <para
>För att kunna använda funktionen är det nödvändigt att räkna ut den relativa fokuseringspositionen mellan alla filter som du vill använda funktionen för. Till exempel, om Lum och Röd har samma fokuseringsposition (de är parfokala) men Grön fokuserar 300 tick längre ut än Lum (eller Röd), ställ in Positioner för Lum, Röd och Grön som 0, 0, 300 som visas ovan. Om en sekvens skapas för att ta 10 delbilder av Lum, sedan 10 med Röd, sedan 10 med Grön, då körs en automatisk fokusering för Lum och de 10 tagna delbilderna i början, eftersom Lum har <guilabel
>Automatisk fokusering</guilabel
> markerat. Tagningen byter sedan filter till Röd. Eftersom Röd har <guilabel
>Automatisk fokusering</guilabel
> avmarkerad, sker ingen automatisk fokusering och Ekos tittar på positionerna mellan Röd och Lum. I det här fallet 0 - 0 = 0. Så fokuseringen flyttas inte och tagning av 10 delbilder med Röd utförs. Därefter byter tagningen från Röd till Grön. Återigen, har Grön <guilabel
>Automatisk fokusering</guilabel
> avmarkerad, så ingen automatisk fokusering sker och Ekos tittar på positionerna mellan Grön och Röd. I detta fall 300 - 0 = 300. Så fokuseringspositionen justeras med +300 (flyttar ut fokuseringsenheten med 300 tick). Tagning av de 10 delbilderna med Grön utförs sedan.</para>

          <para
>För att använda ett filter på detta sätt, avmarkera <guilabel
>Automatisk fokusering</guilabel
> och se till att positionerna för filtret och alla andra filter som kan föregå filtret i en sekvens är inställda.</para>

          <para
>Positionerna kan antingen räknas ut genom att köra automatisk fokusering med olika filter och manuellt beräkna de relativa positionerna och mata in dem i tabellen eller genom att använda verktyget <link linkend="build-filter-offsets"
>Bygg positioner</link
>.</para>
        </listitem>
      </itemizedlist>

      <para
>Anpassa inställningar för varje filter i tabellen: </para>
      <orderedlist>
          <listitem>
              <para
><guilabel
>Filter</guilabel
>: Filternamn.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Exponering</guilabel
>: Ställ in exponeringstiden (i sekunder) som ska användas när fokusering med det här filtret används. Normalt är den inställd till 1 sekund.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Position</guilabel
>: Ange relativ position. Ekos utför en ändring av fokuseringsposition om det finns en skillnad mellan det aktuella filtrets och målfiltrets position. Givet värdena i exempelbilden, ska Ekos exempelvis ge ett kommando till fokuseringsenheten att fokusera inåt med +300 tick, om det aktuella filtret är inställt till <emphasis
>Röd</emphasis
> och nästa filter är <emphasis
>Grön</emphasis
>. Relativa positiva fokuseringspositioner anger fokusera utåt, medan negativa värden anger fokusera inåt.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Automatisk fokusering</guilabel
>: Markera alternativet för att utföra den automatiska fokuseringsprocessen så fort filtret byts till det här filtret.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Låst filter</guilabel
>: Ställ in vilket filter som ska ställas in och <emphasis
>låsas</emphasis
> när du utför automatisk fokusering för filtret. "--" indikerar inget låst filter. Det är inte tillåtet att nästla filter mer än en nivå, dvs. rött kan inte låsas till blått som i sin tur är låst till grönt. Ett filter kan inte låsas till sig självt.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Senaste AF-lösning</guilabel
>: Den senaste lyckade automatiska fokuseringspositionen. Under normal drift kommer Ekos automatiskt att uppdatera fältet.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Senaste AF-temperatur (°C)</guilabel
>: Temperaturen för <guilabel
>Senaste AF-lösning</guilabel
>. Under normal drift kommer Ekos automatiskt att uppdatera fältet.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Senaste AF-elevation (°Elev)</guilabel
>: Elevationen för <guilabel
>Senaste AF-lösning</guilabel
>. Under normal drift kommer Ekos automatiskt att uppdatera fältet.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Tick / °C</guilabel
>: Antal tick för att flytta fokuseringspunkten när temperaturen ändras med 1°C. Till exempel, om fokus flyttas ut med 5 tick när temperaturen ökar med 1°C, ställ in fältet till 5. Om fokus flyttas in med 5 tick när temperaturen ökar med 1°C, ställ in fältet till -5.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Tick / °elevation</guilabel
>: Antalet tick för att flytta fokuseringspunkten när höjden ändras med 1° i elevation. Till exempel, om fokus flyttas ut med 0,5 tick när höjden ökar med 1° i elevation, ställ in fältet till 0,5. Om fokus flyttas in med 0,5 tick när elevationen ökar med 1°, ställ in fältet till -0,5.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Våglängd</guilabel
>: Centrum av filtrets passband i nanometer. Det används i vissa beräkningar av kritisk fokuseringszon (KFZ) i fokuseringen.</para>
          </listitem>
      </orderedlist>

      <para
>Förutom datatabellen finns följande komponenter tillgängliga längst ner i fönstret:</para>
      <itemizedlist>
          <listitem>
          <para
><guilabel
>Bygg positioner</guilabel
>: Tryck på knappen <guibutton
>Bygg positioner</guibutton
> för att visa rutan <link linkend="build-filter-offsets"
>Bygg positioner</link
>.</para>
          </listitem>
          <listitem>
          <para
><guilabel
>Ta plana bilder med samma fokus som ljusa bilder</guilabel
>: När markerat, tas plana bilder med den senaste fokuseringspositionen i <guilabel
>Senaste AF-lösning</guilabel
>.</para>
          </listitem>
      </itemizedlist>

      <para
>Låt oss ta ett exempel. Om vi har en tagningssekvens som börjar med Lum -> Röd -> Grön -> Blå -> Sii -> Ha -> Oiii med inställningen i fönstret Filterinställningar:</para>
      <itemizedlist>
          <listitem>
              <para
>Lum:  Lum-filtret är inställt för automatisk fokusering från början så att en automatisk fokuseringskörning utförs, och sedan utförs Lum-sekvensen.</para>
          </listitem>
          <listitem>
              <para
>Röd: Det röda filtret är inte inställt för automatisk fokusering och har positionen 0.Så när den röda sekvensen startar, görs ingen automatisk fokuseringskörning och den relativa positionen mellan Lum och Röd är 0, så fokuseringen flyttas inte.</para>
          </listitem>
          <listitem>
              <para
>Grön: Det gröna filtret är inte inställt för automatisk fokusering och har positionen 300. Så när den gröna sekvensen startar, görs ingen automatisk fokuseringskörning och den relativa positionen mellan Röd och Grön är 300 - 0 = +300, så fokuseringen flyttas ut med 300.</para>
          </listitem>
          <listitem>
              <para
>Blå: Det blå filtret är inte inställt för automatisk fokusering och har positionen 0. Så när den blå sekvensen startar körs ingen automatisk fokusering och relativ position mellan grön och blå är 0 - 300 = -300, så fokuseringen flyttar in med 300.</para>
          </listitem>
          <listitem>
              <para
>Sii: Sii-filtret är inställt för automatisk fokusering, är låst till Lum och har position 0. Så när Sii-sekvensen startar körs en automatisk fokusering för Lum och den relativa positionen mellan Lum och Sii är 0 - 0 = 0, så fokuseringsenheten går till lösningen för automatisk fokusering av Lum.</para>
          </listitem>
          <listitem>
              <para
>Ha: Ha-filtret är inställt för automatisk fokusering, är låst till Lum och har position 100. Så när Ha-sekvensen startar körs en automatisk fokusering för Lum och den relativa positionen mellan Lum och Ha är 100 - 0 = +100 , så fokuseringsenheten går till lösningen för automatisk fokusering av Lum, och går sedan ut med 100.</para>
          </listitem>
          <listitem>
              <para
>Oiii: Oiii-filtret är inställt för automatisk fokusering, är låst till Lum och har position -100. Så när Oiii-sekvensen startar körs en automatisk fokusering för Lum och den relativa positionen mellan Lum och Oiii är -100 - 0 = -100, så fokuseringsenheten går till lösningen för automatisk fokusering av Lum, och sedan in med 100.</para>
          </listitem>
      </itemizedlist>
  </sect3>


  <sect3 id="build-filter-offsets">
      <title
>Bygg positioner</title>

      <screenshot>
          <screeninfo
>Bygg filterpositioner </screeninfo>
          <mediaobject>
              <imageobject>
                  <imagedata fileref="build_filter_offsets.png" format="PNG" width="33%"/>
              </imageobject>
              <textobject>
                  <phrase
>Bygg filterpositioner</phrase>
              </textobject>
          </mediaobject>
      </screenshot>

      <para
>Klicka på knappen <guilabel
>Bygg positioner</guilabel
> i rutan <link linkend="focus-filter-settings"
>Filterinställningar</link
> för att starta verktyget Bygg positioner. Filterpositioner kan antingen matas in manuellt i tabellen i Filterinställningar eller så kan verktyget användas för att skapa dem. </para>
      <para>
          <emphasis
>Observera: Verktyget bör inte köras under en bildbehandlingssession eftersom det tar exklusiv kontroll över fokuseringsprocessen medan det körs.</emphasis>
      </para>
      <para
>Till att börja med anpassas inställningarna för varje filter i tabellen i rutan Filterinställningar och startar sedan Bygg filterpositioner. Fönstret börjar med en datatabell som har följande kolumner. </para>
      <itemizedlist>
          <listitem>
              <para
><guilabel
>Filter</guilabel
>: Filternamn. Det första filtret har "*" efter filternamnet, "Lum *" i exemplet ovan. Det innebär att Lum är referensfiltret som används för att mäta position för andra filter. Dubbelklicka på ett annat filternamn för att göra det filtret till referensfilter. </para>
          </listitem>
          <listitem>
              <para
><guilabel
>Position</guilabel
>: Nuvarande position. </para>
          </listitem>
          <listitem>
              <para
><guilabel
>Låst filter</guilabel
>: Nuvarande låsta filter. </para>
          </listitem>
          <listitem>
              <para
><guilabel
>Antal fokuseringskörningar</guilabel
>: Antalet fokuseringskörningar för filtret. Standardinställningen är 5. För att utesluta ett filter från processen ställ in fältet till noll. Observera att referensfiltret måste ha minst en körning. </para>
          </listitem>
      </itemizedlist>
      <para
>När <guilabel
>Antal fokuseringskörningar</guilabel
> har ställts in, tryck på knappen <guilabel
>Kör</guilabel
> för att starta den automatiserade processen. </para>
      <para
>Tryck på knappen <guilabel
>Stopp</guilabel
> för att stoppa processen när som helst. </para>
      <para
>Ändra kryssrutan <guilabel
>Adaptiv fokusering</guilabel
> när som helst under bearbetningen för att byta mellan uppmätta automatiska fokuseringsresultat och resultat efter att adaptiva fokuseringsjusteringar har utförts. Se avsnittet <link linkend="focus-adaptive"
>Adaptiv fokusering</link
> för mer information om vad adaptiv fokusering är. </para>
      <para
>Låt oss ta ett exempel där vi har sju filter: Lum, Röd, Grön, Blå, Sii, Ha och Oiii. Den åttonde öppningen i filterhjulet är markerad som Tom. Processen har genomfört fem körningar för alla filter, 0 för Tom (exkluderar effektivt Tom från processen). I det här fallet har åtta extra kolumner skapats i tabellen. </para>
      <screenshot>
          <screeninfo
>Bygg filterpositioner </screeninfo>
          <mediaobject>
              <imageobject>
                  <imagedata fileref="build_filter_offsets2.png" format="PNG" width="50%"/>
              </imageobject>
              <textobject>
                  <phrase
>Bygg filterpositioner</phrase>
              </textobject>
          </mediaobject>
      </screenshot>
      <itemizedlist>
          <listitem>
              <para
>AF-körning 1-5: Maximalt <guilabel
>Antal fokuseringskörningar</guilabel
> som valts av användaren är 5, så fem kolumner har skapats, en för varje AF-körnings lösning. </para>
          </listitem>
          <listitem>
              <para
>Medelvärde: AF-lösningarnas medelvärde (väntevärde). </para>
          </listitem>
          <listitem>
              <para
>Ny position: Position som beräknas från Lum-filtret. T.ex. för Sii 36731 - 36743 = -12 </para>
          </listitem>
          <listitem>
              <para
>Spara: Markera för att spara positionen för filtret när knappen <guilabel
>Spara</guilabel
> trycks ned. Det är normalt att rutorna är markerade men avmarkering gör att ett värde kan ignoreras samtidigt som andra filter sparas. </para>
          </listitem>
      </itemizedlist>
      <para
>I detta skede rekommenderas det att granska AF-körningarna för att se att alla är bra. Låt oss till exempel anta att vi är missnöjda med den andra AF-körningen på Oiii. Om så är fallet kan vi antingen:</para>
          <itemizedlist>
            <listitem>
              <para
>Redigera AF-körning 2 och ställa in värdet till vilket värde vi vill.</para>
            </listitem>
            <listitem>
              <para
>Redigera kolumnen Ny position och ställa in värdet direkt (förbigå logiken för att beräkna det).</para>
            </listitem>
            <listitem>
              <para
>Bortse från AF-körning 2 genom att ställa in värdet till 0 (se nedan). I så fall beräknas medelvärde och nya positioner för Oiii baserat på AF-körningar 1, 3, 4, 5. I exemplet nedan beräknas och visas de nya medelvärdena och positionerna.</para>
            </listitem>
          </itemizedlist>
      <screenshot>
          <screeninfo
>Bygg filterpositioner </screeninfo>
          <mediaobject>
              <imageobject>
                  <imagedata fileref="build_filter_offsets3.png" format="PNG" width="50%"/>
              </imageobject>
              <textobject>
                  <phrase
>Bygg filterpositioner</phrase>
              </textobject>
          </mediaobject>
      </screenshot>
      <para
>Efter att ha granskat resultaten, kan användaren trycka på: </para>
      <itemizedlist>
          <listitem>
              <para
>Spara: Alla filter där kryssrutan <guilabel
>Spara</guilabel
> är markerad får värdet för Ny position sparat i Filterpositioner för användning under nästa tagningssession. </para>
          </listitem>
          <listitem>
              <para
>Stäng: Verktyget Bygg filterpositioner stängs utan att spara någon data. </para>
          </listitem>
      </itemizedlist>
      <para
>Om rutan <guilabel
>Adaptiv fokusering</guilabel
> är markerad uppdateras AF-körningarna för adaptiv fokusering. Se avsnittet <link linkend="focus-adaptive"
>Adaptiv fokusering</link
> för mer information om teorin bakom adaptiv fokusering. Den första AF-körningen (i detta exempel AF-körning 1 för Lum) är grunden för anpassningarna. Så temperaturen och höjden för AF-körning 1 för Lum används som grund för alla andra AF-körningar och data anpassas tillbaka till vad AF-lösningen skulle ha varit om den hade körts med temperatur och elevation för AF -körning 1 och Lum. </para>
      <para
>I exemplet är adaptiv fokusering bara inställt i Filterinställningar för elevationsjustering av det röda filtret. Så adaptiva AF-körningsvärden är samma som icke adaptiva värden för alla andra filter. </para>

      <screenshot>
        <screeninfo
>Bygg filterpositioner </screeninfo>
        <mediaobject>
            <imageobject>
                <imagedata fileref="build_filter_offsets4.png" format="PNG" width="50%"/>
            </imageobject>
            <textobject>
                <phrase
>Bygg filterpositioner</phrase>
            </textobject>
        </mediaobject>
      </screenshot>
      <para
>Om musen hålls över en AF-körning visas ett verktygstips med förklaring av Adaptiv fokusering. I exemplet hålls musen över AF-körning 1 för Röd. Den första raden i förklaringen visar det uppmätta automatiska fokuseringsresultatet för körningen (36683), anpassningar för temperatur (0,0 °C) och höjd (0,2 graders elevation. Den andra raden i förklaringen visar anpassningarna: 206 totalt, 0 temperatur, 205,9 elevation. Den tredje raden visar den anpassade positionen för 36889. </para>
      <para
>Användaren kan byta mellan adaptiv fokusering eller obehandlade värden. Vilka värden som än visas i rutnätet blir värdena som sparas. </para>
      <para
>Här är några tips för att använda verktyget: <itemizedlist>
            <listitem
><para
>Börja med att se till att det område på himlen du kör Bygg filterpositioner på fungerar bra för automatisk fokusering. Att sikta högt på himlen resulterar i att man tar genom mindre atmosfär med mindre, tätare stjärnor. Se till att det finns tillräckligt med stjärnor i bildrutan. Undvik meridianvändningar under processen. Följ samma område under processen så att varje körning använder mer eller mindre samma uppsättning stjärnor. Även om möjligheten att använda adaptiv fokusering är tillgänglig för att justera för miljöförändringar som temperatur och elevation, försök att minimera förändringarna under tiden verktyget används genom att välja ett lämpligt område på himlen.</para
></listitem>

            <listitem
><para
>Se till att din utrustning är i termisk jämvikt innan du startar. Beräkna ungefär hur lång tid verktyget kommer att ta, vilket är det totala antalet AF-körningar * tid för en enda AF-körning. Försök att se till att förhållandena förblir så konsekventa som möjligt under denna tid, t.ex. att det finns tillräckligt med tid innan gryningen, att månen inte påverka fokuseringen av vissa bilder mer än andra, att målet kommer inte att hamna under horisonten under processen, etc.</para
></listitem>

            <listitem
><para
>Ställ in verktyget för Antal fokuseringskörningar (5 är en bra början), referensfilter (t.ex. Lum) och inställning av adaptiv fokusering. Kör verktyget tills det är klart.</para
></listitem>

            <listitem
><para
>Granska resultaten. För varje filter granska varje AF-körning och leta efter extremvärden. Bestäm vad som ska göras för varje extremvärde, t.ex. ta bort från bearbetning genom att ställa in till 0. Om det finns filter där du är missnöjd med resultatet, avmarkera kryssrutan Spara för filtren.</para
></listitem>

            <listitem
><para
>När du är nöjd, tryck på Spara för att spara filterpositionerna i Filterinställningar för framtida användning.</para
></listitem>
            </itemizedlist>
      </para>
</sect3>

  <sect3 id="focus-display">
    <title
>Fokuseringsvisning</title>

    <screenshot>
      <screeninfo
>Fokuseringsvisning </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_display.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringsvisning</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Fokuseringsskärmen visar ett FITS-visningsfönster för bildrutan som togs under fokuseringsprocessen. Om <guilabel
>Ringformad mask</guilabel
> är markerat, så ritas masken på bilden. Alla stjärnor som detekterats av Ekos baserat på de valda parametrarna har sitt HFR-värde visat bredvid den tillhörande stjärnan (såvida inte Mät är inställt till FWHM). </para>

    <para
>Om <guilabel
>Mosaikmask</guilabel
> har valts så visar FITS-visningen mosaikens 3 x 3 rutnät med mitten, kanterna och sidorna som ställts in i alternativen för Mosaikmask. <screenshot
><screeninfo
>Fokuseringsvisningens mosaik</screeninfo
><mediaobject>
    <imageobject
><imagedata fileref="focus_display_mosaic.png" format="PNG" width="50%"/></imageobject>
    <textobject
><phrase
>Fokuseringsvisningens mosaik</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>Fönstret stöder följande FITS-visningsalternativ (överst i fönstret):</para>

    <itemizedlist>
      <listitem>
        <para
><guibutton
>Zooma in</guibutton
>och <guibutton
>Zooma ut</guibutton
>.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Standardzoom</guibutton
> och <guibutton
>Anpassa</guibutton
>.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Ändra utsträckning</guibutton
>: Stäng av eller sätt på skärmutsträckning.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Ändra hårkors</guibutton
>: Sätt på eller stäng av hårkors.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Visa hjälplinjers</guibutton
>: Sätt på eller stäng av bildpunktshjälplinjer.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Visa eller dölj stjärnor</guibutton
>: Stäng av eller sätt på stjärndetektering.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Visa stjärnprofil</guibutton
>: Öppnar dialogrutan Visa stjärnprofil.</para>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-v-curve">
    <title
>V-kurva</title>

    <screenshot>
      <screeninfo
>Fokuseringens v-kurva </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_vcurve.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringens v-kurva</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>V-kurvan visar fokuseringsposition (x-axel) mot fokuseringsmätvärdet, t.ex. halv flödesradie (HFR) (y-axel). Varje datapunkt ritas på diagrammet och representeras av en cirkel med ett nummer som anger datapunkten. Hur många datapunkter som tas och hur fokuseringsenheten rör sig bestäms av de valda parametrarna. </para>

    <para
>För vissa algoritmer ritar Ekos också en kurva med bästa passform genom datapunkterna. Om <guilabel
>Använd viktning</guilabel
> har valts visas felstaplar för varje datapunkt, som motsvarar standardavvikelsen i uppmätt värde.</para>

    <para
>Enheterna för y-axeln beror på valt fokuseringsmått. Till exempel, för HFR, är y-axeln antingen i bildpunkter eller bågsekunder beroende på hur <guilabel
>Visningsenheter</guilabel
> är inställda.</para>

    <para
>Om <guilabel
>Förfina kurvanpassning</guilabel
> väljs kommer fokuseringen att leta efter och eventuellt utesluta extrema datapunkter. I detta fall exkluderades datapunkterna 1, 5 och 7.</para>

    <para
>Under V-kurvan visas ett antal parametrar:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>HFR</guilabel
>: Visar stjärnans HFR för den senaste datapunkten om det är relevant.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>FWHM</guilabel
>: Visar stjärnans FWHM för den senaste datapunkten om relevant.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Stjärnor</guilabel
>: Antalet stjärnor som används för den senaste datapunkten.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Upprepning</guilabel
>: Antalet datapunkter som tagits hittills.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Relativ profil...</guibutton
>: Öppnar rutan <link linkend="focus-relative-profile"
>Relativ profil</link
>.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Rensa data</guibutton
>: Återställer V-kurvans diagram genom att rensa visad data.</para>
      </listitem>
    </itemizedlist>

    <para
>Här är en V-kurva där Mått är inställt till Justerad HFR: <screenshot
><screeninfo
>V-kurva HFR-justering</screeninfo
><mediaobject
><imageobject>
          <imagedata fileref="focus_vcurve_hfradj.png" format="PNG" width="50%"/></imageobject
><textobject>
          <phrase
>Fokuseringens V-kurva Justerad HFR</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>Här är en V-kurva där Mått är inställt till FWHM: <screenshot
><screeninfo
>V-kurva FWHM</screeninfo
><mediaobject
><imageobject>
      <imagedata fileref="focus_vcurve_fwhm.png" format="PNG" width="50%"/></imageobject
><textobject>
      <phrase
>Fokuseringens V-kurva FWHM</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>Här är en V-kurva när Mått är inställt på Antal stjärnor. I det här fallet har kryssrutan Kritisk fokuseringszon (KFZ) <guilabel
>Visa</guilabel
> markerats så att KFZ också visas: <screenshot
><screeninfo
>V-kurva Antal stjärnor</screeninfo
><mediaobject
><imageobject>
      <imagedata fileref="focus_vcurve_numstars.png" format="PNG" width="50%"/></imageobject
><textobject>
      <phrase
>Fokuseringens v-kurva Antal stjärnor</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>Här är en V-kurva när Mått är inställt på Fourier: <screenshot
><screeninfo
>V-kurva Fourier</screeninfo
><mediaobject
><imageobject>
      <imagedata fileref="focus_vcurve_fourier.png" format="PNG" width="50%"/></imageobject
><textobject>
      <phrase
>Fokus v-kurva Fourier</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>När bildtagning används, ändras diagramformatet till det för en "tidsserie" där horisontell axel anger bildrutans nummer. Det är för att hjälpa dig med tagningsprocessen eftersom du kan se hur Mått, i det här fallet HFR, ändras mellan bildrutor. </para>

    <para
>Det är mycket användbart, till exempel när du försöker få systemet i ungefärligt fokus innan du startar en automatisk fokuseringskörning. I det här fallet startas bildtagning och knapparna Steg In och Steg ut används för att justera fokus och den observerade effekten på V-kurvan.</para>

    <screenshot>
      <screeninfo
>V-kurva som tidsserie</screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_vcurve_timeseries.png" format="PNG"
                     width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringens V-kurva tidsserie</phrase>
        </textobject>
      </mediaobject>
    </screenshot>
  </sect3>

  <sect3 id="focus-relative-profile">
    <title
>Relativ profil</title>

    <screenshot>
      <screeninfo
>Fokuseringens relativa profil </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_relative_profile.png" format="PNG"
                     width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Fokuseringens relativa profil</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Den relativa profilen är ett diagram som visar de relative HFR-värdena uppritade mot varandra Lägre HFR-värden motsvaras av smalare former och vice versa. Den heldragna röda kurvan är profilen för aktuellt HFR-värde, medan den punktformade gröna kurvan är föregående HFR-värde. Slutligen anger den lila kurvan det första uppmätta HFR-värdet. Det gör det möjligt att bedöma hur mycket den automatiska fokuseringsprocessen har förbättrat den relativa fokuseringskvaliteten. </para>
  </sect3>

  <sect3 id="How_to_Setup_for_an_Auto_Focus_Run">
    <title
>Hur man ställer in en automatisk fokuseringskörning</title>

    <para
>De exakta inställningarna som fungerar bäst för en given astronomisk inställning måste räknas ut av användaren med hjälp av försök och misstag. Ett bra ställe att börja är avsnittet <link linkend="focus-advisor"
>Fokuseringsrådgivare</link
>. Kör Fokuseringsrådgivaren och acceptera dess rekommendationer. Den använder den engångslinjära algoritmen:</para>

    <itemizedlist>
      <listitem>
        <para
>Ställ in spel. Se avsnittet <link linkend="focus-backlash"
>Spel</link
> för mer information.</para>
      </listitem>

      <listitem>
        <para
>Inledande stegstorlek. Det är en kritisk parameter. Du kanske kan få en idé från andra personer med liknande inställningar. Om inte, kan du prova att ställa in den från den kritiska fokuseringszonen (KFZ) för utrustningen. Se <link linkend="focus-cfz"
>avsnittet om KFZ</link
> för mer information.</para>
        </listitem>

      <listitem>
        <para
>Börja nära fokus genom att manuellt hitta fokus. Använd alternativet <guibutton
>Starta bildtagning</guibutton
> och justera fokus manuellt för att nå ungefärligt fokus.</para>
      </listitem>

      <listitem>
        <para
>Se till att du hittar tillräckligt med stjärnor. Att öka exponeringen brukar hitta fler stjärnor (men gör fokuseringsprocessen längre).</para>
      </listitem>
    </itemizedlist>

    <para
>Kör automatisk fokusering. Här är den typ av V-kurva du är ute efter:</para>
    <screenshot
><screeninfo
>Bra fokuseringskurva </screeninfo
><mediaobject>
    <imageobject
><imagedata fileref="focus_good_focus.png" format="PNG" width="50%"/></imageobject>
    <textobject
><phrase
>Bra fokuseringskurva</phrase
></textobject
></mediaobject
></screenshot>

    <para
>Däremot visar nästa bild en inledande stegstorlek som har ställts in för lågt. HFR varierar från cirka 0,78 till 0,72, vilket ger ett max/min strax över 1. Den andra ledtråden till att det är en dålig inställning är att felstapelområdet är väldigt stort jämfört med HFR-rörelsen vilket gör att kurvlösningen ritar en kurva genom mycket brus, vilket betyder att resultaten inte är särskilt exakta.</para>
    <screenshot
><screeninfo
>Dålig fokuseringskurva </screeninfo
><mediaobject
><imageobject>
    <imagedata fileref="focus_bad_focus.png" format="PNG" width="50%"/></imageobject>
    <textobject
><phrase
>Dålig fokuseringskurva</phrase
></textobject
></mediaobject
></screenshot>
  </sect3>

  <sect3 id="focus-backlash">
    <title
>Fokuseringsenhetens spel</title>

    <para
>Spel i fokuseringsinställningen beror på en kombination av spel i själva den elektroniska fokuseringsenheten (t.ex. i kuggmekanismen), i kopplingen av den elektroniska fokuseringsenheten till teleskopets dragrör och i dragrörets mekanism. Således kommer varje inställning att ha sin egen spelkaraktäristik även om samma fokuseringsenhet används.</para>

    <para
>Det är viktigt att ha en tydlig strategi för att hantera spel och att ställa in fokusering på lämpligt sätt för den valda strategin. Det är bäst att hantera spel på ett enda ställe för att undvika konflikter. Även om det är möjligt att hantera spel på flera ställen (det har gjorts med lyckat resultat) rekommenderas det inte i allmänhet eftersom det kan leda till konflikter mellan programvarukomponenter och fokuseringsenheten.</para>

    <para
>Det finns flera sätt att mäta spel i tick. Konsultera fokuseringsenhetens dokumentation eller använd Internet inklusive INDI-forumet.</para>

    <para
>Det finns flera saker att tänka på när man räknar ut hur man hanterar spel: <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Inget spel</emphasis
>: Om du har turen att ha en inställning utan spel är det vettigt att stänga av <guilabel
>Drivrutinens spel</guilabel
> och <guilabel
>AF-översvep</guilabel
> (inställda till noll).</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Spel hanterat av fokuseringsenheten</emphasis
>: Om fokuseringsenheten har förmåga att hantera spel själv kan du använda den här funktionen och aktivera <guilabel
>Drivrutinens spel</guilabel
> och stänga av <guilabel
>AF-översvep</guilabel
> av (inställd på noll). Alternativt, om det är möjligt, kan du stänga av fokuseringsenhetens spelfunktion och antingen använda drivrutinen eller AF-översvep för att hantera spel.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Spel som hanteras av drivrutinen</emphasis
>: Om drivrutin har förmågan att hantera spel kan du använda funktionen och stänga av <guilabel
>AF-översvep</guilabel
> (inställd till noll) ). Alternativt kan du stänga av drivrutinens spelfunktion och ställa in <guilabel
>AF-översvep</guilabel
>.</para>

        <para
>För att veta om drivrutinen stöder spel, kontrollera fältet <guilabel
>Drivrutinens spel</guilabel
>. Om det är aktiverat och du kan ställa in värden så stöder drivrutinen spel. Om fältet är inaktiverat stöder inte drivrutinen spel.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>AF-översvep</emphasis
>: Fokuseringsmodulen kan själv hantera spel genom att översvepa utåtriktade rörelser med värdet i fältet <guilabel
>AF-översvep</guilabel
>. Till exempel, om <guilabel
>AF-översvep</guilabel
> är inställt till 40 så görs det i en tvåstegsprocess när fokusering flyttar fokuseringsenheten utåt. För det första flyttar den fokuseringsenheten 40 tick förbi där den vill hamna; för det andra flyttar den tillbaka in med 40 bockar.</para>

        <para
>Fördelen med <guilabel
>AF-översvep</guilabel
> är att du inte behöver känna till spelet exakt, du behöver bara ställa in <guilabel
>AF-översvep</guilabel
> &gt;= spel. Så om du till exempel mäter spel som ungefär 60 tick kan du ställa in <guilabel
>AF-översvep</guilabel
> till 80. </para>

        <para
><guilabel
>AF-översvep</guilabel
> är också användbart där spelet inte är exakt förutsägbart. Till exempel, om spelmätningar ger något olika värden, t.ex. 61, 60, 59 tick, då neutraliseras inkonsekvensen effektivt genom att använda <guilabel
>AF-översvep</guilabel
>. Om du skulle använda <guilabel
>Fokuseringsenhetens spel</guilabel
> skulle du antagligen ta ett medelvärde av avläsningarna och ställa in värdet till 60. Ibland tar det bort hela spelet korrekt, men ibland blir det lite för kort; och ibland blir det överkorrigerat.</para>

        <para
>Alla fokuseringsrörelser som hanteras av fokuseringen använder <guilabel
>AF-översvep</guilabel
>, inklusive Steg ut, Gå till, Automatisk fokuseringskörningar, Adaptiva fokuseringsrörelser, Adaptiva startpositionsrörelser och Ta plana bilder på samma position som ljus.</para>
      </listitem>
    </itemizedlist>
    </para>
  </sect3>

  <sect3 id="focus-adaptive">
    <title
>Adaptiv fokusering</title>

    <screenshot>
      <screeninfo
>Adaptiv fokusering </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_adaptive_focus.png" format="PNG" width="75%"/>
        </imageobject>

        <textobject>
          <phrase
>Adaptiv fokusering</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Ekos stödjer konceptet Adaptiv fokusering (AF). Utan AF skulle en typisk bildtagningsplan börja med en automatisk fokuseringskörning, sedan en sekvens av delbilder, sedan en automatisk fokuseringskörning, etc. De automatiska fokuseringskörningarna skulle utlösas av ett antal faktorer som tid, filterbyte, temperaturförändring, etc. Så i grund och botten när en sekvens körs tas delbilder något bort från optimalt fokus tills en tröskel (t.ex. temperaturförändring) utlöser en automatisk fokuseringskörning.</para>

    <para
>Tanken med AF är att justera fokus när miljöfaktorer ändras för att försöka ta varje delbild så nära optimalt fokus som möjligt. Idealt sett är effekten av Adaptiv fokusering som att utföra en automatisk fokuseringskörning före varje delbild men utan att behöva göra körningen.</para>

    <para
>AF fungerar som ett komplement till de olika utlösarna för automatisk fokusering som finns i Ekos nu. Så det är inte nödvändigt att ändra utlösare för automatisk fokusering när du börjar använda AF. Faktum är att i början, med tanke på att AF är en experimentell funktion, rekommenderas inte att reducera villkoren för automatisk fokusering när AF används. Men med tiden, när förtroendet för AF växer, kan det vara möjligt att utföra färre automatiska fokuseringar (och därmed fler bildtagningar). Men i vilket fall som helst, varje delbild bör vara i bättre fokus när AF används, förutsatt att det är korrekt inställt. </para>

    <para
>Så hur vet du om AF skulle vara användbart för din installation eller inte? Det enklaste sättet är kanske att undersöka delbilder strax efter en automatisk fokusering och jämföra dem med delbilder strax före nästa automatiska fokusering. Kan du se skillnad i fokus? Om du har en inställning där fokuseringspunkten är tolerant mot miljöförändringar mellan körningar av automatisk fokusering, kanske AF inte lägger till något till dina bilder. Om du däremot har en inställning som är känslig för miljöförändringar och frekvensen av automatiska fokuseringskörningar är en kompromiss mellan kvalitet och bildtagningstid så borde AF förbättra kvaliteten på dina delbilder.</para>

    <para
>AF stöder för närvarande två miljödimensioner: temperatur och elevation (för det avbildade målet):</para>
    <itemizedlist>
      <listitem>
        <para
>Temperatur. Alla komponenter i bildtagningssystemet påverkas av förändringar i omgivningstemperaturen. Det mest uppenbara är teleskopröret. Vanligtvis expanderar det när temperaturen ökar och drar ihop sig när den minskar. Det påverkar fokuseringspunkten. Men även den optiska väg ljuset från det avbildade målet tar genom atmosfären och genom teleskopets bildtagningskomponenter påverkas av temperaturen och påverkar därför fokuseringspunkten.</para>

        <para
>Det är nödvändigt att ha en pålitlig källa för temperaturinformation tillgänglig för fokuseringsmodulen för att kunna använda temperaturfunktionen i AF.</para>

        <para
>Var temperaturkällan finns är givetvis upp till användaren. Med tanke på förändringarna i temperatureffekten på många komponenter är det inte självklart var den bästa platsen är. Visst experimenterande kan krävas för att få bästa resultat, men som vägledning bör källan vara nära optiken men inte nära någon uppvärmningseffekt av elektrisk utrustning som exempelvis skulle värma upp temperaturkällan men inte optiken. Användning av samma plats är sannolikt viktigt.</para>
      </listitem>

      <listitem>
        <para
>Elevation. Vissa användare har rapporterat att fokuspunkten ändras med målets elevation. Effekten är sannolikt mindre än temperatureffekten och kan vara försumbar för vissa installationer.</para>
      </listitem>
    </itemizedlist>

    <para
>För att använda AF måste du först bestämma om du vill anpassa dig till temperatur, elevation eller båda. Om du är ny med AF rekommenderas det att du börjar med temperaturen och när du har fått det att fungera, avgör om installationen skulle tjäna på att lägga till elevation.</para>

    <para
>Det första steget är att räkna ut <guilabel
>Tick / °C</guilabel
> och/eller <guilabel
>Tick / °elevation</guilabel
> för utrustningen. För att göra det finns det ett befintligt verktyg i Ekos som skriver information till en textfil i katalogen som kallas focuslogs, på samma plats som katalogen för felsökningsloggar, varje gång en automatisk fokuseringskörning slutförs och fokuseringsloggning är aktiverat, förutom att lägga till fokuseringsmeddelanden i felsökningsloggen. Filerna kallas "autofocus-(datum och tid).txt". Data som skrivs är: datum, tid, position, temperatur, filter, HFR, elevation. Data måste analyseras utanför Ekos för att bestämma <guilabel
>Tick / °C</guilabel
> och vid behov <guilabel
>Tick / °elevation</guilabel
>.</para>

    <para
>Här är ett exempel på filen “autofocus-(datetime).txt”: <screenshot>
      <screeninfo
>Fokusering automatisk fokuseringslogg </screeninfo>
      <mediaobject
> <imageobject
> <imagedata fileref="focus_autofocus_log.png" format="PNG" width="50%"/>
        </imageobject
><textobject
><phrase
>Fokusering automatisk fokuseringslogg</phrase
></textobject
></mediaobject>
    </screenshot
></para>

    <para
>För närvarande stöder Ekos ett enkelt linjärt förhållande mellan temperatur, eller elevation, och tick. I framtiden, om det finns efterfrågan, kan mer sofistikerade relationer stödjas. Ett linjärt förhållande ger majoriteten av fördelarna med AF och är ganska enkelt att hantera. Mer komplexa relationer kan vara exaktare men leder till mer komplex hantering. Observera också att mer komplexa förhållanden mellan fokuseringspunkt och temperatur sannolikt är mer eller mindre linjära vid små förändringar av temperaturen.</para>

    <para
>Ett sätt att få ett värde för <guilabel
>Tick / °C</guilabel
> skulle vara att inkludera data från autofocus-(datum och tid).txt från några nätters observationer till ett kalkylblad och skapa ett diagram över fokuseringsposition mot temperatur för varje filter. Granska data och ta bort eventuella extremvärden och lägg till den bäst anpassade linjen. Använd linjen för att få fram <guilabel
>Tick / °C</guilabel
>. Om du tänker anpassa såväl elevation som temperatur, är det bättre att använda en datauppsättning med liknande elevation när temperaturen kalibreras. Sedan är det möjligt att beräkna effekten av temperatur och ta bort den från data vid beräkning av elevationseffekten.</para>

    <para
>Du måste se till att fokuseringspositionen är repeterbar vid samma temperatur och elevation och att fokuseringsenheten inte glider eller har spel som inte är kompenserat. Vid kalibrering är det dessutom bättre att undvika att byta det optiken på ett sätt som kan ändra fokuseringspositionen. Om det är oundvikligt och om förändringen påverkar fokuseringspositionen måste du justera historiska fokuseringsdata på lämpligt sätt så att de kan jämföras.</para>

    <para
>Ett enkelt tillvägagångssätt är att börja med en liten mängd data, säg en natt och använda det för att beräkna Tick /  °C. Använd det och justera över tiden när du samlar in mer data. Ett sätt att kontrollera hur väl AF fungerar är att använda Analysera för att granska hur AF flyttade fokus över en timme. Om saker och ting är perfekta, då ska positioneringen av AF var den än är efter en timme motsvara resultatet från den automatiska fokuseringen. Där det finns en diskrepans beror det på slumpmässighet i resultatet från den automatiska fokuseringen och felkalibrering av AF <guilabel
>Tick / °C</guilabel
>. Genom att göra det regelbundet bygger du upp kunskap om utrustningen och kan finjustera AF. Nedan är en skärmbild av Analys inställt för Fokusering, där du kan se hur fokuseringspositionen ändras under bildtagningssessionen: <screenshot>
      <screeninfo
>Fokuseringsanalys </screeninfo>
      <mediaobject
> <imageobject
> <imagedata fileref="focus_analyze.png" format="PNG" width="50%"/>
        </imageobject
><textobject
><phrase
>Fokuseringsanalys</phrase
></textobject
></mediaobject>
    </screenshot
></para>

    <para
>När du har data kan du ställa in rutan <link linkend="focus-filter-settings"
>Filterinställningar</link
>. Sätt sedan på Adaptiv fokusering i Fokusering under fliken <link linkend="focus-settings"
>Fokuseringsinställningar</link
>. Därefter, när du kör en sekvens, kontrollerar Ekos om fokuseringspositionen behöver justeras efter varje delbild. Om så är fallet gör Fokusering det och sedan fortsätter Tagning med nästa delbild.</para>

    <para
>Skärmbilden överst i avsnittet visar ett exempel. <guilabel
>Tick / °C</guilabel
> är inställd på 9. Autofokus kördes och löstes vid 36580 och 10 °C. Sedan kördes en enkel sekvens av 5 delbilder. Temperaturen ställdes först in till 9 °C och sedan till 8 °C. Efter att varje delbildruta har slutförts, utförd Ekos en adaptiv fokuseringskörning och där en temperaturförändring  inträffar beräknas antal tick för att flytta fokuseringsenheten. I det här exemplet flyttas fokuseringen inåt med 9 tick vid två separata tillfällen, med början vid 36580, innan den flyttas till 36571 och sedan till 36562 som visas under fokuseringsfliken i komponenten Aktuell position och i meddelanderutan.</para>

    <para
>Det adaptiva fokuseringskonceptet är inbyggt i verktyget <link linkend="build-filter-offsets"
>Bygg positioner</link
>.</para>
  </sect3>


  <sect3 id="Coefficient_of_Determination">
    <title
>Bestämningskoefficient, R²</title>

    <para
>Bestämningskoefficienten, eller R², beräknas för att ge ett mått på hur väl den anpassade kurvan motsvarar datapunkterna. Mer information finns <ulink url="https://en.wikipedia.org/wiki/Coefficient_of_determination"
>här</ulink
>. Funktionen är tillgänglig för den engångslinjära fokuseringsalgoritmen. I slutändan ger R² ett värde mellan 0 och 1, där 1 betyder en perfekt passform där alla datapunkter är på kurvan, och 0 betyder att det inte finns någon korrelation mellan datapunkterna och kurvan. Användaren bör experimentera med utrustningen för att se vilka värden de kan erhålla, men som en vägledning fungerar ett värde över cirka 0,9 bra.</para>

    <para
>Det finns möjlighet att ställa in alternativet "R²-gräns" under fliken Inställningar i fokuseringsfönstret, som sedan jämförs med beräknad R² efter den automatiska fokuseringskörningen har slutförts. Om gränsvärdet inte uppnås, körs automatisk fokusering igen.</para>

    <para
>Att ställa in en R²-gräns kan vara användbart för obevakad observation om fokuseringskörningen av någon anledning ger ett dåligt resultat. Men om orsaken inte är övergående förbättrar en omkörning uppenbarligen inte någonting.</para>

    <para
>Om R²-gränsen inte uppnås och fokuseringsprocessen körs om, och återigen misslyckas med att uppnå R²-gränsen, markeras fokuseringskörningen som lyckad för att undvika att processen fastnar och kör om automatisk fokusering för alltid.</para>

    <para
>Funktionen är avstängd genom att ställa in R² gränsen till 0.</para>
  </sect3>

  <sect3 id="Levenberg-Marquardt">
    <title
>Levenberg–Marquardt lösningsverktyg</title>

    <para
>Algoritmen Levenberg-Marquardt (LM) används för att lösa icke-linjära minsta kvadratproblem. GNU Science Library tillhandahåller en implementering av lösningsfunktionen. Följande resurser ger mer information: </para>

    <itemizedlist>
      <listitem>
        <para>
          <ulink url="https://en.wikipedia.org/wiki/Levenberg–Marquardt_algorithm"
></ulink>
        </para>
      </listitem>

      <listitem>
        <para>
          <ulink url="https://www.gnu.org/software/gsl/doc/html/nls.html"
></ulink>
        </para>
      </listitem>
    </itemizedlist>

    <para
>Algoritmen Levenberg-Marquardt är en icke-linjär lösning av minsta kvadratproblem och är därför lämplig för många olika ekvationer. Grundidén är att justera ekvationen y = f(x, P) så att de beräknade y-värdena är så nära y-värdena för de angivna datapunkterna som möjligt, så att den resulterande kurvan passar data så bra som möjligt. P är en uppsättning parametrar som varieras av lösningsfunktionen för att hitta den bästa passformen. Lösningsfunktionen mäter hur långt bort kurvan är vid varje datapunkt, kvadrerar resultatet och adderar dem alla. Det här är talet som ska minimeras, låt oss kalla det S. Lösningsfunktionen förses med en första gissning av parametrarna, P. Den beräknar S, gör en justering av P och beräknar en ny S1. Förutsatt att S1 &lt; S går vi åt rätt håll. Proceduren upprepas tills:</para>

    <itemizedlist>
      <listitem>
        <para
>delta för S är mindre än en angiven gräns (konvergens har nåtts), eller</para>
      </listitem>

      <listitem>
        <para
>maximalt antal upprepningar uppnådda, eller</para>
      </listitem>

      <listitem>
        <para
>lösningsverktyget stötte på ett fel.</para>
      </listitem>
    </itemizedlist>

    <para
>Lösningsfunktionen kan antingen lösa en oviktad eller viktad uppsättning datapunkter. En oviktad uppsättning data ger lika stor vikt åt varje datapunkt vid försök att anpassa en kurva. Ett alternativ är att vikta varje datapunkt med ett mått som motsvarar hur exakt mätningen av datapunkten faktiskt är. I vårt fall är det variansen av stjärnornas HFR:er associerade med datapunkten. Variansen är standardavvikelsen i kvadrat.</para>

    <para
>För närvarande används lösningsverktyget för att antingen anpassa en parabolisk eller hyperbolisk kurva.</para>
  </sect3>
</sect2>
