<?xml version="1.0" encoding="UTF-8"?>
<sect2 id="ekos-focus">
  <title
>Фокусування</title>

  <indexterm>
    <primary
>Інструменти</primary>

    <secondary
>Ekos</secondary>

    <tertiary
>Фокусування</tertiary>
  </indexterm>

  <sect3 id="focus-theory">
    <title
>Теорія роботи</title>

    <screenshot>
      <screeninfo
>Фокусування у Ekos </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="ekos_focus.png" format="PNG" width="75%"/>
        </imageobject>

        <textobject>
          <phrase
>Фокусування у Ekos</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Для фокусування зображення Ekos має встановити обчислювальний метод, який надасть змогу визначити наскільки <emphasis
>якісним</emphasis
> є фокусування. Доволі просто поглянути на зображення і визначити, що воно є <emphasis
>розфокусованим</emphasis
> — людське око доволі просто виконує це завдання. Але <emphasis
>як</emphasis
> може Ekos встановити це без людини? </para>

    <para
>Існує декілька способів. Одним із них є обчислення повної ширини на рівні половинної амплітуди (FHWM) для профілю зірки на зображенні з наступним коригуванням фокуса до досягнення оптимального (найвужчого) значення FWHM. Проблема при цьому полягає у тому, що під час обчислення FWHM припускається, що початкова позиція фокуса є близькою до критичної. Крім того, застосування методу FWHM не дає якісних результатів на зображеннях із низькою інтенсивністю світлового потоку. Альтернативним способом є обчислення радіуса половинного потоку (РПП або HFR). Цей радіус є мірою у пікселях відстані від центру зірки до зони, де інтенсивність світла спадає до половини загального потоку випромінювання від зірки. Метод HFR поводить себе набагато стабільніше в умовах несприятливої погоди, коли профіль яскравості зірок є низьким, а початкова позиція фокусування є далекою від оптимальної. </para>

    <para
>Після обробки зображення за допомогою Ekos буде або вибрано одну зірку і розпочато вимірювання її радіуса половинного потоку, або вибрано набір зірок, що відповідають встановленим критеріям, і обчислено середнє значення радіуса половинного потоку. Програма може автоматично вибрати зірку або ви можете вибрати зірку вручну. Рекомендовано дозволити Ekos автоматично вибрати набір зірок. </para>

    <para
>У Ekos передбачено підтримку 4 різних алгоритмів фокусування: ітеративного, поліноміального, лінійного і лінійного однопрохідного. </para>

    <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Ітеративний</emphasis
>: в межах ітеративного алгоритму Ekos виконує ітеративно дискретні кроки, спочатку використовуючи налаштований користувачем розмір кроку, а потім враховуючи нахил V-кривої, для отримання близької до оптимальної позиції фокусування, де змінює темп і починає виконувати дуже малі точні кроки для досягнення оптимального фокусування. Якщо використовується типовий <guilabel
>Ітеративний</guilabel
> алгоритм, процедура фокусування зупиняється, коли виміряний радіус половинного потоку відрізнятиметься від найменшого записаного значення радіуса половинного потоку на величину, яка є меншою за налаштовану точність. Іншими словами, при пошуку розв'язку задачі мінімізації у вузькому обмеженому діапазоні значень програма перевіряє різницю у відсотках поточного значення радіуса половинного потоку від найменшого записаного значення радіуса половинного потоку, і якщо ця різниця є меншою за вказане користувачем значення, процедура автофокусування вважається успішно завершеною. Типовою є різниця у 1% — вона є достатньою у переважній кількості випадків. Параметри групи <guilabel
>Крок</guilabel
> визначають кількість <emphasis
>початкових</emphasis
> кроків фокусування. Якщо зображення є дуже розфокусованим, слід встановити велике значення кроку (тобто &gt; 250). З іншого боку, якщо фокусування близьке до оптимального, можна вибрати невеликий розмір кроку (менше за 50). Початковий крок для вашого обладнання можна вибрати способом спроб і помилок. Втім, слід зважати на те, що Ekos використовує це значення лише на першому кроці фокусування, оскільки усі наступні кроки буде виконано на основі даних щодо нахилу дотичної до V-кривої. Ключові особливості:</para>

        <itemizedlist>
          <listitem>
            <para
>В алгоритмі зроблено припущення щодо того, що люфт засобу фокусування є добре контрольованим. </para>
          </listitem>

          <listitem>
            <para
>Алгоритм може працювати швидко із використанням мінімальної кількості кроків. </para>
          </listitem>

          <listitem>
            <para
>Алгоритм працює у межах парадигми достатності, де припинення обчислень відбувається, коли радіус половинного потоку потрапляє до допуску у частках щодо визначеного мінімуму. </para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Поліноміальний</emphasis
>: у межах поліноміального алгоритму, процедура розпочинається у режимі, подібному до ітеративного алгоритму, але при переході на інший бік V-кривої (тобто у ситуації, коли радіус половинного потоку після зменшення починає знову зростати), Ekos виконує квадратичну апроксимацію для пошуку розв'язку, який даватиме позицію мінімального можливого радіуса половинного потоку. Ключові особливості:</para>

        <itemizedlist>
          <listitem>
            <para
>В алгоритмі зроблено припущення щодо того, що люфт засобу фокусування є добре контрольованим. </para>
          </listitem>

          <listitem>
            <para
>Алгоритм може працювати швидко із використанням мінімальної кількості кроків. </para>
          </listitem>

          <listitem>
            <para
>В алгоритмі використано апроксимацію кривої для визначення оптимальної позиції фокусування. </para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Лінійний</emphasis
>: у межах лінійного алгоритму Ekos відступає від початкової точки назовні, потім рухається всередину, створюючи регулярні точки даних до точки оптимального фокусування, а потім далі всередину для малювання V-кривої. Потім буде виконано апроксимацію квадратичною кривою до точок даних і обчислено точку оптимального фокусування. Далі, алгоритм знову почне рух на другому проході. Рух відбуватиметься за кривою з першого проходу з метою пошуку мінімального радіуса половинного потоку. Через випадкових характер вимірювання радіуса половинного потоку, в алгоритмі буде використано частку допуску з метою допомогти у визначенні моменту віднайдення розв'язку. Ключові особливості: </para>

        <itemizedlist>
          <listitem>
            <para
>Алгоритм компенсує люфт засобу фокусування і може працювати з узгодженим і неузгодженим люфтом. </para>
          </listitem>

          <listitem>
            <para
>Алгоритм є повільним, для його реалізації потрібно два проходи для визначення оптимального фокусування. </para>
          </listitem>

          <listitem>
            <para
>В алгоритмі використано апроксимацію кривої для визначення оптимальної позиції фокусування на проході 1 з наступним використанням допуску з метою зупинки якомога ближче до цього радіуса половинного потоку на проході 2. </para>
          </listitem>

          <listitem>
            <para
>Алгоритм є дуже гнучким у налаштовуванні: користувач може керувати багатьма параметрами, зокрема розміром кроку та кількістю кроків. </para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Лінійний однопрохідний</emphasis
>: у межах лінійного однопрохідного алгоритму Ekos спочатку виконує обробку за лінійним алгоритмом для встановлення V-кривої першого проходу і апроксимації для пошуку розв'язку. Далі, втім він просувається безпосередньо до обчисленого мінімуму. Ключові особливості: </para>

        <itemizedlist>
          <listitem>
            <para
>Алгоритм компенсує люфт засобу фокусування, якщо люфт є узгодженим. </para>
          </listitem>

          <listitem>
            <para
>Алгоритм є швидким, для його реалізації потрібен один прохід для визначення оптимального фокусування. </para>
          </listitem>

          <listitem>
            <para
>В алгоритмі використано складнішу апроксимацію кривої для визначення оптимальної позиції фокусування. </para>
          </listitem>

          <listitem>
            <para
>Алгоритм є дуже гнучким у налаштовуванні: користувач може керувати багатьма параметрами, зокрема розміром кроку та кількістю кроків. </para>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="optical-train-group">
    <title
>Група оптичного тракту</title>

    <screenshot>
      <screeninfo
>Оптичний тракт </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="optical_train_group.png" format="PNG"
                     width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Параметри оптичного тракту</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>У групі «Оптичний тракт» буде показано поточний вибраний оптичний тракт. Типово, цей буде основний тракт створення зображення, але можна вибрати інші тракти. Група складається з таких елементів:</para>

    <itemizedlist>
      <listitem>
        <para
><guibutton
>Тракт</guibutton
>: поточний використаний оптичний тракт на вкладці «Фокус». Наведіть вказівник миші на це поле, щоб отримати докладніший опис позначеного тракту.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Кнопка редагування</guibutton
>: відкриває вікно «Оптичний тракт» для перегляду та потенційного редагування оптичних трактів.</para>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-focuser-group">
    <title
>Група засобів фокусування</title>

    <screenshot>
      <screeninfo
>Параметри засобу фокусування </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focuser_group.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Параметри засобу фокусування</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Передбачено підтримку усіх сумісних із INDI засобів фокусування. Рекомендуємо користуватися <emphasis role="bold"
>абсолютними</emphasis
> засобами фокусування для отримання найкращих результатів, оскільки їхня абсолютна позиція є відомою на час вмикання. У INDI, <emphasis
>нульовою</emphasis
> позицією засобу фокусування вважається позиція, у якій тубус <emphasis role="bold"
>повністю втягнено</emphasis
>. При фокусуванні <emphasis
>назовні</emphasis
> позиція засобу фокусування зростає, а при фокусуванні <emphasis
>всередину</emphasis
> — зменшується. Передбачено підтримку таких типів засобів фокусування: </para>

    <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Абсолютний</emphasis
>: засоби фокусування з абсолютною позицією, зокрема RoboFocus, MoonLite, ASI ZWO. </para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Відносний</emphasis
>: прилади фокусування з відносною позицією. </para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>На основі часу</emphasis
>: засновані на часу засоби фокусування без зворотного зв'язку за позицією, які коригують позицію фокусування пересуванням на певний часовий крок. </para>
      </listitem>
    </itemizedlist>

    <para
>Почніть з вибору засобу фокусування зі спадного списку. </para>

    <para
>Для засобів абсолютного фокусування ви можете встановити кількість позначок у полі розміру початкових кроків на вкладці <link linkend="focus-mechanics"
>Механіка</link
>. Для засобів абсолютного і відносного фокусування одиницями розміру кроку будуть <emphasis
>позначки</emphasis
>, для простих, заснованих на часу, засобів фокусування розмір вимірюватиметься у <emphasis
>мілісекундах</emphasis
>. Кнопками <guibutton
>Всередину</guibutton
> і <guibutton
>Назовні</guibutton
> можна скористатися для пересування засобу фокусування на вказану кількість позначок.</para>

    <para
>У полі «Кроки» спочатку міститиметься початкова точка засобу фокусування у позначках. При русі засобу фокусування ліве поле оновлюватиметься відповідно до поточної позиції засобу фокусування. У правому полі спочатку міститиметься початкова позиція засобу фокусування, але згодом воно оновлюватиметься кожного разу, коли завершуватиметься успішна спроба автоматичного фокусування, — у ньому міститиметься остання прийнятна позиція фокусування. Крім того, ви можете встановити для правого поля будь-яке потрібне вам значення і скористатися кнопкою <guibutton
>Перейти</guibutton
>, щоб пересунути засіб фокусування у цю позицію.</para>

    <para
>Кнопка <guibutton
>Перейти до позиції фокусування</guibutton
> пересуває засіб фокусування у позицію, яку вказано у правому полі «Кроки». </para>

    <para
>Натискання кнопки <guibutton
>Припинити рух засобу фокусування</guibutton
> припиняє поточний рух засобу фокусування. </para>

    <para
>Натискання кнопки <guibutton
>Автоматичне фокусування</guibutton
> розпочинає процедуру автоматичного фокусування. Кнопкою <guibutton
>Зупинити</guibutton
> можна скористатися для припинення процедури. </para>

    <para
>За допомогою натискання кнопки <guibutton
>Захопити зображення</guibutton
> можна створити кадр на основі поточних параметрів у групі <guilabel
>ПЗЗ і барабан фільтрів</guilabel
>. Натискання кнопки <guibutton
>Розпочати кадрування</guibutton
> призведе до повторного захоплення кадрів, аж до натискання кнопки <guibutton
>Припинити</guibutton
>. </para>

    <para
>Деякі алгоритми фокусування намагаються вирішувати проблеми із початковими позиціями, які перебувають далеко від оптимального фокуса, але для отримання передбачуваних результатів краще починати з позиції, яка є близькою до фокуса. Для початку, можна скористатися полем <guibutton
>Початкове кадрування</guibutton
> із кнопками <guibutton
>Всередину</guibutton
> і <guibutton
>Назовні</guibutton
> для користування позиції фокусування з метою грубої мінімізації РПП зірок у захоплених зображень. Якщо кадрування використано у цей спосіб, на графіку <link linkend="focus-v-curve"
>V-кривої</link
> буде показано послідовність моментів часу для кадрів та відповідні значення РПП. Це значно спрощує виконання процедури кадрування.</para>

    <para
>Якщо ви є початківцем в астрономії, варто ознайомитися із вашим обладнанням при світлі дня. Зокрема, варто спробувати виконати приблизне фокусування на віддаленому об'єкті. Це надасть вам добру початкову позицію для фокусування на зірках уночі.</para>
  </sect3>

  <sect3 id="focus-ccd-filter-wheel">
    <title
>Група «Камера і барабан з фільтрами»</title>

    <screenshot>
      <screeninfo
>Група «Камера фокусування і барабан з фільтрами» </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_ccdfw_group.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Група «Камера фокусування і барабан з фільтрами»</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>У цьому розділі зібрано параметри, які пов'язано із параметрами фотоапарата та фільтрів, які буде використано під час фокусування.</para>

    <para
>Верхній рядок елементів керування пов'язано із параметрами ПЗЗ, які слід використати.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Експ</guilabel
>: тривалість експонування у секундах.</para>
      </listitem>

      <listitem>
        <para
>Натискання кнопки <guibutton
>Увімкнути або вимкнути повноекранний режим</guibutton
> відкриває окреме вікно із показом рамки фокусування. Повторне натискання кнопки поверне вас до фокусованого вікна.</para>
      </listitem>

      <listitem>
        <para
>Кнопка <guibutton
>Показати у засобі перегляду FITS</guibutton
> відкриває окреме вікно засобу перегляду даних FITS для показу рамки фокусування, на додачу до рамки фокусування, яку показано у вікні фокусування.</para>
      </listitem>

      <listitem>
        <para
>Кнопка <guibutton
>Інтерактивне відео</guibutton
> відкриває відповідне контекстне вікно.</para>
      </listitem>
    </itemizedlist>

    <para
>Наступний рядок засобів керування надає змогу встановити параметри фотоапарата. Виберіть значення зі спадного списку, а потім вкажіть, слід підсилювати камеру чи скористатися ISO.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Кроки</guilabel
>: збільшення кількості кроків змінить масштаб зображення, а також дає яскравіші пікселі. Варто розпочати з 1x1, а потім подивіться, чи можна отримати кращі результати на вищих рівнях, зокрема 2x2 або 4x4.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Підсилення</guilabel
>: встановіть підсилення для фотоапарата, який використано для фокусування. Значення має бути достатньо великим для отримання чистого візерунка зірок, але недостатньо великим, щоб створювати надмірне зашумення, яке заважатиме фокусуванню. Для пошуку оптимального значення потрібні певні досліди. Якщо ви не впевнені, з чого почати, спробуйте одиничний приріст для вашої камери і почати коригування з нього.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>ISO</guilabel
>: встановіть ISO для фотоапарата, який буде використано для фокусування. Для визначення оптимального значення знадобиться певне експериментування.</para>
      </listitem>
    </itemizedlist>

    <para
>Третій рядок елементів керування призначено для джерела даних температури і фільтрування, якщо таке є:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>ДТ</guilabel
>: вибрати джерело даних щодо температури зі спадного списку. Нижче буде показано поточну температуру з вибраного джерела температури та зміну температури між моментом останньої успішної процедури автофокусування і поточним моментом. Поширеною практикою виконання повторного фокусування після значної зміни температури, яка змінює точку фокусування телескопа.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Фільтр</guilabel
>: вибрати фільтр, яким слід скористатися.</para>

        <para
>Щоб розпочати фокусування, ймовірно, варто вибрати фільтр, який пропускає найбільше світла, наприклад фільтр світності. За допомогою кнопки <guibutton
>Параметри фільтрування</guibutton
> можна відкрити контекстну панель <link linkend="capture-filter-settings"
>параметрів фільтрування</link
>. За її допомогою можна встановити значення параметрів окремого фільтра, які буде використано під час автоматично фокусування, коли користувач не зможе динамічно встановлювати параметри. Загалом, ці параметри уможливлюють два типи процедури фокусування:</para>

        <itemizedlist>
          <listitem>
            <para
><emphasis role="bold"
>Для окремих фільтрів</emphasis
>: коли інший модуль, наприклад, модуль захоплення зображення потребують зміни фільтра, можна автоматично змінювати фокусування для нового фільтра. Значення експозиції, яким слід скористатися для кожного з фільтрів, буде взято з контекстної панелі <link linkend="capture-filter-settings"
>параметрів фільтрування</link
>. Це дуже корисно там, де, наприклад, вузькосмуговий фільтр потребує довших термінів експонування, ніж широкосмугові фільтри.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Фіксований фільтр</emphasis
>: можна вказати фіксований фільтр, яким слід скористатися, якщо потрібне фокусування для іншого фільтра. Наприклад, якщо використано фільтр червоного кольору, і потрібне автоматичне фокусування, можна виконати автоматичне фокусування для фільтра світності, а потім, після завершення процедури, скоригувати позицію фокусування на значення відступу, відповідне до попередньо визначеного значення різниці фокусів між фільтрами світності і червоного кольору. Це зручно, коли, наприклад, складно виконати фокусування для деяких фільтрів безпосередньо через надзвичайно довгі терміни експонування. Зауважте, що цей підхід із фіксованим фільтром можна також використати у <link linkend="ekos-align"
>модулі вирівнювання</link
> при виконанні захоплення для астрометрії.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
>Натискання кнопки <guibutton
>Скинути</guibutton
> відновить для допоміжного кадру фокусування розміри повного кадру.</para>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-settings">
    <title
>Параметри фокусування</title>

    <screenshot>
      <screeninfo
>Параметри фокусування </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_settings.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Параметри фокусування</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Далі передбачено 3 панелі-вкладки параметрів. Ці параметри зберігаються між сеансами. Першою є панель «Параметри».</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Автовибір зірки</guilabel
>: дозволити Ekos вибрати зірки для фокусування із зображення. Якщо зірок не вибрано, користувачеві доведеться вручну вибрати зірку.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Темний кадр</guilabel
>: позначте цей пункт для віднімання темного кадру від основного. Цей пункт може бути корисним для зашумлених зображень, для яких слід відняти від зображення фокусування попередньо знятий темний кадр, щоб покращити результати подальшої обробки.</para>

        <para
>Темні кадри використовують при фокусуванні, вирівнюванні та наведенні. Див. опис можливості бібліотеки темних кадрів у розділі щодо <link linkend="ekos-capture"
>модуля захоплення</link
>, щоб дізнатися більше про те, як налаштувати темні кадри.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Комп. люфту АФ</guilabel
>: позначте цей пункт, щоб в алгоритмі автофокусування було виконано компенсацію люфту. Цей пункт доступний для лінійного і лінійного однопрохідного алгоритмів. Значення у цьому полі має бути встановлено разом із полем <guilabel
>Люфт</guilabel
>. Див. розділ <link linkend="focus-mechanics"
>Механіка фокусування</link
>, щоб дізнатися більше.</para>

        <para
>Люфт конфігурації засобу фокусування, ймовірно, є комбінацією люфту у самому електронному засобі фокусування (наприклад, у зубчастому механізмі), у прив'язці електронного засобу фокусування до труби телескопа та у механізмі труби телескопа. Таким чином, у кожної конфігурації є власна характеристика люфту.</para>

        <para
>При роботі з люфтом слід взяти до уваги декілька речей: <itemizedlist>
            <listitem>
              <para
><emphasis role="bold"
>Без люфту</emphasis
>: якщо вам поталанило мати конфігурацію без люфту, має сенс вимкнути компенсацію люфту у засобі автоматичного фокусування. Усе має працювати і з увімкненою компенсацією люфту, але підпрограма автоматичного фокусування робитиме зайві рухи.</para>
            </listitem>

            <listitem>
              <para
><emphasis role="bold"
>Керування люфтом з боку засобу фокусування</emphasis
>: якщо у вашому засобі фокусування передбачено можливість керування люфтом, ви можете скористатися цим і вимкнути компенсацію люфту з боку засобу автоматичного фокусування. Крім того, якщо це можливо, ви можете вимкнути апаратну компенсацію люфту і увімкнути компенсацію люфту з боку засобу автоматичного фокусування.</para>
            </listitem>

            <listitem>
              <para
><emphasis role="bold"
>Керування люфтом з боку драйвера пристрою</emphasis
>: якщо у вашому драйвері пристрою передбачено можливість керування люфтом, ви можете скористатися цим і вимкнути компенсацію люфту з боку засобу автоматичного фокусування Крім того, якщо це можливо, ви можете вимкнути компенсацію люфту з боку драйвера і увімкнути компенсацію люфту з боку засобу автоматичного фокусування.</para>
            </listitem>
          </itemizedlist
> </para>

        <para
>Для уникнення конфліктів варто керувати люфтом лише в одному з відповідних місць інтерфейсу.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Підкадр</guilabel
>: використати усе поле зору камери або вибрати підкадр навколо зірки фокусування під час процедури автоматичного фокусування. Працює, лише якщо для фокусування використано одну зірку. Позначення цього пункту може пришвидшити процедуру фокусування.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Прямокутник</guilabel
>: виберіть розмір прямокутника для вибору зірки фокусування при використанні <emphasis role="bold"
>підкадру</emphasis
>. Збільште значення, якщо зірки на знімку дуже великі. Для фокусування за Бахтіновим розмір прямокутника може бути додатково збільшено для кращого покриття шаблона дифракції Бахтінова.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Усе поле</guilabel
>: використати повне поле зору камери або вибрати підкадр навколо зірки фокусування під час процедури автоматичного фокусування. Якщо використано декілька зірок, має бути вибрано саме цей варіант.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Кільце</guilabel
>: використовують у поєднанні із повним полем. Для кільця передбачено два поля для введення, які разом визначають кільце навколо поля зору камери. Зірки, що потрапляють за межі кільця, виключають з обробки. Встановлення додатного значення для внутрішнього кола призведе до того, що зірки у центрі поля зору буде відкинуто. Це може бути корисним, щоб уникнути використання зірок цілі (наприклад галактики) для потреб фокусування. Встановлення меншого за 100% значення для зовнішнього кола призведе до того, що зірки на краях поля зобу буде виключено з обробки під час фокусування. Це може бути корисним, якщо у вас немає зображення плоского поля на краях поля зору.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Призупиняти наведення</guilabel
>: позначте цей пункт, щоб призупинити наведення під час процедури автофокусування. Буде виконано додаткову перевірку, щоб призупиняти наведення, якщо його виконує основний телескоп, наприклад, якщо використано позаосьовий засіб наведення. Призначенням цього пункту є запобігання проблемам наведення через розфокусовані зірки під час процедури фокусування.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Врівноваження</guilabel
>: цей пункт використовують у поєднанні із <guilabel
>Призупиняти наведення</guilabel
>. Цей пункт уможливлює заспокоєння усіх вібрацій в оптичному обладнанні шляхом очікування протягом вказаної кількості секунд з моменту завершення процесу автофокусування, перш ніж розпочнеться наведення.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Використовувати вагову функцію</guilabel
>: це експериментальний параметр, який є доступним лише у лінійному однопрохідному алгоритмі фокусування і лише для типів кривих «Гіпербола» і «Парабола». Для того, щоб ним скористатися, потрібно працювати із повним полем. Якщо використано параметр, програма обчислює стандартне відхилення РПП зірок і використовує квадрат цієї величини (математичну дисперсію) як вагу у процесі апроксимації кривої. Перевагою є те, що точкам даних із ненадійними даними, тобто більшими стандартними відхиленням РПП, буде надано меншої ваги, ніж точкам із надійнішими даними. Якщо цей пункт не позначено та для усіх інших типів апроксимації кривої, де цей параметр не діє, усім точкам даних буде надано однакову вагу у процедурі апроксимації кривої. </para>

        <para
>Щоб дізнатися більше, зверніться до розділу <link linkend="Levenberg-Marquardt"
>Розв'язувач Левенберга-Марквардта</link
>.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Обмеження R²</guilabel
>: це експериментальний параметр, який є доступним лише при використанні лінійного однопрохідного алгоритму і типів кривих «Гіпербола» і «Парабола». У межах лінійного однопрохідного алгоритму буде обчислено степінь, до якого крива відповідає точкам даних або <link linkend="Coefficient_of_Determination"
>коефіцієнта визначеності, R²</link
>. Цей параметр надає змогу визначати мінімальне прийнятне значення R², яке буде порівняно із значенням, отриманим у процесі апроксимації кривої. Якщо мінімальне значення не було досягнуто, процедуру автофокусування буде перезапущено. Буде виконано один повторний запуск і, навіть якщо мінімальне R² не буде досягнуто удруге, запуск автофокусування все одно буде визнано успішним.</para>

        <para
>Можете поекспериментувати із пошуком належного значення, але достатньо добрими, зазвичай, бувають значення 0,8 або 0,9.</para>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-process">
    <title
>Процедура фокусування</title>

    <screenshot>
      <screeninfo
>Процедура фокусування </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_process.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Процедура фокусування</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Це панель параметрів процесу фокусування.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Виявлення</guilabel
>: виберіть алгоритм виявлення зірок. У кожного з алгоритмів є свої переваги і недоліки. Рекомендуємо не змінювати типового значення, SEP, якщо воно не призводить до невдалих спроб належним чином виявити зірки. Доступні такі параметри:</para>

        <itemizedlist>
          <listitem>
            <para
><emphasis role="bold"
>SEP</emphasis
>: вбудована бібліотека видобування початкових даних і фотометрії (Source Extraction and Photometry). Це типове значення.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Центр ваги</emphasis
>: метод видобування даних на основі оцінки маси зірки навколо піків сигналів.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Градієнт</emphasis
>: модель видобування з єдиного джерела на основі фільтрування Собеля. </para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Поріг</emphasis
>: алгоритм виявлено єдиного джерела на основі значень пікселів. </para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Бахтінов</emphasis
>: цим методом виявлення можна скористатися, якщо для фокусування використано маску Бахтінова. Спочатку створіть знімок, потім виберіть зірку для фокусування. Програма створить новий знімок і проаналізує дифракційний шаблон. На дифракційному шаблоні буде показано три прямі, які вказуватимуть на те, наскільки добре було розпізнано шаблон, і наскільки фокусовано зображення. Якщо шаблон розпізнано не дуже добре, можна скоригувати значення параметра <emphasis
>К-ть рядків</emphasis
>. Лінія із колами на кінцях є збільшеним індикатором для фокусування. Чим коротшою є лінія, тим фокусованішим є зображення.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><guilabel
>Профіль SEP</guilabel
>: якщо встановлено алгоритм виявлення зірки <emphasis
>SEP</emphasis
>, виберіть профіль параметрів, яким слід скористатися в алгоритмі. Рекомендуємо для початку скористатися типовим профілем «1-Focus-Default».</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Поріг</guilabel
>: порогове значення у відсотках, яке буде використано у <emphasis
>пороговому</emphasis
> алгоритмі визначення. Збільшіть, щоб обмежити центроїд яскравими ядрами. Зменшіть, щоб захопити розмиті зірки.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Алгоритм</guilabel
>: виберіть алгоритм процедури автофокусування: </para>

        <itemizedlist>
          <listitem>
            <para
><emphasis role="bold"
>Ітеративний</emphasis
>: пересування засобу фокусування кроками, розмір яких початково задається. Щойно буде визначено нахил кривої, програма визначить розмір кроку для досягнення оптимального розв’язку. Роботу алгоритму буде припинено, коли виміряне значення радіуса половинного потоку (HFR) перебуватиме у межах визначеного у межах<emphasis role="bold"
>допуску</emphasis
> мінімального радіуса половинного потоку, який було зареєстровано під час виконання процедури.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Поліноміальний</emphasis
>: починається з ітеративного методу. Під час переходу на інший бік V-кривої обчислюються коефіцієнти полінома наближення та можливий мінімальний розв’язок. Цей алгоритм може працювати швидше за суто ітеративний підхід за якісного набору даних.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Лінійний</emphasis
>: у межах цього алгоритму програма будує V-криву із приблизною кількістю у <emphasis role="bold"
>Коефіцієнт зовнішніх кроків</emphasis
> кроків на кожному боці від мінімуму. Після побудови V-кривої виконується апроксимація кривої квадратичним рівнянням (параболічною формою), а результати апроксимації використовуються для обчислення позиції засобу фокусування, яка дає мінімальний РПП. Після визначення мінімуму програма виконує другий прохід із зменшеним удвічі кроком, повторно створюючи криву на основі даних першого проходу. Програма намагається утриматися у межах <emphasis role="bold"
>допуску</emphasis
> щодо мінімального РПП, який обчислено під час першого проходу.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Лінійний однопрохідний</emphasis
>: у межах цього алгоритму пошук починається так само, як у межах <emphasis role="bold"
>лінійного</emphasis
> алгоритму — з побудови V-кривої. Після побудови V-кривої програма застосовує тип апроксимації <emphasis role="bold"
>Апроксимація кривої</emphasis
> до точок даних і обчислює позицію фокусування, яка дає мінімальний РПП. Після визначення мінімуму фокусування пересувається до точки у спосіб, розроблений для нейтралізації люфту.</para>

            <para
>У цьому алгоритмі передбачено підтримку давнішого стилю типу квадратичної кривої, а також новішого <link linkend="Levenberg-Marquardt"
>розв'язувача Левенберга-Марквардта</link
> для гіперболічних та параболічних кривих. У його межах програма виконує зважування точок даних у процесі апроксимації кривої, якщо позначено пункт «Використовувати вагову функцію».</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><guilabel
>Ефект</guilabel
>: ви також можете вибрати фільтр <guilabel
>Ефект</guilabel
> для удосконалення зображення з метою попереднього його перегляду. Наполегливо рекомендуємо вам не використовувати ефекти під час процедури фокусування, оскільки їхнє використання може завадити правильному обчисленню радіуса половинного потоку. Для дзеркальних фотоапаратів ви можете змінити параметри ISO.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Допуск</guilabel
>: допуск у відсотках визначає, коли завершиться процедура автофокусування, якщо використано <guilabel
>Ітеративний</guilabel
> та <guilabel
>Лінійний</guilabel
> алгоритм. Під час процедури автофокусування програма записуватиме значення радіуса половинного потоку, і щойно фокусування наблизиться до оптимального, програма почне порівнювати РПП із мінімальним записаним РПП у сеансі і припинить процедуру, щойно виміряне значення РПП відрізнятиметься на вказане значення у відсотках від мінімального записаного РПП. Зменшіть значення, щоб зменшити відхилення від оптимального розв'язку для фокусування. Збільшення значення збільшить можливе відхилення розв'язку від оптимального. </para>

        <warning>
          <para
>Встановлення надто малого значення може призвести до зациклювання і, ймовірно, невдалого завершення спроби автоматичного фокусування. </para>
        </warning>
      </listitem>

      <listitem>
        <para
><guilabel
>Розмір ядра</guilabel
>: розмір ядра гаусового розмивання, який буде застосовано до зображення до застосування виявлення країв Бахтінова. Буде використано, якщо у списку <emphasis role="bold"
>Виявлення</emphasis
> вибрано пункт «Бахтінов».</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Усереднення за</guilabel
>: кількість кадрів, які слід захопити для кожної точки даних. Зазвичай, варто почати з 1, але збільшення значення призведе використання процедури усереднення за РПП зірок.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>σ</guilabel
>: стандартне відхилення гаусового розмивання, яке буде застосовано до зображення до застосування виявлення країв Бахтінова. Буде використано, якщо у списку <emphasis role="bold"
>Виявлення</emphasis
> вибрано пункт «Бахтінов».</para>
      </listitem>

      <listitem>
        <para
><guilabel
>К-ть рядків</guilabel
>: кількість рядків, які буде показано на екрані при використанні маски Бахтінова. Буде використано, якщо у списку <emphasis role="bold"
>Виявлено</emphasis
> вибрано пункт «Бахтінов».</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Апроксимація кривої</guilabel
>: тип кривої для апроксимації точок даних. </para>

        <itemizedlist>
          <listitem>
            <para
><emphasis role="bold"
>Квадратична</emphasis
>: використати квадратичне рівняння з використанням алгоритму методу найменших квадратів у лінійному стилі з GSL (GNU Science Library). У результаті буде отримано параболічну криву.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Гіпербола</emphasis
>: апроксимація гіперболою із використанням нелінійного алгоритму найменших квадратів з GSL (GNU Science Library). Див. <link linkend="Levenberg-Marquardt"
>розв'язувач Левенберга-Марквардта</link
>, щоб дізнатися більше.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Парабола</emphasis
>: апроксимація параболою із використанням нелінійного алгоритму найменших квадратів з GSL (GNU Science Library). Див. <link linkend="Levenberg-Marquardt"
>розв'язувач Левенберга-Марквардта</link
>, щоб дізнатися більше.</para>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-mechanics">
    <title
>Механіка фокусування</title>

    <screenshot>
      <screeninfo
>Механіка фокусування </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_mechanics.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Механіка фокусування</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Це панель параметрів механіки фокусування.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Початковий розмір кроку</guilabel
>: встановлює розмір кроку, який буде використано у різноманітних алгоритмах фокусування. Для абсолютних і відносних засобів фокусування це кількість позначок; для засобів фокусування на основі таймера — кількість мілісекунд.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Макс. хід</guilabel
>: накладає обмеження на кількість ходів від поточної позиції засобу фокусування, які буде дозволено зробити алгоритмам автофокусування. Призначенням цього параметра є захист засобів фокусування від надмірного відходу від початкового стану і потенційного ушкодження. З іншого боку, значення має бути досить великим, щоб уможливити достатній рух засобу фокусування і завершення процедури автоматичного фокусування.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Максимальний розмір кроку</guilabel
>: буде використано алгоритмом ітеративного фокусування для обмеження максимального розміру кроку, яким можна користуватися.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Люфт</guilabel
>: усі механічні пристрої із шестернями мають люфти. У типовому засобі фокусування буде «мертва» зона, де зміна напрямку (наприклад, з «всередину» на «назовні») призведе до руху засобу фокусування на декілька позначок, але без справжнього руху оптичного тракту.</para>

        <para
>У лінійному однопрохідному алгоритмі (подібно до лінійного алгоритму) передбачено компенсацію люфту у двох позиціях під час процедури автофокусування, коли засіб фокусування рухається назовні:</para>

        <itemizedlist>
          <listitem>
            <para
>Початковий зовнішній рух назовні на розмір початкового кроку помножений на коефіцієнт зовнішнього кроку на початку процедури.</para>
          </listitem>

          <listitem>
            <para
>Коли буде завершено прохід усередину, і Ekos визначить найкращу позицію фокусування і почне рух назовні до неї.</para>
          </listitem>
        </itemizedlist>

        <para
>Лінійний однопрохідний алгоритм розширить (на x позначок) зовнішній рух, а потім, як окремий рух, виконає рух всередину на x позначок. Отже, алгоритм завжди досягатиме бажаної позиції у внутрішньому напрямку.</para>

        <para
>Може бути використано 2 схеми:</para>

        <itemizedlist>
          <listitem>
            <para
>Встановити для параметра «Люфт» значення 0. Ekos використовуватиме значення 5 * розмір початкового кроку.</para>
          </listitem>

          <listitem>
            <para
>Встановити для параметра «Люфт» значення &gt; 0. Ekos використовуватиме це значення у своїх обчисленнях люфту. Ймовірно, у паспорті до вашого засобу фокусування є настанови щодо визначення значення люфту. Потреби у точному визначенні люфту для роботи лінійного чи лінійного однопрохідного алгоритму немає. Достатньо, щоб встановлене значення люфту було більшим за справжнє його значення. Наприклад, якщо вами виміряно люфт і отримано значення, яке є близьким до 100, будь-яке значення &gt;=100 також буде працювати. Наприклад, встановіть для люфту значення 200.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><guilabel
>Врівноваження</guilabel
>: кількість секунд очікування, які мають минути з моменту завершення руху засобу фокусування до моменту початку захоплення наступного зображення. Призначенням параметра є усування будь-яких вібрацій, які могли завадити створенню наступного кадру, в оптичному тракті.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Коефіцієнт зовнішніх кроків</guilabel
>: буде використано у лінійному та лінійному однопрохідному алгоритмі. Цей параметр вказує початкову кількість кроків назовні, які засіб фокусування виконає на початку процедури автофокусування.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Час очікування на захоплення</guilabel
>: час очікування у секундах на отримання захопленого зображення до оголошення перевищення часу очікування.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Час очікування на рух</guilabel
>: час очікування у секундах на рух засобу фокусування у потрібну позицію до оголошення перевищення часу очікування.</para>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-display">
    <title
>Показ фокусування</title>

    <screenshot>
      <screeninfo
>Показ фокусування </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_display.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Показ фокусування</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>На панелі показу фокусування буде показано зображення FITS кадру, який створено під час процедури фокусування. На ній буде показано значення <guilabel
>Кільця</guilabel
>, яке буде накладено на зображення. Для усіх зірок, які буде виявлено Ekos на основі вибраних значень параметрів, буде показано значення РПП. </para>

    <para
>У вікні передбачено підтримку таких параметрів перегляду FITS (у верхній частині вікна):</para>

    <itemizedlist>
      <listitem>
        <para
><guibutton
>Збільшити</guibutton
> і <guibutton
>Зменшити</guibutton
>.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Типовий масштаб</guibutton
> і <guibutton
>Підібрати за розмірами</guibutton
>.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Увімкнути/Вимкнути розтягування</guibutton
>: увімкнути або вимкнути розтягування показу.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Перехрестя</guibutton
>: увімкнути або вимкнути показ перехресть.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Піксельні лінії сітки</guibutton
>: увімкнути або вимкнути показ піксельних ліній сітки.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Зірки</guibutton
>: увімкнути або вимкнути виявлення зірок.</para>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-v-curve">
    <title
>V-крива</title>

    <screenshot>
      <screeninfo
>V-крива фокусування </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_vcurve.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>V-крива фокусування</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>V-крива є кривою залежності позиції фокусування (вісь x) від радіуса половинного потоку (РПП) (вісь y). Кожну точку даних буде намальовано на графіку і представлено колом із номером, що відповідає точці даних. Кількість точок даних і пересування засобу фокусування буде визначено встановленими параметрами. </para>

    <para
>Для деяких алгоритмів Ekos також намалює криву оптимальної апроксимації точок даних. Якщо позначено пункт <guilabel
>Використати вагову функцію</guilabel
>, буде показано позначки похибок для кожної точки даних, які відповідатимуть стандартному відхиленню у виміряному значенні РПП.</para>

    <para
>Під V-кривою буде показано декілька параметрів:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>РПП</guilabel
>: показує РПП зірки для найновішої точки даних.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Зірки</guilabel
>: кількість зірок, яку використано для обчислення найновішої точки даних.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Ітерація</guilabel
>: кількість створених точок даних на поточний момент.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>РПП</guibutton
>: викликає контекстну панель <link linkend="focus-relative-profile"
>Відносний профіль</link
>.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Вилучити дані</guibutton
>: відновлює початковий стан графіка V-кривої шляхом вилучення показаних даних.</para>
      </listitem>
    </itemizedlist>

    <para
>При кадруванні формат графіка змінюється на формат послідовності значень часу, де горизонтальна вісь відповідає номерам кадрів. Це має допомогти вам у процесі кадрування, оскільки ви зможете бачити зміну РПП між кадрами. </para>

    <screenshot>
      <screeninfo
>V-крива як часова послідовність</screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_vcurve_timeseries.png" format="PNG"
                     width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Часова послідовність V-кривої фокусування</phrase>
        </textobject>
      </mediaobject>
    </screenshot>
  </sect3>

  <sect3 id="focus-relative-profile">
    <title
>Відносний профіль</title>

    <screenshot>
      <screeninfo
>Відносний профіль фокусування </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_relative_profile.png" format="PNG"
                     width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Відносний профіль фокусування</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Відносний профіль — графік, на якому показано взаємозалежність відносних значень РПП. Менші значення РПП відповідають вужчим формам, і навпаки. Суцільна червона крива відповідає профілю поточного значення РПП, а точкова зелена крива — попередньому значенню РПП. Нарешті, малинова крива відповідає першому виміряному значенню РПП. Так ви зможете визначити, наскільки процедура автофокусування поліпшила якість відносного фокусування. </para>
  </sect3>

  <sect3 id="How_to_Setup_for_an_Auto_Focus_Run">
    <title
>Як налаштувати програму для виконання автофокусування</title>

    <para
>Точні значення параметрів, які найкраще працюватимуть для певної конфігурації астрономічних параметрів слід визначити методом спроб і помилок, але у цьому розділі надано певні підказки. У ній використано лінійний однопрохідний алгоритм:</para>

    <itemizedlist>
      <listitem>
        <para
>Почніть поруч із точкою визначеного вручну фокуса. Скористайтеся варіантом <guibutton
>Почати кадрування</guibutton
> і скоригуйте фокусування, щоб отримати приблизне фокусування.</para>
      </listitem>

      <listitem>
        <para
>Виберіть лінійний однопрохідний алгоритм і апроксимацію кривою, наприклад гіперболою. Позначте пункт «Використовувати вагову функцію».</para>
      </listitem>

      <listitem>
        <para
>Переконайтеся, що ви знаходите достатньо зірок.</para>

        <itemizedlist>
          <listitem>
            <para
>Розпочніть з використання методу виявлення зірок SEP і профілю 1-Focus-Default, якщо у вас немає причин використовувати інші налаштування.</para>
          </listitem>

          <listitem>
            <para
>На вкладці «Параметри» виберіть «Усе поле» (а не «Підкадр»). Програма використовуватиме багато зірок, а не лише одну. Позначте пункт «Автовибір зірки», щоб система автоматично вибрала зірки, яким слід скористатися.</para>
          </listitem>

          <listitem>
            <para
>Переконайтеся, що для параметрів «Кільця» встановлено використання великої частини кадру, щоб використати якомога більше зірок. Зауважте, що можуть існувати інші фактори, які заважатимуть скористатися усім полем зору, зокрема проблеми із неплоским полем у кутах датчика світла, але слід уникати надмірних обмежень.</para>
          </listitem>

          <listitem>
            <para
>Вкажіть параметри камери, зокрема експонування, підсилення та кроки так, щоб отримати належну кількість зірок на зображенні. Тут важко щось порадити точно, але спробуйте зробити так, щоб зірок було від 20 до 100 (очевидно, якщо фокусна відстань і ціль не дають змоги отримати таку кількість, процедура працюватиме, але може бути не зовсім оптимальною з точки зору апроксимації кривою). Пропонуємо почати з 2-х секундного експортування, одиничного підсилення для вашої камери і кроку 1x1.</para>
          </listitem>

          <listitem>
            <para
>Збільшення часу експонування, зазвичай, надає змогу виявити більше зірок (але уповільнює процедуру фокусування). Ви також можете спробувати робити по декілька знімків однієї точки, вказавши у полі «Усереднення за» значення &gt; 1 кадру.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
>Налаштуйте параметри вкладки «Механіка».</para>

        <itemizedlist>
          <listitem>
            <para
>Налаштуйте люфт. Ознайомтеся із розділом щодо люфту, щоб дізнатися більше, але якщо значення для вашого обладнання є невідомим, варто скористатися нульовим значенням люфту.</para>
          </listitem>

          <listitem>
            <para
>Встановіть «Максимальний хід». Це має бути значення, яке є відповідним засобу фокусування, щоб запобігти перевищенню параметрів конфігурації обладнання. Воно має бути достатньо великим, щоб уможливлювати набір значень у пунктах «Розмір початкового кроку» та «Коефіцієнт зовнішніх кроків». Його мінімальним значенням є добуток розміру початкового кроку на коефіцієнт зовнішніх кроків. Якщо можете, встановіть значення, скажімо, удвічі більше за цей добуток.</para>
          </listitem>

          <listitem>
            <para
>Врівноваження. Якщо використання вашого засобу фокусування спричиняє вібрацію в оптичному тракті, вам слід встановити значення цього параметра так, щоб після руху система очікувала вказану кількість секунд, перш ніж робити наступний знімок. Намагайтеся пересувати засіб фокусування, а потім робити декілька кадрів у тій самій позиції. Якщо перший кадр після руху має більше РПП, ніж наступні кадри, вам, ймовірно, потрібно збільшити значення у полі «Врівноваження».</para>
          </listitem>

          <listitem>
            <para
>Коефіцієнт зовнішніх кроків. Почніть зі значення 4 або 5. Це дасть вам 9-10 або 11-12 точок даних — добре початкове значення. Вам потрібна достатня кількість точок даних для формування кривої, але чим більше буде точок даних, тим довшою буде процедура.</para>
          </listitem>

          <listitem>
            <para
>Розмір початкового кроку. Нижче показано «добру криву». Помітний значний рух за віссю РПП, щоб явно продемонструвати криву. У цьому випадку значення максимального РПП є приблизно рівним 2,2, а мінімальне — 0,75, що дає відношення максимального до мінімального значення приблизно рівне 3.</para>

            <screenshot>
              <screeninfo
>Добра крива фокусування </screeninfo>

              <mediaobject>
                <imageobject>
                  <imagedata fileref="focus_good_focus.png" format="PNG"
                             width="50%"/>
                </imageobject>

                <textobject>
                  <phrase
>Добра крива фокусування</phrase>
                </textobject>
              </mediaobject>
            </screenshot>
          </listitem>

          <listitem>
            <para
>Навпаки, наступне зображення демонструє наслідки надто малого значення «Розмір початкового кроку». Значення РПП варіюється від 0,78 до 0,72. Це дає значення відношення максимальне / мінімальне трохи більше 1. Ще однією ознакою того, що налаштування є поганими, є те, що діапазон стовпчика похибки є дуже великим, порівняно із рухом РПП, що означає, що розв'язувач кривої малює криву, борючись із навалою шуму, а це означає, що результати не будуть дуже точними.</para>

            <screenshot>
              <screeninfo
>Погана крива фокусування </screeninfo>

              <mediaobject>
                <imageobject>
                  <imagedata fileref="focus_bad_focus.png" format="PNG"
                             width="50%"/>
                </imageobject>

                <textobject>
                  <phrase
>Погана крива фокусування</phrase>
                </textobject>
              </mediaobject>
            </screenshot>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="Coefficient_of_Determination">
    <title
>Коефіцієнт визначеності, R²</title>

    <para
>Коефіцієнт визначеності, або R², обчислюється з метою отримати міру того, наскільки добре крива апроксимує точки даних. Докладніші відомості викладено <ulink url="https://en.wikipedia.org/wiki/Coefficient_of_determination"
>тут</ulink
>. Це експериментальна можливість, яка доступна лише для лінійного однопрохідного алгоритму фокусування. Якщо коротко, R² приймає значення від 0 до 1, де 1 означає точну відповідність, де усі точки даних лежать на кривій, а 0 означає, що немає кореляції між точками даних і кривою. Користувачеві варто поекспериментувати з обладнанням, щоб отримати найкраще значення, але, типово, варто скористатися значенням, яке перевищує 0,8, щоб отримати добру апроксимацію.</para>

    <para
>Можна встановити значення «Обмеження R², на вкладці «Параметри» вікна параметрів фокусування, яке буде порівняно із обчисленим R² після завершення автофокусування. Якщо значення обмеження не буде досягнуто, автоматичне фокусування буде перезапущено.</para>

    <para
>Зміна значення обмеження R² може бути корисним для автоматичного спостереження, якщо запуск фокусування дає поганий результат через помилку на першому кроці. Очевидно, якщо причина не є тимчасовою, повторний запуск нічого не покращить.</para>

    <para
>Якщо «Обмеження R²» не буде досягнуто, а процедуру фокусування перезапущено, і обмеження R² знову не досягнуто, запуск фокусування буде позначено як успішний, щоб уникнути зависання процедури, коли повторне автофокусування виконуватиметься вічно.</para>

    <para
>Ця можливість вимикається встановленням нульового значення обмеження R².</para>
  </sect3>

  <sect3 id="Levenberg-Marquardt">
    <title
>Розв'язувач Левенберга-Марквардта</title>

    <para
>Алгоритм Левенберга-Марквардта (LM) призначено для розв'язання нелінійних задач методом найменших квадратів. У GNU Science Library реалізовано відповідний розв'язувач. Докладніші відомості можна знайти на цих ресурсах: </para>

    <itemizedlist>
      <listitem>
        <para>
          <ulink url="https://en.wikipedia.org/wiki/Levenberg–Marquardt_algorithm"
></ulink>
        </para>
      </listitem>

      <listitem>
        <para>
          <ulink url="https://www.gnu.org/software/gsl/doc/html/nls.html"
></ulink>
        </para>
      </listitem>
    </itemizedlist>

    <para
>Алгоритм Левенберга-Марквардта є новою можливістю, яку додано до лінійного однопрохідного алгоритму фокусування. Це розв'язувач нелінійних задач методом найменших квадратів, який є придатним для розв'язування багатьох різних рівнянь. Основна ідея полягає у коригуванні рівняння y = f(x,P) таким чином, щоб обчислені значення y є якомога близькими до значень y точок даних, отже, отримана крива найкраще апроксимує дані. P є набором параметрів, які розв'язувач змінює з метою отримання найкращої відповідності. Розв'язувач вимірює, наскільки далекою є крива у кожній точці даних, підносить це значення до квадрату і додає усі значення. Отримане значення слід мінімізувати. Назвемо це значення S. Розв'язувачу надається початкове припущення щодо параметрів, P. Розв'язувач обчислює S, коригує P і обчислює нове значення S1. Якщо S1 &lt; S, ми рухаємося у правильному напрямку. Ітерації тривають, аж доки не буде виконано одну з таких умов:</para>

    <itemizedlist>
      <listitem>
        <para
>різниця в S є меншою за визначене значення (досягнуто критерію збіжності), або</para>
      </listitem>

      <listitem>
        <para
>досягнуто максимальної кількості ітерацій, або</para>
      </listitem>

      <listitem>
        <para
>під час розв'язування сталася помилка.</para>
      </listitem>
    </itemizedlist>

    <para
>Розв'язувач може працювати над розв'язанням задач із незваженими і зваженими наборами точок даних. Якщо коротко, незважений набір даних використовує рівні значення ваги для кожної точки даних при спробі апроксимації кривою. Навпаки, зваження кожної точки даних значенням, яке відповідає тому, наскільки точним було насправді вимірювання точки даних. У нашому випадку це дисперсії РПП зірок, які пов'язано із точкою даних. Дисперсія є квадратом стандартного відхилення.</para>

    <para
>У поточній версії розв'язувач використовує апроксимацію параболічною або гіперболічною кривою.</para>
  </sect3>
</sect2>
