<sect1 id="ekos-scheduler">
    <title
>Планиране</title>
    <indexterm>
        <primary
>Инструменти</primary>
        <secondary
>Ekos</secondary>
        <tertiary
>Планиране</tertiary>
    </indexterm>
    <screenshot>
        <screeninfo
>Модул на Ekos за планиране </screeninfo>
        <mediaobject>
            <imageobject>
                <imagedata fileref="ekos_scheduler.png" format="PNG"/>
            </imageobject>
            <textobject>
                <phrase
>Модул на Ekos за планиране</phrase>
            </textobject>
        </mediaobject>
    </screenshot>
    <sect2 id="ekos-scheduler-introduction">
      <title
>Въведение</title>
        <para
>Модулът на Ekos за планиране е важен компонент от вашия работен процес за заснемане на изображения. Той се свързва с INDI, стартира и спира всички останали Ekos модули, планира задания според техните ограничения и приоритети, наблюдава тези задания, докато се изпълняват, и след това безопасно изключва системата, когато заданията са готови или преди зазоряване. Независимо дали провеждате многодневни сесии за изображения на множество цели или просто се опитвате да заснемате една цел за няколко часа, препоръчително е планиращият модул да контролира вашите сесии за изображения. </para>
    </sect2>
    <sect2 id="scheduler-table">
        <title
>Таблица на планирани задачи</title>
        <para
>Сърцето на модула за планиране е таблица, показваща списъка със задачи на модула за планиране, които потребителят иска да изпълни. Свързани с всяка задача са атрибутите (предимно описани в раздела за настройки по-долу). Атрибутите описват името на заданието, накъде трябва да бъде насочен телескопът при изобразяване на това задание, описание на това, какви типове изображения трябва да бъдат заснети, ограничения за това, кога трябва да се изпълняват заданията (напр. височина, здрач, луна, ограничения на хоризонта и т.н.), операции, които трябва да се изпълнят преди и след изпълнението на заданието, и стратегии за справяне с грешки. </para>
        <para
>Можете да добавяте, изтривате, модифицирате или променяте реда на редовете в таблицата на модула за планиране. </para>
        <itemizedlist>
            <listitem>
              <para
>Можете да добавите ред за задача на модула за планиране в таблицата, като щракнете върху бутона <guilabel
>+</guilabel
> над таблицата, ако всички задължителни атрибути са попълнени (име, позиция и файл с последователност). </para>
            </listitem>
            <listitem>
              <para
>Ако щракнете върху ред, след това можете да щракнете върху бутона <guilabel
>-</guilabel
> над таблицата, за да изтриете този ред. </para>
            </listitem>

            <listitem>
              <para
>Ако щракнете върху ред, след това можете да щракнете върху контролите <guilabel
>^</guilabel
> или <guilabel
>v</guilabel
>, за да преместите тези редове нагоре или надолу в списъка със задачи. </para>
            </listitem>

            <listitem>
              <para
>Ако щракнете двукратно върху ред, атрибутите на това задание се попълват в различните настройки на страницата Планиране. След това можете да промените един или повече от тези атрибути и след това да щракнете върху отметката над таблицата (след двукратно щракване <guilabel
>+</guilabel
> се превърна в <guilabel
>отметка</guilabel
>) и новите атрибути са присвоени на това задание. </para>
            </listitem>
        </itemizedlist>

    </sect2>
    <sect2 id="scheduling-algorithm">
        <title
>Алгоритъм на планиране</title>
        <para
>Таблицата на модула за планиране (по-горе) показва списък на заданията по приоритет, като заданията в горната част на списъка (редовете с по-малък номер) са по-висок приоритет от заданията по-надолу в списъка (в редовете с по-голям номер). </para>
        <para
>Планиращият модул редовно планира (и препланира) кои задачи трябва да бъдат изпълнени и кога. Той може да започне да изпълнява дадена задача и след това да изпревари тази задача с нова. Може да стане неактивен, ако не могат да се изпълняват задачи (напр. на дневна светлина), и да спи до момента, в който отново стане активен. Неговата цел е да поддържа оборудването възможно най-заето, като същевременно зачита приоритетите на таблицата за планиране. Ето как работи. </para>
        <para
>Когато планиращият модул се стартира (или когато препланира, което прави всяка секунда, докато е активен), той преглежда целия списък със задачи, започвайки от задачата с най-висок приоритет и преминавайки надолу към тази с най-нисък приоритет, ако е необходимо. Когато открие задача, която може да се изпълнява, тя стартира тази задача, като евентуално изпреварва изпълняваната в момента задача. Задачи могат да се изпълняват, ако са изпълнени нейните ограничения, напр. целта не е блокирана от местния терен, отговаря на минималното ограничение за височина, не е завършила вече всички желани изображения... </para>
    <para
>Алгоритъмът показва планираните следващи начални времена и крайни времена за всички задания в таблицата на модула за планиране. Той също така показва своята оценка за времето, в което заданията ще се изпълняват през следващите 48 часа в панела на регистрационния файл в долната част на прозореца. Вижте екранната снимка на прозореца на Планиращия модул в горната част на този раздел. </para>
        <para
>Алгоритъмът за планиране, описан в горния параграф, е известен като алгоритъм за алчно (Greedy) планиране. Той е препоръчителен за използване. В предишните версии на Ekos имаше друг "Класически алгоритъм за планиране", което вече не се използва в Ekos. Тази схема не можеше да изпреварва текущите задачи и по този начин не използваше оборудването толкова добре, колкото алчният алгоритъм. </para>
        <para
>Има опция за отметка в менюто с опции на Планиращия модул, наречена <guilabel
>Използване на greedy алгоритъм на планиране</guilabel
>, която по подразбиране е отметната. Системата работи, както е описано по-горе, когато е опцията е избрана. Когато не е отметнато, Планиращият модул не може да планира задачи с по-нисък приоритет, когато незавършени задачи с по-висок приоритет не могат да се изпълняват. Това води до по-малко ефективно използване на системата, но може да ви даде повече контрол върху планиращия процес. </para>
    </sect2>
    <sect2 id="scheduler-files">
        <title
>Файлове на планиращия модул (.esl)</title>
        <para
>Таблицата на Планиращия модул със списъка от задачи и атрибути може да бъде записана на диска и прочетена обратно. Тя се записва в .esl файл. Бутоните за запис на текущата таблица на модула за планиране на диск и обратно четене на други .esl файлове се намират над таблицата вдясно. </para>
    </sect2>
    <sect2 id="ekos-scheduler-settings">
      <title
>Настройки</title>
        <para
>Ekos модулът за планиране предоставя прост интерфейс, за да помогне на потребителя да зададе условията и ограниченията, необходими за работа на модула за планиране. Трябва да изберете <guilabel
>Целта</guilabel
>, нейните координати и <guilabel
>Последователност</guilabel
>, преди да можете да добавите задание към Планиращия модул. </para>
        <para
>Всяко задание на модула за планиране се състои от следното: </para>
        <itemizedlist>
            <listitem>
                <para
><guilabel
>Име и координати на целта</guilabel
>: Изберете цел от <link linkend="findobjects"
>диалоговия прозорец за намиране</link
> или <guibutton
>я добавете</guibutton
> от <link linkend="tool-obsplanner"
>Планиране на наблюдение</link
>. Можете също да въведете персонализирано име. Координатите могат също да бъдат копирани от небесната карта с помощта на бутона точно вдясно от координатите. </para>
            </listitem>
            <listitem>
                <para
>По избор <guilabel
>ПЪ</guilabel
>: Ъгълът на позицията (или завъртането на изображението) може да бъде указан за системи с хардуер за завъртане на камерата. </para>
            </listitem>
            <listitem>
                <para
>Незадължителен <guilabel
>FITS файл</guilabel
>: Ако е указан FITS файл, астрометричният модул за решаване решава файла и използва централната RA/DEC като целеви координати. </para>
            </listitem>
            <listitem>
                <para
><guilabel
>Файл с последователност</guilabel
>: Файлът с последователност е конструиран в <link linkend="ekos-capture"
>модула за заснемане</link
> на Ekos. Има списък със спецификации за заснемане, където всяка спецификация описва подробно броя на изображенията за заснемане, кой филтър да се използва, дължината на експозицията, усилването, подробности за именуването на файловете, температурни настройки, префикси, директория за изтегляне и т.н. </para>
            </listitem>
            <listitem>
                <para
><guilabel
>Профил</guilabel
>: Изберете кой профил на оборудване да се използва при стартиране на Ekos. Ако Ekos и INDI вече са стартирани и онлайн, този избор се игнорира. </para>
            </listitem>
            <listitem>
                <para
><guilabel
>Стъпки</guilabel
>: Потребителят избира какви стъпки да бъдат предприети в началото на заданието. Възможностите са: (1) Стартиране на монтировката за проследяване , (2) Автофокусиране, (3) Стартиране на подравняване за решаване на изображение, (4) Стартиране на автоматичното насочване. Могат да бъдат избрани една или повече стъпки. </para>
            </listitem>
            <listitem>
                <para
><guilabel
>Условия за стартиране</guilabel
>: Условия, които трябва да бъдат изпълнени <emphasis role="bold"
>преди</emphasis
> да бъде стартирано заданието на модула за планиране. Понастоящем потребителят може да избере да започне <guimenuitem
>възможно най-скоро</guimenuitem
> или когато целта е близо до или след кулминацията или в определено време. </para>
            </listitem>
            <listitem>
                <para
><guilabel
>Ограничения</guilabel
>: Това са условия, които трябва да бъдат изпълнени <emphasis role="bold"
>по всяко време</emphasis
> по време на процеса на изпълнение на заданието на модула за планиране. Те включват минимална височина на целта, минимално разстояние от луната, съблюдаване на полумрака, ограничения на височината на изкуствения хоризонт и метеорологични условия. </para>
            </listitem>
            <listitem>
                <para
><guilabel
>Условия за завършване</guilabel
>: Условия, които задействат завършване на заданието на модула за планиране. Изборът по подразбиране е просто да маркирате заданието на модула за планиране като завършено, след като процесът на последователност приключи. Допълнителните условия позволяват на потребителя да повтори процеса на последователност няколко пъти или за неопределено време, или до определено време. </para>
            </listitem>
        </itemizedlist>
    </sect2>
    <sect2 id="other-options">
        <title
>Други настройки</title>
        <para
>Има няколко други опции за контролиране на поведението на модула за планиране. Те се намират в общото меню с настройки на KStars, показано по-долу, в раздела Ekos и подраздела модул за планиране. </para>
      <screenshot>
            <screeninfo
>Настройки на Планиращия модул </screeninfo>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="ekos_scheduler_settings.png" format="PNG"/>
                </imageobject>
                <textobject>
                    <phrase
>Настройки на Планиращия модул</phrase>
                </textobject>
            </mediaobject>
        </screenshot>
       <sect3 id="remember-job-progress">
        <title
>Запомняне на напредъка на заданието</title>
        <para
>Една от важните, от показаните по-горе настройки е <guilabel
>Запомняне на напредъка на заданието</guilabel
>. Когато това квадратче е отметнато и задание се изпълнява, модулът за планиране преглежда изображенията на заданието, които вече са заснети на диска, и не заснема отново тези, които вече са там. Предимството е, че ако дадено задание се рестартира или се изпълни отново друга вечер, или ако се изпълняват няколко задания заедно, спирайки и стартирайки, когато могат да се изпълнят, тогава заданията се рестартират точно там, където са спрели. Това работи добре с опцията за завършване на задание <guilabel
>Повтаряне до прекратяване</guilabel
>. Ако <guilabel
>Запомняне на напредъка на заданието</guilabel
> не е маркирано, заданията ще се рестартират от началото на тяхната зададена последователност всеки път, което вероятно не е това, което искате. За съжаление, ако изображенията не се съхраняват на същия компютър, на който работи Ekos, тогава тази функция не работи и заданията се рестартират от началото. </para>
        <para
>Вероятно объркващ страничен ефект от <guilabel
>Запомняне на напредъка на заданието</guilabel
> е, че ако сте изпълнили задание, използвайки (по подразбиране) условието за завършване на последователността и то е заснело всичките си изображения и сега искате да изпълните заданието отново. В такава ситуация Планиращият модул няма да планира заданието, защото смята, че всички изображения вече са заснети. Ще трябва или да преместите тези изображения на друго място на диска, или да промените условието за завършване на Повтаряне за N пъти или Повтаряне до прекратяване. </para>
       </sect3>
       <sect3 id="group-repeats">
        <title
>Групови повторения</title>
        <para
>Тази функция ви позволява да изпълнявате две или повече задания на Планиращия модул с приблизително еднакъв приоритет, така че ако и двете могат да се изпълняват, ще напредват с приблизително еднаква скорост. Това може да е приложимо, например, за задачи, изобразяващи множество плочки в мозайка, но обикновено е приложимо за всеки набор от задачи. </para>
        <para
>Обикновено приоритетът на заданието на (алчния) алгоритъм на планиране се задава от реда, в който заданието е посочено в таблицата със задания на Планиращия модул. Задачите на редовете, по-близо до най-горния са с по-висок приоритет от заданията, разположени по-надолу в списъка. По този начин, ако задание на ред 2 (JЗадача 2) използва <guilabel
>Повтаряне до прекратяване</guilabel
> и ограниченията за изпълнение на това задание са изпълнени, по-ниско задание (напр. Задача 3) няма да бъде планирано за изпълнение. </para>
        <para
>Ако искате да редувате задачи, можете да присвоите на всяка от задачите едно и също име на <guilabel
>група</guilabel
> и да дадете на задачите едно от повтарящите се условия за завършване (напр. Повторение за N пъти или Повторение до прекратяване). С тази настройка заданията в една и съща група ще се следват едно след друго, ако са изпълнили повече „повтарящи се повторения“ от другото задание. Например, ако задача 2 от група "MyGroup" завърши втората си итерация, а задача 3 от същата група е завършила само 1 итерация, когато дойде време за планиране на задача 2, вместо нея ще се изпълни задача 3. </para>
        <para
>Практически погледнато, представете си, че имате мозайка от 6 панела, която искате да редувате. Можете да дадете на всички тези задания едно и също групово име, да ги направите всичките с еднакви стойности на повтаряне, напр. 5 пъти. Тогава те ще протичат в синхрон. Скоростта на смяна на задания ще се контролира от дължината на файла с последователност, присвоен на всяко от тези задания. Не бихте искали да правите ритъма твърде кратък (например заснемане на едно 2-минутно изображение), тъй като може да има допълнителни процеси при смяната на заданията. Например започването на заданието може да включва подравняване, започване на насочване и дори фокусиране. </para>
       </sect3>
       <sect3 id="repeat-all-jobs">
        <title
>Повтаряне на всички задания</title>
        <para
>Има квадратче за отметка и въвеждане на число точно под таблицата със задачи на модула за планиране, което ви позволява да повторите целия график N пъти. Това може да се използва за редуване на няколко задачи. Можете просто да изброите задачите в Планиращия модул, да се повтарят N пъти и задачите ще се повтарят. Тази промяна обаче е несъвместима с опцията Запомняне на напредъка на заданието (по-горе) и не е налична, ако е тази опция е избрана. (Забележка: Не забравяйте, че се препоръчва Запомняне на напредъка на заданието.) </para>
       </sect3>
    </sect2>
    <sect2 id="editing-running-jobs">
        <title
>Редактиране на текущи задания</title>
        <para
>Възможно е да редактирате таблицата със задачи на Планиращия модул и атрибутите на отделните задания, докато Планиращият модул работи. Както винаги, щракнете два пъти върху задача, промените желаните атрибути и щракнете върху квадратчето за отметка, за да завършите промяната. Ако редактирате текущото задание, то ще бъде рестартирано (т.е. стъпките при стартиране (завъртане, фокусиране, подравняване, насочване) ще бъдат направени отново. Можете също така да местите задания нагоре и надолу по приоритет, да добавяте нови задания или да изтривате съществуващи. Не можете да изтриете изпълняваната задача. </para>
        <para
>Един важен атрибут на заданията на Планиращия модул е файлът с последователност (.esq), който контролира модула за заснемане, докато заданието се изпълнява. Например, задава се брой заснемания, използвани филтри, усилване/ISO и т.н. .esq обикновено се създава и редактира в раздела за заснемане, но това не може да се направи, докато програмата за планиране работи. Ако искате да направите промени в .esq файл, докато Планиращият модул работи, или да създадете нов, Планиращият модул предоставя инструмент, наречен Редактор на последователности от заснемания. </para>
       <sect3 id="capture-sequence-editor">
        <title
>Редактор на последователности от заснемания</title>
        <para
>Редакторът на последователност за заснемане е инструмент за създаване и редактиране на файлове с последователност за заснемане (.esq), който може да се стартира чрез щракване върху иконата за редактиране (молив) точно над таблицата на Планиращия модул. Примерна екранна снимка е показана по-долу. </para>
      <screenshot>
            <screeninfo
>Редактор на последователности от заснемания </screeninfo>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="ekos_capture_sequence_editor.png" format="PNG"/>
                </imageobject>
                <textobject>
                    <phrase
>Редактор на последователности от заснемания</phrase>
                </textobject>
            </mediaobject>
        </screenshot>
        <para
>Редакторът е много подобен по използване и оформление на раздела за заснемане - въпреки че липсват всички контроли за действително заснемане на изображение. Редактирате задания по същия начин, по който го правите при заснемане, и зареждате или запазвате опашки от последователности също по същия начин (въпреки че има допълнителни бутони Зареждане и Запазване в редактора). </para>
        <important>
        <para
>Важно е да се разбере, че последователностите на заснемане разчитат до известна степен на филтърното колело и използваната камера (напр. имената на филтрите, възможните ISO стойности, ...). Редактор на последователности от заснемания, който не е свързан с драйверите на устройството, няма директен достъп до тази информация. Вместо това редакторът използва стойностите от последния път, когато разделът за заснемане се е свързал с неговите устройства. По този начин може да няма смисъл да се опитвате да създадете .esq файл за камера или филтърно колело , различни от последните, които са били свързани. Може да се наложи да изчакате, докато заданието на вашия Планиращ модул приключи и да редактирате този .esq директно в раздела за заснемане. </para>
        <para
>Също така се препоръчва да не презаписвате .esq файлове, когато задачите на Планиращия модул в момента използват същите тези файлове. (Добре е, ако Планиращият модул работи, но не изпълнява това задание.) Това може да накара Планиращия модул и модулите за заснемане да не се синхронизират, тъй като те четат файловете по различно време. Вместо това можете да ги запишете под друго име на файл и след това да редактирате заданието на планиращия модул, като използвате новото име на файл .esq. </para>
        </important>
     </sect3
>          
    </sect2>
    <sect2 id="workflow">
        <title
>Работен процес</title>

      <screenshot>
            <screeninfo
>Планиране + изпълнение на заданията </screeninfo>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="scheduler_planner.png" format="PNG"/>
                </imageobject>
                <textobject>
                    <phrase
>Планиране + изпълнение на заданията</phrase>
                </textobject>
            </mediaobject>
        </screenshot>
        <para
>Горното описание се занимава само с етапа <emphasis role="bold"
>Получаване на данни</emphasis
> от работния процес на обсерваторията. Цялостната процедура, която обикновено се използва в една обсерватория, може да бъде обобщена в три основни етапа: </para>
        <orderedlist>
            <listitem>
                <para
>Стартиране </para>
            </listitem>
            <listitem>
                <para
>Събиране на данни (включително предварителна обработка и съхранение) </para>
            </listitem>
            <listitem>
                <para
>Изключване </para>
            </listitem>
        </orderedlist>
    </sect2>

    <sect2 id="ekos-scheduler-startup-procedure">
        <title
>Процедура на стартиране</title>
        <para
>Процедурата за стартиране е уникална за всяка обсерватория, но може да включва: </para>
        <itemizedlist>
            <listitem>
                <para
>Включване на захранването на оборудването </para>
            </listitem>
            <listitem>
                <para
>Провеждане на проверки за безопасност/техническа изправност </para>
            </listitem>
            <listitem>
                <para
>Проверка на метеорологичните условия </para>
            </listitem>
            <listitem>
                <para
>Изключване на светлината </para>
            </listitem>
            <listitem>
                <para
>Контрол на вентилатора/светлината </para>
            </listitem>
            <listitem>
                <para
>Разпаркиране на купола </para>
            </listitem>
            <listitem>
                <para
>Разпаркиране на монтировката </para>
            </listitem>
            <listitem>
                <para
>и т.н. </para>
            </listitem>
        </itemizedlist>
        <para
>Модулът на Ekos за планиране инициира процедурата за стартиране само след като времето за стартиране за първото задание на модула за планиране приключи (времето за <emphasis
>подготовка</emphasis
> по подразбиране е 5 минути преди времето за <emphasis
>стартиране</emphasis
>). След като процедурата по стартиране приключи успешно, Планиращият модул избира целта на заданието и стартира процеса на последователност. Ако е зададен скрипт при начално стартиране, той първо трябва да бъде изпълнен. </para>
    </sect2>

    <sect2 id="ekos-scheduler-data-acquisition">
        <title
>Събиране на данни</title>
        <para
>В зависимост от избора на потребителя, типичният работен процес протича по следния начин: </para>
        <itemizedlist>
            <listitem>
                <para
>Завъртване на монтировката към целта. Ако е зададен FITS файл, той първо решава файловете и задава координатите за завъртването. </para>
            </listitem>
            <listitem>
                <para
>Цел за автоматично фокусиране. Процесът на автоматично фокусиране автоматично избира най-добрата звезда в кадъра и изпълнява алгоритъма за автоматично фокусиране с нея. </para>
            </listitem>
            <listitem>
                <para
>Следва извършване на решаване на изображение, синхронизиране на монтировката и завъртване към целевите координати. </para>
            </listitem>
            <listitem>
                <para
>Извършва се фокусиране след подравняване, тъй като кадърът може да се е разместил по време на процеса на решаване на изображение. </para>
            </listitem>
            <listitem>
                <para
>Извършване на калибриране и стартиране на автоматично гидиране: Процесът на калибриране автоматично избира най-добрата водеща звезда, извършва калибриране и стартира процеса на автоматично гидиране. </para>
            </listitem>
            <listitem>
                <para
>Зареждане на файла с последователности в <link linkend="ekos-capture"
>модула за заснемане</link
> и започване на процеса на създаване на изображения. </para>
            </listitem>
            <listitem>
                <para
>Проблеми с модула за координиране, като грешки в насочването или подравняването. Те могат да доведат до спиране на работа на модула за планиране и повторно планиране. </para>
            </listitem>
            <listitem>
                <para
>Забележка – някои от взаимодействията между модулите се инициират от самите модули, но се наблюдават от модула за планиране. Те включват обръщане на меридиан, автоматично фокусиране, започнато от промяна на температурата или изтичане на таймера, и изисквания за минимално отклонение в гидирането при заснемане. </para>
            </listitem>
        </itemizedlist>
    </sect2>

    <sect2 id="ekos-scheduler-shutdown">
        <title
>Изключване</title>
        <para
>След като заданието на планиращия модул приключи успешно, модулът избира следващото задание. Ако в този момент не може да бъде планирана задача, монтировката се паркира, докато може да се изпълни следваща задача. Освен това, ако следващото задание не е насрочено за изпълнение в рамките на зададен от потребителя период от време, планиращият модул извършва <emphasis
>превантивно</emphasis
> изключване, за да запази ресурсите и изпълнява процедурата за стартиране отново, когато настъпи времето за изпълнение. </para>
        <para
>Ако възникне непоправима грешка, обсерваторията започва процедура за изключване. Ако има скрипт за изключване, той ще се изпълни последен. </para>
        <para
>Следващият видеоклип демонстрира по-ранна версия на планиращия модул, но основните принципи са валидни и днес: </para>
        <mediaobject>
            <videoobject>
                <videodata contentdepth="315" contentwidth="560" fileref="https://www.youtube.com/embed/v8vIXD1kois"
></videodata>
            </videoobject>
            <caption>
                <para>
                    <phrase
>Модул на Ekos за планиране</phrase>
                </para>
            </caption>
        </mediaobject>
    </sect2>

    <sect2 id="ekos-scheduler-weather-monitoring">
        <title
>Следене на метеорологичните условия</title>
        <para
>Друга важна характеристика на всяка дистанционно управлявана роботизирана обсерватория е следене на метеорологичните условия. За актуализации на времето Ekos разчита на избрания драйвер за времето INDI, за да следи непрекъснато метеорологичните условия. За простота метеорологичните условия могат да бъдат обобщени в три състояния: </para>
        <orderedlist>
            <listitem>
                <para
><emphasis role="bold"
>Благоприятни</emphasis
>: Метеорологичните условия са ясни и оптимални за заснемане на изображения. </para>
            </listitem>
            <listitem>
                <para
><emphasis role="bold"
>Неблагоприятни</emphasis
>: Метеорологичните условия не са ясни, видимостта е лоша или частично възпрепятствана и не е подходяща за изображения. Всеки по-нататъшен процес на заснемане на изображения е спрян, докато времето се подобри. Предупредителният метеорологичен статус не представлява никаква опасност за оборудването на обсерваторията, така че обсерваторията се поддържа в работно състояние. Може да се конфигурира точното поведение, което да се предприеме при състояние Предупреждение. </para>
            </listitem>
            <listitem>
                <para
><emphasis role="bold"
>Опасни</emphasis
>: Метеорологичните условия са опасни за сигурността на обсерваторията и спирането трябва да започне възможно най-скоро. </para>
            </listitem>
        </orderedlist>
    </sect2>

    <sect2 id="ekos-scheduler-startup-and-shutdown-scripts">
        <title
>Скриптове при стартиране и изключване</title>
        <para
>Поради уникалността на всяка обсерватория, Ekos позволява на потребителя да избира скриптове за стартиране и изключване. Скриптовете се грижат за всички необходими процедури, които трябва да се извършат в етапите на стартиране и изключване. При стартиране Ekos изпълнява скриптовете при стартиране и продължава към останалата част от процедурата за стартиране (разпаркиране на купола/разпаркиране на монтировката), само ако скриптът завърши успешно. Обратно, процедурата за изключване започва с паркиране на монтировката и купола, преди да изпълни скрипта за изключване като последна процедура. </para>
        <para
>Скриптовете за стартиране и изключване могат да бъдат написани на всеки програмен език, който може да се изпълни на локалната машина. Трябва да върне 0, за да отчете успех, всяка друга съществуваща стойност се счита за индикатор за грешка. Стандартният изход на скрипта също е насочен към прозореца на регистъра на Ekos. Следният код е примерен стартиращ скрипт с Python: </para>
        <programlisting language="python"
>#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os
import time
import sys

print "Turning on observatory equipment..."
sys.stdout.flush()

time.sleep(5)

print "Checking safety switches..."
sys.stdout.flush()

time.sleep(5)

print "All systems are GO"
sys.stdout.flush()

exit(0)
        </programlisting>
        <para
>Скриптовете за стартиране и изключване трябва да са <emphasis
>изпълними</emphasis
>, за да може Ekos да ги извика (напр. използвайте <userinput
>chmod +x startup_script.py</userinput
>, за да маркирате скрипта като изпълним). Ekos модула за планиране позволява наистина проста роботизирана работа без необходимост от човешка намеса в която и да е стъпка от процеса. Без човешко присъствие става все по-критично да се възстановявате успешно от неуспехи във всеки етап от наблюдението. С помощта на &plasma; известия, потребителят може да конфигурира звукови аларми и известия по имейл за различните събития в модула за планиране. </para>
    </sect2>

    <sect2 id="ekos-scheduler-mosaic-Planner">
        <title
>Планиране на мозайка</title>
        <screenshot>
            <screeninfo
>Планиране на мозайка </screeninfo>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="mosaic_planner.png" format="PNG"/>
                </imageobject>
                <textobject>
                    <phrase
>Планиране на мозайка</phrase>
                </textobject>
            </mediaobject>
        </screenshot>
        <para
>Подобни на Хъбъл изображения със супершироко поле на <ulink url="http://darkskyart.com/?page_id=96"
>галактики</ulink
> и мъглявини са наистина вдъхновяващи и въпреки че са необходими големи умения за получаване такива изображения и за тяхната обработка; много известни имена в областта на астрофотографията използват оборудване, което не е <emphasis
>много</emphasis
> по-различно от вашето или моето. Подчертавам <emphasis
>много</emphasis
>, защото някои наистина разполагат с впечатляващо оборудване и специални обсерватории на стойност десетки хиляди долари. Въпреки това, много аматьори могат да получат звездни изображения с широко поле, като комбинират по-малки изображения в една голяма мозайка. </para>
        <para
>Често сме ограничени от зрителното поле (ЗП) на нашите камери и телескопи. Чрез увеличаване на ЗП чрез фокален редуктор или по-къса тръба, ние получаваме по-голямо покритие на небето за сметка на пространствената разделителна способност. В същото време много атрактивни цели с широко поле се разпростират в множество ЗП в небето. Без каквито и да било промени в оборудването ви за астрофотография е възможно да създадете супер мозаечно изображение, <emphasis
>сглобено</emphasis
> от няколко по-малки изображения. Има две основни стъпки за постигане на добро мозаечно изображение: </para>
        <orderedlist>
            <listitem>
                <para
>Заснемете множество изображения, обхващащи целта с известно припокриване между изображенията. Припокриването е необходимо, за да може софтуерът за обработка да подравнява и съединява подизображенията. </para>
            </listitem>
            <listitem>
                <para
>Обработете изображенията и ги <emphasis
>сглобете</emphasis
> в супер мозаечно изображение. </para>
            </listitem>
        </orderedlist>
        <para
>Втората стъпка се управлява от приложения за обработка на изображения като <ulink url="https://pixinsight.com"
>PixInsight</ulink
>, наред с други, и няма да бъде тема на обсъждане тук. Първата стъпка може да се извърши в модула на Ekos за планиране, където се създава мозайка, подходяща за вашето оборудване и в съответствие с желаното зрително поле. Ekos не само създава мозаечните панели за вашата цел, но също така създава съответните задания за наблюдение, необходими за заснемане на всички изображения. Това значително улеснява логистиката за заснемане на много изображения с различни филтри и калибриращи кадри в широка област на небето. </para>
        <para
>Модулът на Ekos за <guilabel
>планиране на мозайка</guilabel
> ще създаде множество задания в модула за планиране въз основа на централната цел. За да превключите планиращия модул, щракнете върху бутона <guibutton
>Планиране на мозайка</guibutton
> в модула на Ekos за планиране или лентата с инструменти на KStars INDI, както е илюстрирано на екранната снимка. Инструментът за мозайка рисува мозаечния панел директно върху картата на небето. Препоръчително е да активирате HiPS наслагване за най-добро изживяване. Планирането се състои от четири етапа: </para>
        <orderedlist>
            <listitem>
                <para
><emphasis role="bold"
>Потвърждаване на оборудването</emphasis
>: Ekos се опитва да зареди настройките на оборудването от INDI. Ако не успее, трябва да въведете настройките на вашето оборудване, включително фокусното разстояние на вашия телескоп в допълнение към ширината, височината и размерите на пикселите на камерата. Настройките се запазват за бъдещи сесии. </para>
            <screenshot>
            <screeninfo
>Потвърждаване на оборудването </screeninfo>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="mosaic_confirm_equipment.png" format="PNG"/>
                </imageobject>
                <textobject>
                    <phrase
>Потвърждаване на оборудването</phrase>
                </textobject>
            </mediaobject>
        </screenshot>
            </listitem>
            <listitem>
                <para
><emphasis role="bold"
>Напасване на мрежата</emphasis
>: Изберете размерите на мозаечния панел и процента на припокриване. Мозаечният панел се актуализира съответно на картата на небето. Регулирайте ъгъла на позиция, за да съответства на желаната ориентация на мозайката в небето. Ако ъгълът на позициониране е различен от обичайната ориентация на вашата камера, може да се наложи да завъртите камерата ръчно или чрез механизиран ротатор, когато се изпълняват заданията на Планиращия модул. Прозрачността на плочката се изчислява автоматично по подразбиране, но може да бъде изключена и коригирана ръчно. За да изчислите мозаечното поле от броя на плочките, щракнете върху бутона <guibutton
>Покриване на ЗП</guibutton
>. Панелът с мозайка може да бъде центриран в картата на небето, като щракнете върху бутона <guibutton
>Повторно центриране</guibutton
>. </para>
                <screenshot>
            <screeninfo
>Избор на мрежа </screeninfo>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="mosaic_select_grid.png" format="PNG"/>
                </imageobject>
                <textobject>
                    <phrase
>Избор на мрежа</phrase>
                </textobject>
            </mediaobject>
        </screenshot>
        <para
>Голямото припокриване ще улесни сглобяването на кадрите по време на последваща обработка, но изисква повече панели, за да покрие желаната площ. Въпреки това, ако вече знаете минималното количество подкадри, които вашият алгоритъм за отхвърляне ще използва по време на последваща обработка, може да искате да увеличите припокриването, за да постигнете това количество в зоните, обхванати от множество панели. Например, мозаечна решетка 4x4 със 75% припокриване има 16 подкадъра, покриващи централното пресичане, което е достатъчно за отхвърляне на Winsorized Sigma. Въпреки че получената серия няма еднаква височина във всички части на крайния кадър, този метод ви дава контрол върху съотношението сигнал/шум и ви позволява да предоставите контекст на вашата цел, като същевременно извършвате относително малък брой заснемания. </para>
        <para
>Голямото число, показано в ъгъла на всеки мрежов панел, представлява реда, в който ще бъдат заснети панелите. Изборът по подразбиране на S-образна форма (запад-изток и след това редуващи се движения високо-ниско/ниско-високо) осигурява минимално движение на монтировката по време на наблюдение. Премахнете отметката от <guilabel
>Минимално преместване на монтировката</guilabel
>, за да се върнете само към движение запад-изток/високо-ниско. Координатите на всеки панел се изобразяват в центъра им като градуси, минути и секунди. И накрая, ъгълът, под който всеки панел се завърта от центъра на мозайката, се показва в долната част. Ако вашето зрително поле е голямо или ако вашата мозайка е разположена близо до небесен полюс, може да забележите, че визуализираните панели започват да се въртят видимо поради хоризонталното им положение или високата им деклинация. Използвайте <guilabel
>припокриване</guilabel
>, за да сте сигурни, че панелите покриват правилно желаните граници на рамката. </para>
        <screenshot>
            <screeninfo
>Инструмент за планиране на мозайка - голямо завъртане </screeninfo>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="mosaic_close_pole.png" format="PNG"/>
                </imageobject>
                <textobject>
                    <phrase
>Инструмент за планиране на мозайка - голямо завъртане</phrase>
                </textobject>
            </mediaobject>
        </screenshot>
            </listitem>
            <listitem>
                <para
><emphasis role="bold"
>Напасване на мрежата</emphasis
>: Коригирайте центъра на мрежата, като въведете ръчно центъра на J2000 или като плъзнете центъра на мозайката върху картата на небето. </para>
            <screenshot>
            <screeninfo
>Напасване на мрежата </screeninfo>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="mosaic_adjust_grid.png" format="PNG"/>
                </imageobject>
                <textobject>
                    <phrase
>Напасване на мрежата</phrase>
                </textobject>
            </mediaobject>
        </screenshot>
            </listitem>
            <listitem>
                <para
><emphasis role="bold"
>Създаване на задания</emphasis
>: Последната стъпка е да изберете файла с последователността и директорията за съхраняване на изображенията. Целевото поле може да се попълва автоматично, но може да се променя по желание. Изберете стъпките, които всяко задание на Планиращия модул трябва да изпълни последователно (Проследяване -> Фокус -> Подравняване -> Насочване -> Заснемане) и настройте честотата на рутинните процедури за автоматично подравняване и фокусиране, които трябва да се изпълняват по време на мозаечната операция. Например, ако <guilabel
>Подравняване на всеки</guilabel
> е зададено на 2 задания на Планиращия модул, тогава първото задание ще изпълни астрометричното подравняване, докато второто задание ще го пропусне. Когато се изпълни третата задача, подравняването се извършва отново и така нататък. </para>
                <para
>Ако искате различните задания за мозаечни плочки да се редуват, след това попълнете името на групата с идентификатор, който всички задания за плочки ще споделят, и изберете повтарящо се условие за завършване. </para>
            <screenshot>
            <screeninfo
>Създаване на задания </screeninfo>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="mosaic_create_jobs.png" format="PNG"/>
                </imageobject>
                <textobject>
                    <phrase
>Създаване на задания</phrase>
                </textobject>
            </mediaobject>
        </screenshot>
            </listitem>
        </orderedlist
>                
        <para
>Щракнете върху <guibutton
>Създаване на задания</guibutton
>, за да генерирате задания за модула за планиране на мозайка и да ги добавите към опашката на графика. Можете допълнително да редактирате заданията поотделно, както бихте направили с нормалните задания на модула за планиране. </para>
    </sect2>
</sect1>
