<?xml version="1.0" encoding="UTF-8"?>
<sect1 id="ekos-focus">
  <title
>Фокус</title>

  <indexterm>
    <primary
>Инструменти</primary>

    <secondary
>Ekos</secondary>

    <tertiary
>Фокус</tertiary>
  </indexterm>

  <sect2 id="focus-theory">
    <title
>Теоретични основи на операциите</title>

    <screenshot>
      <screeninfo
>Фокусиране с Ekos </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="ekos_focus.png" format="PNG" width="75%"/>
        </imageobject>

        <textobject>
          <phrase
>Фокусиране с Ekos</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>За да фокусира изображение, Ekos трябва да създаде числен метод за измерване на това, колко <emphasis
>добър</emphasis
> е вашият фокус. Лесно е, когато погледнете изображение и можете да го видите като <emphasis
>нефокусирано</emphasis
>, тъй като човешкото око е много добро в това, но <emphasis
>как</emphasis
> Екос може да го различи? </para>

    <para
>Най-изпитаният и тестван метод е радиусът на половин светлинен поток, половината осветеност (HFR), който е мярка за ширината в пиксели, броени от центъра на звездата, докато натрупаният интензитет стане половината от общата осветеност на звездата. Докато се приближавате към точката на оптимален фокус, HFR става по-малък, достигайки минимум в точката на фокусиране, преди да се увеличи, когато започнете да се отдалечавате от фокуса. HFR се използва за много различни видове оборудване и се оказа стабилен при широк диапазон от обстоятелства. </para>

    <para
>В допълнение към HFR, Ekos поддържа други мерки за фокусиране, включително коригирано измерване за HFR, FWHM, брой звезди и мощност на Фурие. Препоръчително е да започнете с HFR и когато придобиете опит във фокусирането на оборудването, да опитате другите методи. </para>

    <para
>След като Ekos обработи изображение, той избира или една звезда и започва да измерва HFR, или избира набор от звезди, отговарящи на критериите, които са зададени и изчислява средна HFR. Той може автоматично да избира звезди или можете да изберете една звезда ръчно. Препоръчително е да позволите на Ekos да избере набор от звезди. </para>

    <para
>Ekos поддържа 4 различни алгоритъма за фокусиране: Единично линейно преминаване, Линеен, Итеративен, Полиномен. Препоръчителният алгоритъм е единично линейно преминаване. </para>

    <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Единично линейно преминаване</emphasis
>: В алгоритъма единично линейно преминаване Ekos установява V-крива и напасва кривата към данните, за да намери решението за фокусиране. След това се придвижва до изчисления минимум. Основните характеристики включват: </para>

        <itemizedlist>
          <listitem>
            <para
>Алгоритъмът компенсира луфта на фокусера. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът е бърз, отнема едно преминаване, за да идентифицира оптималния фокус. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът използва по-усъвършенствано напасване на кривата, за да определи оптималната позиция на фокуса. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът е позволява мощен потребителски контрол върху много параметри като размер на стъпката, брой стъпки и начини за справяне с извънредни стойности в точките от данни. </para>
          </listitem>
        </itemizedlist>
      <para
>Ако фокусиращото устройство извършва точно повтарящи се операции, т.е. когато му бъде дадена команда да отиде в позиция X, той винаги отива в една и съща позиция, тогава този алгоритъм ще бъде най-добрият за използване.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Линеен</emphasis
>: В линейния алгоритъм Ekos се придвижва навън от началната си точка, след което се придвижва навътре, като взема обикновени точки от данни през точката на оптимален фокус и след това още навътре, за да начертае V- крива. След това напасва квадратичната крива към точките от данни и изчислява точката на оптимален фокус. След това отново излиза извън точката на оптимален фокус, намалява наполовина размера на стъпката и се придвижва отново за второ преминаване. Той следва кривата от първото преминаване и намира минималната HFR. Поради произволността на измерванията на HFR, той използва % толеранс, за да реши кога е намерил решение. Основните характеристики включват: </para>

        <itemizedlist>
          <listitem>
            <para
>Алгоритъмът компенсира луфта на фокусера. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът е бавен, отнема 2 преминавания, за да идентифицира оптималния фокус. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът използва напасване на кривата, за да определи оптималната позиция на фокуса при преминаване 1, но след това използва % толеранс, за да се опита да спре възможно най-близо до тази HFR при преминаване 2. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът позволява потребителски контрол върху много параметри като размер на стъпката и брой стъпки. </para>
          </listitem>
        </itemizedlist>
        <para
>Ако фокусиращото устройство се държи по несъгласуван начин, т.е. когато се заповяда да отиде в позиция X, има променливост в позицията, към която отива, тогава този алгоритъм ще бъде най-добрият за използване, тъй като има известна вградена толерантност към тази променливост.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Итеративен</emphasis
>: В итеративния алгоритъм Ekos работи итеративно, като се движи на отделни стъпки, определени първоначално от конфигурирания от потребителя размер на стъпката и по-късно от наклона на V-кривата, за да се доближи до оптималната позиция на фокус, където след това сменя предавките и извършва по-малки, по-фини движения, за да достигне оптималния фокус. Процесът на фокусиране спира, когато измерената HFR е в рамките на конфигурируемия толеранс на минималната записана HFR в процеса. С други думи, всеки път, когато процесът започне да търси решение в рамките на тясно ограничен диапазон, той проверява дали текущият HFR е в рамките на % разлика в сравнение с минималния записан HFR и ако това условие е изпълнено, тогава процесът на автоматично фокусиране се счита за успешен. Стойността по подразбиране е зададена на 1% и е достатъчна за повечето ситуации. Опциите за стъпка указват броя на началните деления, които трябва да премести фокусиращият елемент. Ако изображението е силно разфокусирано, задаваме големина на стъпката (т.е. по-голяма от 250). От друга страна, ако фокусът е близо до оптималния фокус, задаваме размера на стъпката в по-разумен диапазон (по-малко от 50). Необходими са проби и грешки, за да се намери най-доброто начално делене или тик, но Ekos го използва само за първото движение на фокуса, тъй като всички следващи движения зависят от изчисленията на наклона на V-кривата. Основните характеристики включват:</para>

        <itemizedlist>
          <listitem>
            <para
>Алгоритъмът разчита на фокусиращото устройство да има добре контролиран луфт. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът може да бъде бърз, като се използва минимален брой стъпки. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът работи на базата на парадигмата "достатъчно добър", при което, той спира, когато HFR е в рамките на, % толеранс на възприемания минимум. </para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Полиномен</emphasis
>: В полиномния алгоритъм процесът започва в итеративен режим, но след като премине от другата страна на V-кривата (след като стойностите на HFR започнат да се увеличават отново след първоначално намаляване за известно време), тогава Ekos извършва напасване на квадратичната крива, за да намери решение, което предвижда минималната възможна HFR позиция. Основните характеристики включват:</para>

        <itemizedlist>
          <listitem>
            <para
>Алгоритъмът разчита на фокусиращото устройство да има добре контролиран луфт. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът може да бъде бърз, като се използва минимален брой стъпки. </para>
          </listitem>

          <listitem>
            <para
>Алгоритъмът използва напасване на кривата, за да определи оптималната позиция на фокуса. </para>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </sect2>

  <sect2 id="optical-train-group">
    <title
>Оптична система</title>

    <screenshot>
      <screeninfo
>Оптична система </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="optical_train_group.png" format="PNG"
                     width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Настройки на оптична система</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Групата Оптична система показва текущо избраната оптична система. По подразбиране това ще бъде основната система за създаване на изображения, но могат да бъдат избрани и други компоненти. Групата се състои от:</para>

    <itemizedlist>
      <listitem>
        <para
><guibutton
>Система</guibutton
>: Оптичната система, използвана в момента от раздела Фокус. Задръжте курсора на мишката върху това поле за по-подробно описание на избраната система.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Бутон Редактиране</guibutton
>: Извежда диалоговия прозорец Оптична система за преглед и евентуална промяна на оптичните компоненти.</para>
      </listitem>
    </itemizedlist>

    <para
>Параметрите на фокуса се записват автоматично за всяка оптична система.</para>
  </sect2>

  <sect2 id="focus-focuser-group">
    <title
>Група на фокусера</title>

    <screenshot>
      <screeninfo
>Настройки на фокусера </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focuser_group.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Настройки на фокусер</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Поддържат се всички INDI-съвместими фокусери. Препоръчително е да използвате <emphasis role="bold"
>абсолютни</emphasis
> фокусери за най-добри резултати, тъй като тяхната абсолютна позиция е известна при включване. В INDI <emphasis
>нулевата</emphasis
> позиция на фокусера е, когато изтеглящата се тръба е <emphasis role="bold"
>напълно прибрана</emphasis
>. При фокусиране <emphasis
>навън</emphasis
> позицията на фокусера се увеличава и намалява при фокусиране <emphasis
>навътре</emphasis
>. Поддържат се следните типове фокусери: </para>

    <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Абсолютни</emphasis
>: Фокусери с абсолютна позиция като RoboFocus, MoonLite, ASI ZWO </para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Относителни</emphasis
>: Фокусери за относителна позиция. </para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Време-базирани</emphasis
>: Фокусери, базирани на време без обратна връзка за позицията, които регулират позицията на фокуса, като се движат за определен период от време. </para>
      </listitem>
    </itemizedlist>

    <para
>Полето <guibutton
>Фокусер</guibutton
> съдържа фокусера в прикачената оптична система. </para>

    <para
>За абсолютни и относителни фокусери размерът на стъпката е в единици <emphasis
>деления</emphasis
>, а за прости или базирани на време фокусери размерът на стъпката е в <emphasis
>милисекунди</emphasis
>. След това бутоните <guibutton
>Навътре</guibutton
> и <guibutton
>Навън</guibutton
> могат да се използват за преместване на фокусeра с броя деления, определени в полето <guibutton
>Размер на началната стъпка</guibutton
> в раздел <link linkend="focus-mechanics"
>Механика</link
>.</para>

    <para
>Полетата Стъпки имат 2 части:</para>
    <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Полето от ляво</emphasis
> показва текуща позиция на фокусера. Това не е поле за въвеждане и се актуализира при преместване на фокусера.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Полето от дясно</emphasis
> е поле за въвеждане и позволява на потребителя да въведе желана позиция. Когато се натисне бутонът <guibutton
>Отиване до позицията на абсолютен фокус</guibutton
>, фокусът се премества от текущата си позиция до позицията, посочена в това поле. </para>
      </listitem>
    </itemizedlist>

    <para
>При стартиране полето в ляво ще указва текущата позиция на фокусера. Полето в дясно приема по подразбиране запазените настройки на оптичната система. Това е полезно, например, ако имате няколко оптични системи, които използват един и същ фокусер, но решават на различни позиции. В този случай полето от дясната страна ще съдържа последната постоянна стойност за това поле за избрания оптичен компонент. И така, след смяна на оборудването и избиране на оптичната система, ако потребителят натисне бутона <guibutton
>Отиване до абсолютен фокус</guibutton
>, тогава фокусиращото устройство ще бъде преместено на добра позиция, от която да започне фокусирането.</para>

    <para
>Бутонът <guibutton
>Отиване до позицията на фокуса</guibutton
> премества фокусера на позицията в полето на стъпките с дясна ръка. </para>

    <para
>Бутонът <guibutton
>Спиране на движението на фокусера</guibutton
> спира текущото движение на фокусера. </para>

    <para
>Бутонът <guibutton
>Автоматичен фокусиране</guibutton
> стартира изпълнение на автофокус. Бутонът <guibutton
>Спиране</guibutton
> се използва за спиране на изпълнението. </para>

    <para
>Бутонът <guibutton
>Заснемане на изображение</guibutton
> ще заснеме кадър въз основа на текущите настройки в <link linkend="focus-ccd-filter-wheel"
> Камера и филтърно колело</link
>. Бутонът <guibutton
>Стартиране на кадриране</guibutton
> ще започне многократно да заснема кадри, докато не бъде натиснат бутонът <guibutton
>Стоп</guibutton
>. </para>

    <para
>Някои от алгоритмите за фокусиране ще се опитат да се справят със стартирането далеч от точката на оптимален фокус, но за предвидими резултати е най-добре да започнете от позиция, в която сте приблизително на фокус. За настройка за първи път <guibutton
>Стартиране на кадриране</guibutton
> може да се използва заедно с бутоните <guibutton
>Навътре</guibutton
> и <guibutton
>Навън</guibutton
>, за да регулирате позицията на фокуса и да намалите грубо HFR на звездите в заснетите изображения. Когато кадрирането се използва по този начин, графиката на <link linkend="focus-v-curve"
>V-кривата</link
> се променя, за да покаже времеви серии от кадри и свързаните с тях HFR. Това прави процеса на кадриране много по-лесен за изпълнение.</para>

    <para
>Ако сте съвсем нов в астрономията, винаги е добра идея да се запознаете с оборудването си на дневна светлина. Това включва получаване на приблизителната позиция на фокус върху отдалечен обект. Това ще осигури добра начална позиция за фокусиране върху звездите, когато настъпи нощта.</para>
  </sect2>

  <sect2 id="focus-ccd-filter-wheel">
    <title
>Група Камера и филтърно колело</title>

    <screenshot>
      <screeninfo
>Група Фокус на камерата и филтърно колело </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_ccdfw_group.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Група Фокус на камерата и филтърно колело</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Този раздел с параметри се занимава с настройките на камерата и филтъра, които да използвате при фокусиране.</para>

    <para
>Горният ред контроли позволява да се задават параметри на CCD.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Експ</guilabel
>: време на експозиция в секунди.</para>
      </listitem>

      <listitem>
        <para
>Бутонът <guibutton
>Превключване на цял екран</guibutton
> изважда прозореца, показвайки фокусната рамка в отделен прозорец. Натискането му отново го връща в рамките на прозореца за фокусиране.</para>
      </listitem>

      <listitem>
        <para
>Бутонът <guibutton
>Показване във визуализатора на FITS</guibutton
> отваря отделен прозорец на визуализатор на FITS за показване на кадъра на фокуса, в допълнение към фокусното изображение, показано в фокусния прозорец.</para>
      </listitem>

      <listitem>
        <para
>Бутонът <guibutton
>Видео в реално време</guibutton
> извежда съответния изскачащ прозорец.</para>
      </listitem>
    </itemizedlist>

    <para
>Следващият ред от контроли позволява да се задават параметри на камерата. Изберете стойност от падащото меню за групиране и след това задайте усилването на камерата или ISO.</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Групиране (Binning)</guilabel
>: Увеличаването на групирането ще промени мащаба на изображението, както и ще доведе до по-ярки пиксели. Обикновено си струва групиране над 1x1 само ако мащабът на изображението ви е свръх семплиран, при което увеличаването на мащаба на изображението не води до загуба на разделителна способност. Ако искате да увеличите яркостта на звездата, опитайте да увеличите експозицията и/или усилването. Ако не сте сигурни бинирайте 1x1.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Усилване</guilabel
>: Задайте усилването за камерата, използвана за фокусиране. Стойността трябва да е достатъчно висока, за да даде ясен звезден модел, но не толкова висока, че да създава твърде много шум, който да пречи на операцията на фокусиране. Ще са необходими известни експерименти, за да се намери оптималната стойност. Ако не сте сигурни откъде да започнете, опитайте unity gain за вашата камера и коригирайте от там.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>ISO</guilabel
>: Задайте ISO за камерата, която се използва за фокусиране. Ще са необходими известни експерименти, за да се намери оптималната стойност.</para>
      </listitem>
    </itemizedlist>

    <para
>Третият ред от контроли се занимава с източника на температура и филтъра, ако има такъв:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Темп.Изт.</guilabel
>: Изберете източник на температура от падащото меню. Отдолу се показват текущата температура от избрания източник на температура и промяната в температурата между момента, в който е завършен последният успешен автофокус, и текущата температура. Обичайна практика е да се фокусира отново след значителни температурни промени, които променят фокусната точка на телескопа.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Филтър</guilabel
>: Изберете филтъра, който да използвате.</para>

        <para
>За да започнете да фокусирате, вероятно ще бъде по-лесно да изберете филтъра, който пропуска най-много светлина, например филтър Lum. Щракнете върху иконата на филтъра <inlinemediaobject
><imageobject
><imagedata fileref="view-filter.png" format="PNG"/></imageobject
></inlinemediaobject
>, за да стартирате <link linkend="focus-filter-settings"
>Настройки филтър</link
>. Това позволява задаването на определен брой параметри за всеки филтър, които да се използват по време на автофокусиране.</para>
      </listitem>

      <listitem>
        <para
>Бутонът <guibutton
>Нулиране</guibutton
> ще превърне подкадъра за фокусиране в цял кадър.</para>
      </listitem>
    </itemizedlist>
  </sect2>

  <sect2 id="focus-tools">
    <title
>Група Инструменти</title>

    <screenshot>
      <screeninfo
>Група Инструменти за фокус </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_tools_group.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Група Инструменти за фокус</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>В този раздел са описани наличните към момента инструменти за фокусиране.</para>

    <itemizedlist>
      <listitem>
        <para
>Бутонът <guibutton
>Инспектор на аберациите</guibutton
> стартира изпълнение на <link linkend="focus-aberration-inspector"
>Инспектор на аберации</link
>. </para>
      </listitem>
      <listitem>
        <para
>Бутонът <guibutton
>CFZ</guibutton
> стартира инструмента <link linkend="focus-advisor"
>Критична фокусна зона</link
>. </para>
      </listitem>
      <listitem>
        <para
>Бутонът <guibutton
>Помощник</guibutton
> стартира инструмента <link linkend="focus-advisor"
>Помощник за фокусиране</link
>. </para>
      </listitem>
    </itemizedlist>
  </sect2>

  <sect2 id="focus-options">
  <title
>Настройки на фокуса</title>

  <screenshot>
    <screeninfo
>Настройки на фокус </screeninfo>

    <mediaobject>
      <imageobject>
        <imagedata fileref="focus_options.png" format="PNG" width="50%"/>
      </imageobject>

      <textobject>
        <phrase
>Настройки на фокуса</phrase>
      </textobject>
    </mediaobject>
  </screenshot>

  <para
>Достъпът до параметрите за конфигуриране на Фокус се осъществява чрез натискане на <guibutton
>Настройки...</guibutton
>. Това стартира диалоговия прозорец Настройки с три панела:</para>

  <itemizedlist>
    <listitem>
      <para
><link linkend="focus-settings"
>Настройки</link
>: Това са общите настройки за фокус.</para>
    </listitem>
    <listitem>
      <para
><link linkend="focus-process"
>Процес</link
>: Параметри, свързани с процеса на автоматичното фокусиране.</para>
    </listitem>
    <listitem>
      <para
><link linkend="focus-mechanics"
>Механика</link
>: Параметри на механиката, свързана с фокусирането.</para>
    </listitem>
  </itemizedlist>

  <para
>Параметрите се съхраняват за всяка оптична система. Това позволява да се съхраняват конфигурации за различно оборудване. Параметрите се съхраняват когато се променят, така че при стартиране се зарежда последната използвана конфигурация за избраната оптична система.</para>

  <sect3 id="focus-settings">
    <title
>Настройки на фокуса</title>

    <screenshot>
      <screeninfo
>Настройки на фокус </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_settings.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Настройки на фокуса</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Параметри на общи настройки:</para>
    <itemizedlist>
      <listitem>
        <para
><guilabel
>Автоматичен избор на звезда</guilabel
>: Тази настройка е уместна само ако е избран <guilabel
>Подкадър</guilabel
>. В този случай, ако е избрано <guilabel
>Автоматично избиране на звезда</guilabel
>, тогава Ekos ще избере звездата, която да използва за фокус; в противен случай потребителят ще трябва ръчно да избере звездата с помощта на визуализатор на FITS.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Преустановяване на гидирането</guilabel
>: Задайте тази опция, за да се спре гидирането по време на изпълнение на автофокус. Целта на това е да се предотвратят проблеми с разфокусирани звезди по време на процеса на фокусиране, когато например направляващата оптика е прикрепена към основния телескоп с помощта на Off-Axis Guider (OAG) - оптичен елемент (призма), насочващ основния лъч към гидиращата камера.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Тъмен кадър</guilabel
>: Маркирайте тази опция, за да извършите изваждане на тъмен кадър. Тази опция може да бъде полезна при изображения с шум, където предварително заснетото тъмно изображение се изважда от фокусираното изображение преди допълнителна обработка.</para>

        <para
>Ако горещите пиксели причиняват проблеми с фокуса, изберете Тъмни кадри и задайте обикновена основна тъмен кадър или Карта на дефектите.</para>

        <para
>Тъмните кадри се използват от фокуса, подравняването и насочването. Вижте възможностите на тъмните кадри в <link linkend="ekos-capture"
>модула Заснемане</link
> за повече подробности, как да настроите тъмни кадри.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Пълно поле</guilabel
>: Изберете, за да използвате пълното поле на камерата. В този режим фокусът автоматично ще избере няколко звезди за използване при изпълнение на автофокус. Алтернативата на това е <guilabel
>Под</guilabel
>.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Подкадър</guilabel
>: Изберете, за да използвате една звезда за процеса на автоматично фокусиране. Алтернативата на това е <guilabel
>Пълно поле</guilabel
>, където множество звезди ще бъдат използвани от автофокуса. В зависимост от настройката на <guilabel
>Автоматично избиране на звезда</guilabel
> или потребителят, или Ekos ще изберат звездата.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Правоъгълник</guilabel
>: Задава размера на правоъгълника, използван за рамка на фокусната звезда, когато се използва <emphasis role="bold"
>Подкадър</emphasis
>. Увеличете, ако имате много големи звезди. За фокуса на Бахтинов размерът на правоъгълника може да се увеличи още повече, за да обхване по-добре дифракционния шаблон на Бахтинов.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Единици за показване</guilabel
>: Изберете единиците за показване на V-кривата на автофокуса, когато е избрано HFR или FWHM. Поддържат се <emphasis role="bold"
>пиксели</emphasis
> и <emphasis role="bold"
>дъгови секунди</emphasis
>.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Стабилизиране на гидирането</guilabel
>: Тази опция се използва заедно с <guilabel
>Преустановяване на гидирането</guilabel
>. Тя позволява на всякакви вибрации в оптичната линия да се уталожат, като изчака толкова секунди след приключване на процеса на автоматично фокусиране, преди да се рестартира насочването.</para>
      </listitem>
    </itemizedlist>

    <para
>Параметри на настройки на маска:</para>

    <para
>Тези контроли се отнасят до <emphasis role="bold"
>Настройките за маскиране</emphasis
>, които да се използват в режим <guilabel
>Пълно поле</guilabel
>. Тези ефекти могат да се видят във визуализатора <link linkend="focus-display"
>FITS</link
>.</para>
    <itemizedlist>
      <listitem>
        <para
><guilabel
>Използване на всички звезди за фокусиране</guilabel
>: Изберете тази опция, ако всички звезди на полето трябва да се вземат предвид за фокусиране.</para>
      </listitem>
	    
      <listitem>
        <para
><guilabel
>Пръстенова маска</guilabel
>: Тази опция предоставя две полета за въвеждане, които заедно определят форма на поничка над зрителното поле на камерата. Звездите, попадащи извън поничката, не се обработват. Задаването на вътрешна стойност над 0% кара звездите в центъра на зрителното поле да бъдат отхвърлени. Това може да бъде полезно, например, за да избегнете използването на звезди в целта на изображението (например галактика) за целите на фокусирането. Задаването на външна стойност под 100% кара звездите в краищата на зрителното поле да бъдат отхвърлени по време на фокусиране. Това може да бъде полезно, ако нямате изравнително поле до краищата на вашето зрителното поле.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Мозаечна маска</guilabel
>: Мозайка 3x3 е съставена от плочки от центъра на изображението, неговите ъгли и от краищата. Тази опция е полезна, ако искате да проверите производителността на оптиката - може да знаете това от скрипта PixInsight на инспектора на аберациите. Размерът на плочката може да бъде конфигуриран в проценти от ширината на рамката, като стойността на разделителя определя разстоянието между плочките.</para>
        <para
>Има четири случая на използване на Мозаечна маска: <itemizedlist>
            <listitem>
                <para
>Проверка на фокуса във всички части на сензора: Маската позволява лесна визуална проверка и сравнения на звезди в центъра, ъглите и краищата на сензора. Това е особено полезно за оптика, която показва аберация, ако фокусът не е постигнат на 100%.</para>
            </listitem>
            <listitem>
                <para
>Коригиране на наклона на изображението: особено големите сензори са много чувствителни към неправилно разстояние и накланяне на сензора. В такива случаи изображението показва аберация, особено в ъглите на изображението. Ако всички ъгли показват същия ефект, разстоянието трябва да се коригира. Ако аберациите в ъглите се различават, това обикновено е резултат от наклонен сензор.</para>
            </listitem>
            <listitem>
                <para
>Колимиране на нютонови телескопи: проверката на кадри в разфокусирано състояние обикновено се използва за колимиране на нютонови телескопи. Вижте например <ulink url="https://teleskop-austria.at/information/pdf/JUS_Photonewton_Collimation_Primer_EN.pdf"
> The Photonewton Collimation Primer</ulink
> на Tommy Nawratil за повече подробности.</para>
            </listitem>
            <listitem>
                <para
>Изпълнение на инструмента <link linkend="focus-aberration-inspector"
>Инспектор на Аберациите</link
>.</para>
            </listitem>
          </itemizedlist
></para>
      </listitem>
    </itemizedlist>

    <para
>Параметри на адаптивен фокус:</para>

    <para
>Следващият набор от контроли се отнася до <emphasis role="bold"
>Адаптивен фокус</emphasis
>. Идеята тук е да поддържате фокуса на телескопа чрез адаптиране на позицията на фокусера въз основа на промените в условията на околната среда, без да се налага да извършвате пълен автофокус. Вижте раздела <link linkend="focus-adaptive"
>Адаптивен фокус</link
> за повече подробности.</para>

    <para
>Например, когато температурата се промени по време на сесия за изображения, точката на фокусиране ще се промени. Чрез вземане на проби от температурата между подкадрите е възможно първо да се изчисли промяната в температурата и след това да се преобразува това в брой деления на движение на фокуса, които да се прилагат между подкадрите.</para>

    <para
>За да използвате <emphasis role="bold"
>Адаптивен фокус</emphasis
>, е необходимо да настроите някои данни за вашата система. По-конкретно, трябва да кажете на Ekos колко деления (и в каква посока) да премести фокусера, когато условията на околната среда се променят. Това е описано в изскачащия прозорец <link linkend="focus-filter-settings"
>Настройки на филтъра</link
>. Изскачащият прозорец се стартира чрез щракване върху иконата на филтъра<inlinemediaobject
><imageobject
><imagedata fileref="view-filter.png" format="PNG"/></imageobject
></inlinemediaobject
>.</para>

    <para
>Налични са следните контроли: <itemizedlist>
            <listitem>
              <para
><guilabel
>Адаптивен фокус</guilabel
>: Изберете тази опция, за да активирате <emphasis role="bold"
>Адаптивен фокус</emphasis
>.</para>
            </listitem>

            <listitem>
              <para
><guilabel
>Минимално движение</guilabel
>: Минималното разрешено движение на адаптивния фокус.</para>
            </listitem>

            <listitem>
              <para
><guilabel
>Адаптиране на начална позиция</guilabel
>: Поставете отметка, за да позволите на адаптивния фокус да изчисли началната позиция за изпълнение на автофокус. Началната позиция е последната добра позиция за решаване на избрания филтър, адаптиран за промени в околната среда.</para>

              <para
>Например, ако текущата позиция на фокуса е 1000, температура = 4C и ако е избран Червеният филтър (последната добра позиция на фокуса за Червено е 990 @ 5C и Ekos е конфигуриран да се движи с +3 <guilabel
>деления / °C</guilabel
>). Тогава, ако Адаптиране на стартова позиция е изключена, автофокусът ще започне от 1000. Ако Адаптиране на стартова позиция е включен, автофокусът ще започне от 990 + (5 - 4)* 3 = 993.</para>

              <para
>Тази функция е полезна, за да се гарантира, че автофокусът започва близо до фокусната точка, което ще означава по-симетрична V-крива. Това е особено полезно при смяна между филтри, които имат големи разлики във фокусните точки.</para>

              <para
>Възможно е да използвате тази функция самостоятелно без адаптивен фокус. Просто поставете отметка в квадратчето и оставете отметките за градус C на нула. По този начин началната позиция на автофокуса ще зависи от филтъра и ще стартира всеки автофокус в точката на фокусиране на последния успешен автофокус за този филтър.</para>
            </listitem>

            <listitem>
              <para
><guilabel
>Максимално общо движение</guilabel
>: Максималното общо движение на фокусера при Адаптивен фокус , което е разрешено в сесията за наблюдение. Целта на тази функция е да предпази адаптивния фокус, в случай че той избяга. Например, ако източникът на температура се повреди и върне лоши температурни показания, докато оборудването е без надзор, това може да доведе до опит на адаптивния фокус да извърши големи движения на фокусиращото устройство.</para>

              <para
>Ако максималното общо движение бъде достигнато, тогава <guilabel
>Адаптивният фокус</guilabel
> не е активен, докато не бъде активиран отново ръчно от потребителя.</para>
            </listitem>
        </itemizedlist>
    </para>
  </sect3>

  <sect3 id="focus-process">
    <title
>Процес на фокусиране</title>

    <screenshot>
      <screeninfo
>Процес на фокусиране </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_process.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Процес на фокусиране</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Параметри на процеса на фокусиране:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Разпознаване</guilabel
>: Изберете алгоритъм за разпознаване на звезда. Всеки алгоритъм има своите силни и слаби страни. Препоръчително е да използвате SEP, освен ако нямате специализирана употреба. Налични са следните:</para>

        <itemizedlist>
          <listitem>
            <para
><emphasis role="bold"
>SEP</emphasis
>:Source Extraction and Photometry Извличане на източник и фотометрия, вградена библиотека. Това е стойността по подразбиране.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Центроид</emphasis
>: Метод за извличане, базиран на оценка на звездната маса около пиковете на сигнала.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Градиент</emphasis
>: Модел за извличане на един източник, базиран на филтъра Sobel. </para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Праг</emphasis
>: Алгоритъм за откриване на един източник въз основа на стойности на пиксели. </para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Бахтинов</emphasis
>: Този метод за откриване може да се използва, когато се използва маска на Бахтинов за фокусиране. Първо направете изображение, след което изберете звездата, върху която да фокусирате. Ще бъде направено ново изображение и дифракционната картина ще бъде анализирана. бъдат показани на дифракционния модел, показващи колко добре е разпознат шаблонът и колко добре е фокусирано изображението. Когато моделът не е добре разпознат, параметърът <emphasis
>Брой редове</emphasis
> може да се коригира за подобряване на разпознаването. Линията с кръговете във всеки край е увеличен индикатор за фокуса. Колкото по-къса е линията, толкова по-добре е фокусирано изображението.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><guilabel
>SEP профил</guilabel
>: Ако алгоритъмът за откриване на звезда е настроен на <emphasis
>SEP</emphasis
>, тогава изберете профил с параметри, който да използвате с алгоритъма. Препоръчително е да използвате профила по подразбиране 1-Focus-Default като отправна точка.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Алгоритъм</guilabel
>: Изберете алгоритъма на процеса на автоматично фокусиране: </para>

      <itemizedlist>
        <listitem>
          <para
><emphasis role="bold"
>Единично линейно преминаване</emphasis
>: Това е препоръчителният алгоритъм. В този алгоритъм Ekos установява V-крива и напасва крива към данните, за да намери решението за фокусиране. След това се преминава към изчисленото решение.</para>

          <para
>Този алгоритъм поддържа по-стария тип квадратична крива, както и по-новия <link linkend="Levenberg-Marquardt"
>Levenberg-Marquardt Solver</link
> за хиперболични и параболични криви. Той също така ще претегли точките от данни в процеса на напасване на кривата, ако е отметнато <guilabel
>Използване на тежестта</guilabel
> и ще стартира процес на прецизиране, ако е избрано <guilabel
>Прецизиране на кривата </guilabel
>.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Линеен</emphasis
>: Този алгоритъм изгражда V-образна крива с приблизително <emphasis role="bold"
>Множество стъпки навън</emphasis
> стъпки от всяка страна на минимума. След като изгради V-образната крива, тя напасва квадратично уравнение към кривата (параболична форма) и използва това, за да изчисли позицията на фокусера, давайки минималната HFR. След като идентифицира минимума, той изпълнява 2-ро преминаване, намалявайки наполовина размера на стъпката, пресъздавайки кривата от 1-вото преминаване. Той се опитва да спре в рамките на <emphasis role="bold"
>толеранса</emphasis
> на минималната HFR, изчислена по време на 1-вото преминаване.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Итеративно</emphasis
>: Премества фокусера с дискретни стъпки, първоначално определени от размера на стъпката. След като се изчисли наклонът на кривата, се изчисляват допълнителни размери на стъпките, за да се постигне оптимално решение. Алгоритъмът спира, когато измерената HFR е в рамките на <emphasis role="bold"
>толеранса</emphasis
> на минималната HFR, записана в процедурата.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Полиномно</emphasis
>: Започва с итеративния метод. При преминаване от другата страна на V-кривата се изчисляват пасващите полиномни коефициенти заедно с възможното минимално решение. Този алгоритъм може да бъде по-бърз от чисто итеративния подход при наличие на добър набор от данни.</para>
        </listitem>
      </itemizedlist>
      </listitem>

      <listitem>
        <para
><guilabel
>Регресионна крива</guilabel
>: Типът крива, която да се напасне към точките от данни. </para>
        <itemizedlist>
          <listitem>
            <para
><emphasis role="bold"
>Хипербола</emphasis
>: Напасва хипербола с помощта на нелинеен алгоритъм на най-малките квадрати, предоставен от GSL (GNU Science Library). Вижте <link linkend="Levenberg-Marquardt"
>Levenberg-Marquardt Solver</link
> за повече подробности.</para>

            <para
>Това е препоръчителният вариант.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Парабола</emphasis
>: Напасва парабола с помощта на нелинеен алгоритъм на най-малките квадрати, предоставен от GSL (GNU Science Library). Вижте <link linkend="Levenberg-Marquardt"
>Levenberg-Marquardt Solver</link
> за повече подробности.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Квадратно</emphasis
>: Използва квадратно уравнение, като използва алгоритъм за най-малки квадрати в линеен стил, предоставен от GSL (GNU Science Library). Това всъщност е параболична крива.</para>

            <para
>Вече не се препоръчва използването на тази крива.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><guilabel
>Измерване</guilabel
>: Изберете Измерване, което да използвате в процеса на фокусиране. Налични са следните:</para>

        <itemizedlist>
          <listitem>
            <para
><emphasis role="bold"
>HFR</emphasis
>: Препоръчителнoто измерване е половин радиус на потока (HFR). Когато бъде открита звезда, Ekos ще изчисли HFR за звездата. Това е радиусът на въображаем кръг, центриран в центъра на звездата, който обхваща половината от общия поток на звездата.</para>

            <para
>Точката на най-добър фокус съответства на минималната HFR.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Корекции на HFR</emphasis
>: Тази функция използва HFR изчисление с коригирана яркост, за да се вземе предвид факта, че HFR за по-ярки звезди е по-голям, отколкото за по-малки звезди.</para>

            <para
>Алгоритъмът коригира стойността на измерената HFR, обикновено нагоре, така че HFR, получени чрез метода Корекция на HFR, ще бъдат по-високи от измерените стойности на HFR. Това не означава, че получавате по-лоши резултати, като използвате Корекции на HFR, просто мярката е различна.</para>

            <para
>При използване на това измерване е обичайно да се получават по-малки ленти за грешки в точките с данни, когато е избрано <guilabel
>Използване на тежести</guilabel
>.</para>

            <para
>Точката на най-добър фокус съответства на минимално коригираната HFR.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>FWHM</emphasis
>: Тази функция напасва гаусова повърхност към всяка звезда и я използва за изчисляване на максимума на половината от пълната ширина (FWHM) на звездата. FWHM е ширината на кръг (или елипса), центриран в центъра на звездата, достигащ ръба на звездата при половината от максималния ѝ интензитет.</para>

            <para
>Точката на най-добър фокус съответства на минималната FWHM.</para>

            <para
>Очаквайте FWHM да бъде приблизително два пъти HFR на звезда.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Брой звезди</emphasis
>: Функцията изчислява броя на звездите в изображението и използва това число като мярка за фокусиране. Идеята е, че колкото повече се приближавате до фокуса, толковаповече звезди стават забележими.</para>

            <para
>Предимството на това измерване е, че е много просто и не изисква алгоритми за изчисляване на HFR или FWHM.</para>

            <para
>Точката на най-добър фокус съответства на максимален брой звезди.</para>
          </listitem>

          <listitem>
            <para
><emphasis role="bold"
>Фурие</emphasis
>: Фурие прави трансформация на Фурие на изображението и изчислява мощността на изображението в честотното пространство. Предположението е, че за астрономическо изображение на звезди и фон, звездите ще ще имат гаусово разпределение. При преобразуване на Фурие, се извършва една гаусова трансформира в друга. Така по-широките звезди дават по-тесни гаусови трансформации в честотното пространство и обратно. По този начин, когато образът е на фокус, сумирането на съдържанието в честотното пространство, което всъщност е мярка за мощност, ще бъде максимално.</para>

            <para
>Това следва основната идея, предложена от Тан и Шулц в тяхната статия: <ulink url="https://arxiv.org/pdf/2201.12466.pdf"
>Метод на Фурие за определяне на фокуса за телескопи със звезди</ulink
>. Моля, обърнете внимание, че този документ прави други предложения за обработка извън идеята за използване на трансформации на Фурие, които не са включени в Ekos</para>

            <para
>Това е сравнително нов метод в Астрообщността и не изисква откриване на звезди. Тан и Шулц съобщават за добри резултати както с любителски, така и с професионални телескопи.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
><guilabel
>PSF</guilabel
>: Ако <guilabel
>Измерване</guilabel
> е зададено на FWHM, тогава PSF изпълнимият модул може да бъде избран за използване при напасване на повърхност към звездата. В момента се поддържа само Gaussian.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Използване на тежести</guilabel
>: Това е налично само с алгоритъма за фокусиране с единично линейно преминаване и напасване на кривата на хипербола и парабола. Изисква да бъде избрано Пълно поле. Опцията изчислява стандартното отклонение на звездната мярка и използва квадрата на това (математически дисперсията) като тежест в процеса на напасване на кривата. Предимството на това е, че точките от данни с по-малко надеждни данни и следователно по-големи стандартни отклонения на HFR ще получат по-малко тежест от по-надеждните точки от данни. Ако тази опция не е отметната и за всички други напасвания на крива, където опцията не е разрешена, на всички точки от данни се дава еднаква тежест в процеса на напасване на кривата.</para>

        <para
>Стандартното отклонение се изчертава върху V-кривата за всяка точка от данни като лента за грешки.</para>

        <para
>Препоръчително е да отметнете тази опция.</para>

        <para
>Вижте <link linkend="Levenberg-Marquardt"
>Levenberg-Marquardt Solver</link
> за повече подробности.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Ограничение на R²</guilabel
>: Това е налично само с алгоритъма за фокусиране с единично линейно преминаване и напасване на кривата на хипербола и парабола. Като част от алгоритъма единично линейно преминаване се изчислява степента, до която кривата пасва на точките от данни, или <link linkend="Coefficient_of_Determination"
>Коефициент на определяне, R²</link
>. Тази опция позволява да се определи минимална приемлива стойност на R², която се сравнява със стойността, получена от процеса на напасване на кривата. Ако минималната стойност не е постигната, автоматичното фокусиране ще се стартира отново. Ще бъде извършено само едно повторение и дори ако минималното R² не е постигнато втория път, изпълнението на автофокуса пак ще се счита за успешно.</para>

        <para
>Експериментирайте, за да намерите подходяща стойност, но добра отправна точка би била 0,8 или 0, 9</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Прецизиране на кривата</guilabel
>: Тази опция е достъпна само с алгоритъма за фокусиране с 1 линейно преминаване и напасване на кривата на хипербола и парабола. Ако тази опция е отметната, тогава в края на сканирането на точки от данни Ekos пасва на крива и измерва R². След това прилага критерия на Пърс (Peirce) въз основа на методологията на Гулд (Gould) за идентифициране на отклонения. Вижте <ulink url="https://en.wikipedia.org/wiki/Peirce%27s_criterion"
>Критерия на Пърс</ulink
> за подробности, включително оригиналната статия на Пърс и статията на Гулд, които са посочени в бележките. Ако критерият на Пърс открие 1 или повече отклонения, тогава се прави опит за напасване на друга крива с премахнати отклонения. Отново R² се изчислява и сравнява с оригиналната крива, подходяща R². Ако R² е по-добър, тогава се използва последният цикъл, ако не, се използва оригиналната крива (с включени извънредни стойности).</para>

        <para
>Извънредните стойности са ясно маркирани на V-кривата с X през точката от данни.</para>

        <para
>Препоръчително е да отметнете тази опция.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Усредняване над</guilabel
>: Брой кадри за заснемане във всяка точка от данни. Обикновено е разумно да се започне с 1, но увеличаването на това ще доведе до процес на осредняване за избраната звездна мярка.</para>
      </listitem>

      <listitem>
        <warning>
        <para
><guilabel
>Donut Buster</guilabel
>: Това е експериментална функция и трябва да се използва с повишено внимание. Целта на Donut Buster е да подобри фокусирането за телескопи с централни препятствия, които създават форми, подобни на понички на звездите при дефокусиране. В бъдеще е вероятно да се появят повече функционалности за Donut Buster. В тази версия функционалността е насочена към събиране на данни с цел изследване на методите за подобряване на фокуса.</para>
        </warning>
      </listitem>
      <listitem>
        <warning>
        <para
><guilabel
>Коефициент за разширяване на времето</guilabel
>: Tова е експериментална функция. на Donut Buster и трябва да се използва с повишено внимание. Тази функция скалира времето на експозиция по време на автофокус според стойността на експозицията, въведена в полето Експозиция за най-отдалечените точки данни от фокуса. Близки до фокуса точки от данни се заснемат с експозиция без скалиране. Например, ако Фокусът е настроен с Експозиция от 2 сек. и Коефициентът за разширяване на времето е зададен на 4, тогава когато автофокусът се отдалечава, за да заснеме първата си точка от данни, се използва експозиция от 2s * 4 = 8s. При всяка следваща точка от данни експозицията се намалява до 2 сек. около точката на оптимално фокусиране. С предвижването на фокусера през фокуса, експозицията се увеличава до 8 сек. за последната точка от данни.</para>
        <para
>Целта на тази функция е да увеличи яркостта на нефокусираните точки от данни, които ще бъдат по-слаби от точките, които са на фокус и следователно по-трудно използваеми за разпознаване на звезди от фоновия шум.</para>
        <para
>Тази функция предполага, че автофокусът се изпълнява от близък до оптимален фокус.</para>
        </warning>
      </listitem>

      <listitem>
        <para
>Ако <guilabel
>Откриване</guilabel
> е зададено на Праг, тогава е налично следното допълнително поле:</para>
        <itemizedlist>
          <listitem>
            <para
><guilabel
>Праг</guilabel
>: Това съдържа процентна стойност, използвана за откриване на звезда с помощта на алгоритъма за откриване на <emphasis
>Праг</emphasis
>. Увеличете, за да ограничите центроида до ярки ядра. Намалете, за да обградите размити звезди.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
>Ако <guilabel
>Откриване</guilabel
> е зададено на Бахтинов, тогава са налични следните допълнителни модули:</para>
        <itemizedlist>
          <listitem>
            <para
><guilabel
>Брой от редове</guilabel
>: Броят редове, показани на екрана при използване на маска на Бахтинов.</para>
          </listitem>

          <listitem>
            <para
><guilabel
>Сигма</guilabel
>: Сигмата на замъгляването по Гаус, приложено към изображението преди прилагането на откриването на ръбове по Бахтинов.</para>
          </listitem>

          <listitem>
            <para
><guilabel
>Размер на ядрото</guilabel
>: Размерът на ядрото на замъгляването по Гаус, приложено към изображението, преди да се приложи откриването на ръбове по Бахтинов.</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para
>Ако <guilabel
>Алгоритъм</guilabel
> е зададен на Линеен или Итеративен, тогава е наличен следният допълнителен модул:</para>
        <itemizedlist>
          <listitem>
          <para
><guilabel
>Толеранс</guilabel
>: Процентната стойност на толеранса се използва, за да се реши кога процесът на автоматично фокусиране спира. По време на процеса на автоматично фокусиране стойностите на HFR се записват и след като фокусиращият елемент е близо до оптимална позиция, той започва да измерва HFR спрямо минималния записан HFR в сесията и спира всеки път, когато измерената стойност на HFR е в рамките на % разлика от минималния записан HFR. Намалете стойността, за да стесните оптималния радиус на решение за фокусна точка. Увеличете, за да разширите радиуса на решението. </para>

          <warning>
          <para
>Задаването на твърде ниска стойност на допустимото отклонение може да доведе до повтарящ се цикъл и най-вероятно ще доведе до неуспешен процес на автоматично фокусиране. </para>
          </warning>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </sect3>

  <sect3 id="focus-mechanics">
    <title
>Механика на фокуса</title>

    <screenshot>
      <screeninfo
>Механика на фокуса </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_mechanics.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Механика на фокуса</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Параметри на Механика на фокуса:</para>

  <itemizedlist>
  <listitem>
    <para
><guilabel
>Ход</guilabel
>: Това указва начина, по който автофокусът ще премине "навътре" през обхвата си, за да създаде V-кривата, от която ще се изчисли решението за фокусиране.</para>

    <para
>Налични са следните варианти: <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Класически</emphasis
>: Това е препоръчителната настройка. Вътрешният размах следва серия от стъпки с еднакъв размер (<guilabel
>Първоначален размер на стъпката</guilabel
>). Алгоритъмът включва логика за определяне на момента на спиране, която прави точния брой стъпки непредсказуем, но той ще бъде около 2 * (<guilabel
>Множество стъпки навън</guilabel
>) + 1.</para>
        <para
>Този ход е толерантен към грешки при напасване на кривата в последната стъпка, където ще направи следваща стъпка и ще опита отново да реши. Освен това е донякъде толерантен да не бъде стартиран близо до фокуса, така че е добър избор за първоначално стартиране на автофокуса.</para>
        <para
>Поради "толерантността" на този режим към по-малко точни настройки, той е сигурна опция, но е за сметка на допълнителни стъпки и следователно допълнително време в процеса на автофокусиране.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Фиксирани стъпки</emphasis
>: Тази опция е налична в линейния <guilabel
>алгоритъм</guilabel
> с едно преминаване. Методът е подобен на Класическия, но <guilabel
>Фиксирани стъпки</guilabel
> се използва за контролиране на общия брой предприети стъпки.</para>
        <para
>Този алгоритъм е по-предсказуем от класическия, тъй като отнема определен брой стъпки (така че ще бъде по-бърз), но е по-малко толерантен към проблеми при напасване на кривата към последната точка от данни изисква да се стартира близо до фокуса.</para>
        <para
>Когато е избрано, <guilabel
>Множество стъпки навън</guilabel
> се заменя с <guilabel
>Фиксирани стъпки:</guilabel
> <screenshot>
          <screeninfo
>Механика на фокуса </screeninfo>
          <mediaobject
> <imageobject
> <imagedata fileref="focus_mechanics1.png" format="PNG" width="50%"/>
            </imageobject
><textobject
><phrase
>Механика на фокуса</phrase
></textobject
></mediaobject>
        </screenshot>
        </para>
      </listitem>
      <listitem>
        <para
><emphasis role="bold"
>CFZ разбъркване</emphasis
>: Тази функция е налична в <guilabel
>алгоритъма</guilabel
> за единично линейно преминаване. Това е вариант на Фиксирани стъпки, така че коментарите за този ход са приложими и тук.</para>

        <para
>Разликата между CFZ разбъркване и Фиксирани стъпки е, че близо до центъра на обхвата (което трябва да е около зоната на критичния фокус Critical Focus Zone (CFZ)) алгоритъмът прави стъпки с половината от определения размер.</para>
      </listitem>
    </itemizedlist>
    </para>
  </listitem>

  <listitem>
    <para
><guilabel
>Стабилизиране на фокусера</guilabel
>: Броят секунди за изчакване след движение на фокусера, преди да започне следващото заснемане. Целта е да се спрат всякакви вибрации в оптичната система, които биха повлияли на следващия кадър.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Размер на началната стъпка</guilabel
>: Това задава размера на стъпката, който да се използва от различни алгоритми за фокусиране. За абсолютни и относителни фокусери това е броят на деленията; за време-базирани фокусери това е броят милисекунди.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Множество стъпки навън</guilabel
>: Използва се от алгоритмите за фокусиране и единично линейно преминаване в класическия ход. Този параметър определя началния брой стъпки навън, които фокусиращото устройство предприема в началото на изпълнение на автофокус.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Брой стъпки</guilabel
>: Използва се от алгоритъма единично линейно преминаване във фиксираните стъпки и разбъркването на CFZ, този параметър определя общия брой стъпки, които фокусиращото устройство предприема, за да създаде V-крива при изпълнение на автофокус.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Максимално движение</guilabel
>: Поставя граници на разстоянието от текущата позиция на фокусера, което е разрешено от алгоритмите за автоматично фокусиране. Целта е да предпази фокусиращото устройство от твърде далечно преместване и потенциално самоповреждане. От друга страна, стойността трябва да е достатъчно голяма, за да позволи достатъчно движение на фокусера, което да позволи завършването на автоматичния фокус.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Максимален размер на стъпка</guilabel
>: Използва се от итеративния алгоритъм за ограничаване на максималния размер на стъпката, който може да се използва.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Луфт на механиката</guilabel
>: Вижте раздела за <link linkend="focus-backlash"
>Луфт</link
>.</para>

    <para
>Има 2 схеми, които могат да се използват:</para>

    <itemizedlist>
      <listitem>
        <para
>Задайте <guilabel
>Луфт на механиката</guilabel
> на 0, за да го изключите и да коригирате луфта другаде.</para>
      </listitem>

      <listitem>
        <para
>Задаване на <guilabel
>Луфт на механиката</guilabel
> &gt; на 0 за използване на опциите за луфт в драйвера на устройството. Обърнете внимание, че това поле може да се редактира само, ако драйверът на устройството поддържа корекции на луфта.</para>
        <para
>Това е същото поле с данни, което се показва в контролния панел на Indi за устройството за фокусиране. Може да се постави на всяко място.</para>
      </listitem>
    </itemizedlist>
  </listitem>

  <listitem>
    <para
><guilabel
>Прескачане на АФ</guilabel
>: Вижте раздела за <link linkend="focus-backlash"
>Луфт</link
>.</para>

    <para
>Има 2 схеми, които могат да се използват:</para>
    <itemizedlist>
      <listitem>
        <para
>Задайте <guilabel
>Прескачане на АФ</guilabel
> на 0, за да го изключите и да коригирате луфта другаде.</para>
      </listitem>

      <listitem>
        <para
>Задайте <guilabel
>Прескачане на АФ</guilabel
> &gt; 0, за да може модулът за фокусиране на коригира луфта.</para>
      </listitem>
    </itemizedlist>
  </listitem>

  <listitem>
    <para
><guilabel
>Изчакване на заснемането</guilabel
>: Времето в секунди за изчакване на заснетото изображение да бъде получено, преди да се обяви изтичане на времето. Това трябва да се задейства само, ако има проблеми с камерата по време на процеса на фокусиране, така че задайте това на достатъчно висока стойност, за да не се появи по време на нормална работа.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Изчакване на движението</guilabel
>: Времето в секунди за изчакване на фокусиращото устройство да се премести до исканата позиция, преди да се обяви изтичане на времето. Това трябва да се задейства само ако има проблеми с фокусера по време на процеса на фокусиране, така че задайте това на достатъчно висока стойност, за да не се появи по време на нормална работа.</para>
  </listitem>
  </itemizedlist>
  </sect3>
  </sect2>

  <sect2 id="focus-cfz">
    <title
>Критична фокусна зона (CFZ)</title>

    <screenshot>
      <screeninfo
>Критична фокусна зона (CFZ) </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_cfz_classic.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Критична фокусна зона (CFZ)</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Параметри на CFZ при фокусиране:</para>

  <itemizedlist>
  <listitem>
    <para
><guilabel
>Алгоритъм</guilabel
>: Това определя алгоритъма за критичната фокусна зона (CFZ). Целта на това е да се изчисли CFZ за оборудването, прикрепено към оптичната система. Не е необходимо да използвате тази функционалност, за да фокусирате успешно, но тя предоставя полезна информация, ако е правилно конфигурирана.</para>

    <para
>Изисква известни познания, за да го конфигурирате правилно. В интернет има много информация.</para>

    <para
>Идеята на раздела CFZ е, че той взима данните от оптичната система в раздела Фокус, и ги използва за изчисляване на CFZ. Потребителят може да настройва параметрите, за да прави сценарии "какво ще стане, ако", за да види, как това влияе на CFZ. Натискането на бутона <guilabel
>Нулиране</guilabel
> връща всички променяни параметри към стойностите на оптичната система.</para>

    <para
>Ако полето <guilabel
>Показване</guilabel
> е отметнато, тогава CFZ се изчертава върху V-кривата след успешно завършване на автофокуса. <screenshot>
      <screeninfo
>Механика на фокуса </screeninfo>
      <mediaobject
> <imageobject
> <imagedata fileref="focus_cfz_moustache.png" format="PNG" width="50%"/>
        </imageobject
><textobject
><phrase
>Механика на фокуса</phrase
></textobject
></mediaobject>
    </screenshot
></para>
    <para
>Необходимо е да се зададе параметърът <guilabel
>Размер на стъпката</guilabel
>. който указва в микрони на какво разстояние едно деление премества фокалната равнина. За рефрактори обикновено има съотношение 1 към 1 между преместването на фокусера, който движи механизма за изтегляне на тръбата на телескопа, и движението на фокалната равнина. За други видове телескопи връзката вероятно е по-сложна. За тази информация се обърнете към данните на производителя на вашия телескоп.</para>

    <para
>Налични са следните алгоритми: <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Класически</emphasis
>: Това е препоръчителната настройка. Използваното уравнение се показва в горния десен ъгъл на панела и е уравнението, което се среща най-често в интернет. Уравнението идва от обработка с линейна оптика с помощта на Airy Disc и е известно, че има ограничения. Поради тази причина той включва коефициент "толеранс", който може да се настрои от потребителя. Например в често цитираната статия "In Perfect Focus" на Don Goldman и Barry Megdal в Sky и Telescope 2010 те предлагат настройка на t=1/3.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Вълнов фронт</emphasis
>: Използваното уравнение се показва в горния десен ъгъл на диалоговия прозорец.Уравнението идва от съотношението на вълновия фронт към CFZ. Методът също има ограничения и поради тази причина включва коефициент на "толеранс", който може да се настрои от потребителя. <screenshot>
          <screeninfo
>Механика на фокуса </screeninfo>
          <mediaobject
> <imageobject
> <imagedata fileref="focus_cfz_wavefront.png" format="PNG" width="50%"/>
            </imageobject
><textobject
><phrase
>Механика на фокуса</phrase
></textobject
></mediaobject>
        </screenshot>
        </para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Gold</emphasis
>: Този метод се основава на работата, извършена от Gold Astro и е представен <ulink url="https://www.goldastro.com/goldfocus/ncfz.php\ "
>тук</ulink
>.</para>
        <screenshot>
          <screeninfo
>Механика на фокуса </screeninfo>
          <mediaobject
> <imageobject
> <imagedata fileref="focus_cfz_gold.png" format="PNG" width="50%"/>
            </imageobject
><textobject
><phrase
>Механика на фокуса</phrase
></textobject
></mediaobject>
        </screenshot>
      </listitem>
    </itemizedlist>
    </para>
  </listitem>

  <listitem>
    <para
><guilabel
>Толеранс</guilabel
>: Използва се от алгоритми Класически и Вълнов фронт (Wavefront) и е коефициент на мащабиране между 0 и 1.</para>
    <para
>За класическия алгоритъм Goldman и Megdal предлагат 1/3.</para>
    <para
>За алгоритъма Вълнов фронт някои предлагат 1/3 или дори 1/10.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Толеранс или допустимо отклонение (τ)</guilabel
>: Това се използва от алгоритъма на Gold и представлява толеранс на фокуса като процент от общото поле. Уебсайтът на Gold предлага 3-5% за добър фокусер или 1-2% за висококачествен фокусер. Вижте <ulink url="https://www.goldastro.com/goldfocus/ncfz.php"
>уебсайта на Gold Astro</ulink
> за повече подробности.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Показване</guilabel
>: Поставете отметка, за да покажете CFZ върху V-кривата след успешно изпълнение на автофокуса.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Нулиране</guilabel
>: Натиснете този бутон, за да нулирате всички параметри към стойностите по подразбиране от свързаната оптична система.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Дължина на вълната (λ)</guilabel
>: Това е дължината на вълната на светлината, която трябва да използвате. Стойността се взима по подразбиране от използвания в момента филтър. Не забравяйте да настроите това в <link linkend="focus-filter-settings"
>Настройки на филтъра</link
> за вашите филтри.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Апертура (A)</guilabel
>: Това е апертурата на вашия телескоп в mm. Взима се по подразбиране от избраната оптична система.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Фокусно отношение (f)</guilabel
>: Това е фокусното съотношение на телескопа. По подразбиране е от свързания в момента оптичен компонент.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>FWHM (θ)</guilabel
>: Това се използва от алгоритъма на Gold и е общото поле. Това е комбинираният принос на границата на дифракция на вашия телескоп и астрономическата картина. <ulink url="https://www.goldastro.com/goldfocus/ncfz.php"
>Уебсайтът на Gold Astro</ulink
> описва как можете да определите приблизително общата сума, след като имате стойности за отделните приноси.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>CFZ</guilabel
>: Това е изчислен CFZ в микрони и деления.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Размер на стъпка</guilabel
>: Това трябва да бъде въведено от потребителя (тъй като не може да бъде изчислено от Ekos). Той показва колко далече 1 деление премества фокалната равнина в микрони. </para>
    <para
>За рефрактор това е, колко далеч се движи изтеглящата тръба, когато фокусерът се премести с 1 деление. Може да успеете да получите тази стойност от спецификацията на вашия фокусер (колко деления са необходими за пълен оборот) и стъпката на резбата на изтеглящата тръба на вашия телескоп, както и на съответния предавателен механизъм.</para>
    <para
>Като алтернатива можете да измерите, колко далеч се движи изтеглящата се тръба от край до край (внимавайте да не я насилвате) с помощта на шублер или линийка. Чрез изваждане на най-отдалечената "вътрешна" позиция (във деления) от "външната" позиция (в деления) ще получите, с колко деления сте преместили подвижната тръба за измереното разстояние. От това можете да изчислите разстоянието в микрони, на което едно деление премества фокусната тръба.</para>
    <para
>Други видове телескопи ще имат други начини за регулиране на фокалната равнина, например чрез преместване на първичните или вторичните огледала. Ще трябва или да вземете размера на стъпката от документацията за вашето оборудване, или да измислите как да го измерите по начин, който е в съответствие с описания по-горе.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>CFZ камера</guilabel
>: Размерът на пикселите на камерата, свързана чрез оптичната система, може да има ограничаващ ефект върху CFZ. Така че еквивалентен CFZ за прикрепената камера се изчислява, като се приема ограничение на Nyquist 2*.</para>
  </listitem>

  <listitem>
    <para
><guilabel
>Крайна CFZ</guilabel
>: Това е по-голямата от CFZ, изчислена с помощта на избрания алгоритъм за посочения параметър и <guilabel
>CFZ на камерата</guilabel
>. Това е показаната стойност и всъщност е CFZ на вашето оборудване.</para>
  </listitem>

  </itemizedlist>
  </sect2>


  <sect2 id="focus-advisor">
    <title
>Помощник за фокусиране</title>

    <screenshot>
      <screeninfo
>Помощник за фокусиране </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_advisor.png" format="PNG" width="33%"/>
        </imageobject>

        <textobject>
          <phrase
>Помощник за фокусиране</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Това е диалоговия прозорец Помощник за фокусиране. Това е експериментална функция за подпомагане на управлението на параметрите на фокуса.</para>

    <para
>Целта на Помощника за фокусиране е да помогне на хората, които срещат трудности да използват модула Фокус в Ekos. Модулът Фокус съдържа много параметри, които трябва да се задават самостоятелно, за да се постигнат добри резултати. Помощникът за фокусиране е предназначен да помогне с настройката на основни параметри, които са необходими за постигането фокус. Той не е проектиран да постигне възможно най-добрия фокус за вашето оборудване. Ще трябва да експериментирате с вашите настройки, за да постигнете това. Но помощникът за фокусиране е мястото, откъдето да започнете този експеримент.</para>

    <para
>Така че помощникът за фокусиране е насочен към по-малко опитните потребители.</para>
    <para
>Ако помощника за фокусиране не дава добри резултати при вашата настройка, можете да започнете дискусия във форума, за да бъде подобрен и да дава по-добри резултати в бъдеще. По този начин той ще се надгражда с времето и ще бъде по-полезен.</para>
    <para
>Когато щракнете върху панела Помощник за фокусиране, той изработва поредица от препоръки за параметри въз основа на оптичната система, което използвате във Фокус.</para>
    <para
>В горната част на панела той показва информация за свързания оптичен компонент. След това показва 6 реда, свързани с различни набори от параметри, използвани във Фокус. Срещу всеки ред има квадратче за отметка за актуализиране на свързаните фокусни полета с препоръките на Помощника за фокусиране.</para>
    <para
>Параметрите на фокуса са разделени на следните групи:</para>

    <itemizedlist>
    <listitem>
    <para
><guilabel
>Размер на стъпката</guilabel
>: Това е препоръчителният размер на стъпката на фокуса, който да използвате. Това е критичен параметър. Той се взима по подразбиране от прозореца на критичната фокусна зона (CFZ). Така че първото нещо, което трябва да направите, е да настроите този панел и да получите разумна стойност за CFZ. Като алтернатива, ако знаете тази стойност за вашето оборудване от други източници, можете просто да я въведете.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Множествена стъпка навън</guilabel
>: Това е предложената множествена стъпка навън, която да използвате.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Параметри на камерата и филтърното колело</guilabel
>: Това задава параметрите в раздела на екрана за фокусиране <link linkend="focus-ccd-filter-wheel"
>CCD и Филтърно колело</link
>. Като задържите курсора на мишката върху този етикет, можете да видите в подсказката, какви стойности препоръчва Помощникът за фокусиране.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Параметри на раздела Настройки</guilabel
>: Това задава параметрите в панела <link linkend="focus-settings"
>Настройки на фокуса</link
>. Като задържите курсора на мишката върху този етикет, можете да видите в подсказката, какви стойности препоръчва Помощникът за фокусиране.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Параметри на Процес</guilabel
>: Това задава параметрите в панела <link linkend="focus-process"
>Процес на фокусиране</link
> . Като задържите курсора на мишката върху този етикет, можете да видите в подсказката, какви стойности препоръчва Помощникът за фокусиране.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Параметри на Механика</guilabel
>: Това задава параметрите в панела <link linkend="focus-mechanics"
>Механика на фокуса</link
>. Като задържите курсора на мишката върху този етикет, можете да видите в подсказката, какви стойности препоръчва Помощникът за фокусиране.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Помощ</guilabel
>: Натиснете този бутон, за да получите помощ относно използването на Помощника за фокусиране.</para>
    </listitem>

    <listitem>
    <para
><guilabel
>Актуализиране на параметри</guilabel
>: Натиснете този бутон, за да приемете препоръките на Помощника за фокусиране и да актуализирате параметрите на Фокус, където има отметка в свързаното квадратче <guilabel
>Актуализиране</guilabel
>.</para>
    </listitem>

  </itemizedlist>
  </sect2>

  <sect2 id="focus-filter-settings">
      <title
>Настройки на филтъра</title>

      <screenshot>
          <screeninfo
>Опашка за филтриране </screeninfo>
          <mediaobject>
              <imageobject>
                  <imagedata fileref="filter_settings.png" format="PNG" width="50%"/>
              </imageobject>
              <textobject>
                  <phrase
>Опашка за филтриране</phrase>
              </textobject>
          </mediaobject>
      </screenshot>

      <para
>Щракнете върху иконата на филтъра <inlinemediaobject
><imageobject
><imagedata fileref="view-filter.png" format="PNG"/></imageobject
> </inlinemediaobject
> от Заснемане или Фокус, за да отворите диалоговия прозорец за настройки на филтъра. Този изскачащ прозорец позволява на потребителя да конфигурира данните, свързани с всеки филтър и използвани за различни функции в системата.</para>

      <para
>Фокусирането с различни филтри може да се извърши по един от трите начина в Ekos.</para>

      <itemizedlist>
        <listitem>
          <para
><emphasis role="bold"
>Директен автофокус</emphasis
>: Когато Заснемането промени този филтър, е възможно автоматично да префокусира този филтър. Експозицията, която ще се използва за избрания филтър, се взема от полето <guilabel
>Експозиция</guilabel
>. Това позволява, например, на теснолентовите филтри да използват по-дълга експозиция от широколентовите филтри по време на автофокусирането.</para>

          <para
>Поставете отметка на <guilabel
>Автоматичен фокус</guilabel
>, за да използвате филтъра по този начин.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Автоматично фокусиране върху заключващ филтър</emphasis
>: Възможно е да посочите заключващ филтър, който да се използва, когато е необходимо да се фокусира този филтър. Например, ако се използва филтър Ha и се изисква стартиране на автофокус, възможно е да се стартира автофокус с помощта на филтъра Lum и след това, когато е завършен, да се коригира позицията на фокуса чрез стойност на отместване, съответстваща на предварително определената разлика във фокуса между Lum и Ha филтри (100 деления в този пример). Това е полезно, когато например е трудно да се фокусират някои филтри директно без прекалено дълго време на експозиция. Обърнете внимание, че този подход на заключен филтър може да се използва и в <link linkend="ekos-align"
>модула за подравняване</link
>, когато извършва заснемане за астрометрия.</para>

          <para
>За да използвате филтър по този начин, отметнете <guilabel
>Автоматичен фокус</guilabel
>, посочете <guilabel
>Филтър за заключване</guilabel
>, който да използвате, и се уверете, че отместванията за този филтър и <guilabel
>Филтър за заключване</guilabel
> са зададени.</para>
        </listitem>

        <listitem>
          <para
><emphasis role="bold"
>Използване на отмествания</emphasis
>: Възможно е да използвате отмествания на филтъра, за да регулирате фокуса при смяна между филтри, без да стартирате автофокус. Това изисква известна работа по настройката преди време, но има предимството да намали броя на стартиранията на автофокуса и следователно да намали времето за автоматично фокусиране.</para>

          <para
>За да използвате тази функция, е необходимо да определите относителната позиция на фокус между всички филтри, за които искате да използвате тази функционалност. Например, ако визуалния (Luminance) Lum филтър и червения Red филтър имат една и съща позиция на фокус (те са парфокални), но зеленият филтър Green фокусира 300 деления по-далеч от Lum (или Red), тогава настройте отместването за Lum, Red и Green на 0,0, 300, както е показано по-горе. Ако се създаде серия снимки, която да снима 10 подкадъра на Lum, след това 10 Red, след това 10 Green, тогава в началото, тъй като Lum има отметка на <guilabel
>Автоматично фокусиране</guilabel
>, ще се стартира автофокус с Lum и ще се заснемат 10 подкадъра. След това заснемането ще превключи червения филтър. Тъй като Red няма отметка за <guilabel
>Автоматичен фокус</guilabel
>, няма да последва автофокусиране и Ekos ще търси отместванията между Red и Lum. В този случай 0 - 0 = 0. Така че фокусът няма да бъде преместен и заснемането ще направи 10 подкадри с Red. След това заснемането ще се смени от червено на зелено. Отново, Green е с немаркиран <guilabel
>Автоматичен фокус</guilabel
> и няма да се автофокусира и Ekos ще търси отместванията между Green и Red. В този случай 300 - 0 = 300. Така че фокусът ще коригира позицията на фокуса с +300 (фокусът се премества навън с 300 деления). След това заснемането направи 10 зелени подкадъра.</para>

          <para
>За да използвате филтър по този начин, премахнете отметката от <guilabel
>Автоматичен фокус</guilabel
> и се уверете, че отместванията за този филтър и всички други филтри, които могат да предхождат този филтър в последователност, са зададени.</para>

          <para
>Отместванията могат да бъдат определени чрез стартиране на автоматично фокусиране с различни филтри и ръчно изчисляване на относителните отмествания и въвеждането им в таблицата или чрез използване на инструмента <link linkend="build-filter-offsets"
>Задаване на отмествания</link
> .</para>
        </listitem>
      </itemizedlist>

      <para
>Конфигурирайте настройките за всеки филтър в таблицата: </para>
      <orderedlist>
          <listitem>
              <para
><guilabel
>Филтър</guilabel
>: Име на филтъра.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Експозиция</guilabel
>: Задайте време на експозиция (в секунди), което да се използва при извършване на автофокус с този филтър. По подразбиране е зададено на 1 секунда.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Отместване</guilabel
>: Задайте относителни отмествания. Ekos ще заповяда промяна на отместването на фокуса, ако има разлика между текущото и целевото отместване на филтъра. Например, като се имат предвид стойностите в примерното изображение, ако текущият филтър е зададен на <emphasis
>Червен</emphasis
> и следващият филтър е <emphasis
>Зелен</emphasis
>, тогава Ekos ще заповяда на фокусиращото устройство да фокусира навътре с + 300 деления. Относителните положителни отмествания на фокуса означават фокус навън, докато отрицателните стойности означават фокус навътре.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Автоматичен фокус</guilabel
>: Поставете отметка на тази опция, за да извършвате автофокус всеки път, когато филтърът се промени на този филтър.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Заключващ филтър</guilabel
>: Определете, кой филтър да бъде зададен и <emphasis
>заключен</emphasis
> при извършване на автофокус за този филтър. "--" означава, че няма заключващ филтър. Не е позволено следващите филтри за извършват автофокус с повече от 1 дълбочина, т.е. червено не може да бъде заключено към синьо, което от своя страна е заключено към зелено. Също така филтър не може да бъде заключен към себе си.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Последно решение на автофокус</guilabel
>: Последната успешна позиция на автофокус. При нормална работа Ekos автоматично ще актуализира това поле.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Последна температура (°C) на автофокус</guilabel
>: Температурата на <guilabel
>Последното решение на автофокуса</guilabel
>. При нормална работа Ekos автоматично ще актуализира това поле.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Последна височина на автофокуса (°Alt)</guilabel
>: Височината на <guilabel
>Последното решение на автофокуса</guilabel
>. При нормална работа Ekos автоматично ще актуализира това поле.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Деления / °C</guilabel
>: Броят на деленията, отметките за преместване на фокуса, когато температурата се промени с 1°C. Например, ако фокусът се измести с 5 отметки навън, когато температурата се повиши с 1°C, задайте това поле на 5. Ако фокусът се премести навътре с 5 отметки, когато температурата се повиши с 1°C, задайте това поле на -5.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Деления / °Alt</guilabel
>: Броят деления, отметки за преместване на фокуса, когато надморската височина се промени с 1°Alt. Например, ако фокусът се измести с 0,5 отметка навън, когато височината се увеличи с 1°Alt, задайте това поле на 0,5. Ако фокусът се премести с 0,5 отметка навътре, когато височината се увеличи с 1°Alt, задайте това поле на -0,5.</para>
          </listitem>
          <listitem>
              <para
><guilabel
>Дължина на вълната</guilabel
>: Центърът на лентата на пропускане на филтъра в нанометри. Това се използва в някои изчисления на критичната фокусна зона (CFZ) във Фокус.</para>
          </listitem>
      </orderedlist>

      <para
>В допълнение към таблицата с данни в долната част на изскачащия прозорец са налични следните контроли:</para>
      <itemizedlist>
          <listitem>
          <para
><guilabel
>Задаване на на отмествания</guilabel
>: Натиснете бутона <guibutton
>Задаване на отмествания</guibutton
>, за да стартирате изскачащия прозорец <link linkend="build-filter-offsets"
>Задаване на отмествания</link
>.</para>
          </listitem>
          <listitem>
          <para
><guilabel
>Заснемане на изглаждащи кадри при същия фокус като светлите кадри</guilabel
>: Когато е отметнато, изглаждащи кадри ще бъдат заснети в позицията на фокусера за <guilabel
>Последно решение на автофокуса</guilabel
>.</para>
          </listitem>
      </itemizedlist>

      <para
>Да вземем пример. Ако имаме последователност за заснемане, започваща с Lum -> Red -> Green -> Blue -> Sii -> Ha -> Oiii, използвайки настройката в изскачащия прозорец за настройки на филтъра:</para>
      <itemizedlist>
          <listitem>
              <para
>Lum: Първоначално филтърът Lum е конфигуриран за автофокус, така че се изпълнява автофокус, след което се изпълнява последователността Lum.</para>
          </listitem>
          <listitem>
              <para
>Red: Червеният филтър не е конфигуриран за автофокус и има отместване 0. Така че, когато започне последователността от червено, няма изпълнение на автофокус и относителното отместване между Lum и Red е 0, така че фокусът не се премества.</para>
          </listitem>
          <listitem>
              <para
>Green: Зеленият филтър не е конфигуриран за автофокус и има отместване от 300. Така че, когато започне зелената последователност, няма стартиране на автофокус и относителното отместване между червено и зелено е 300 - 0 = +300, така че фокусът се измества навън с 300 деления.</para>
          </listitem>
          <listitem>
              <para
>Blue: Синият филтър не е конфигуриран за автофокус и има отместване 0. Така че, когато започне синята последователност, няма изпълнение на автофокус и относителното отместване между зелено и синьо е 0 - 300 = -300, така че фокусът се премества от 300.</para>
          </listitem>
          <listitem>
              <para
>Sii: Филтърът Sii е конфигуриран за автофокус, заключен е към Lum и има отместване 0. Така че, когато последователността Sii започне, има стартиране на автофокус върху Lum и относителното отместване между Lum и Sii е 0 - 0 = 0, така че фокусът се премества към решението на автоматично фокусиране за Lum.</para>
          </listitem>
          <listitem>
              <para
>Ha: Филтърът Ha е конфигуриран за автофокус, заключен е към Lum и има отместване от 100. Така че, когато последователността Ha започне, има стартиране на автофокус върху Lum и относителното отместване между Lum и Ha е 100 - 0 = +100 , така че фокусът се премества към решението автоматично фокусиране за Lum, след което навън със 100.</para>
          </listitem>
          <listitem>
              <para
>Oiii: Филтърът Oiii е конфигуриран за автофокус, заключен е към Lum и има отместване от -100. Така че, когато последователността Oiii започне, има изпълнение на автофокус върху Lum и относителното отместване между Lum и Oiii е -100 - 0 = -100, така че фокусиращият елемент се премества към решението за изпълнение на Lum за автоматично фокусиране и след това навътре със 100.</para>
          </listitem>
      </itemizedlist>
  </sect2>


  <sect2 id="build-filter-offsets">
      <title
>Задаване на отмествания</title>

      <screenshot>
          <screeninfo
>Изграждане на отмествания на филтъра </screeninfo>
          <mediaobject>
              <imageobject>
                  <imagedata fileref="build_filter_offsets.png" format="PNG" width="33%"/>
              </imageobject>
              <textobject>
                  <phrase
>Изграждане на отмествания на филтъра</phrase>
              </textobject>
          </mediaobject>
      </screenshot>

      <para
>Щракнете върху бутона <guilabel
>Задаване на отмествания</guilabel
> в изскачащия прозорец <link linkend="focus-filter-settings"
>Настройки на филтъра</link
>, за да стартирате инструмента за изграждане на отмествания. Отместванията на филтъра могат или да бъдат въведени ръчно в таблицата в изскачащия прозорец за настройки на филтъра, или този инструмент може да се използва за подпомагане на създаването им. </para>
      <para>
          <emphasis
>Забележка: Тази помощна програма не трябва да се изпълнява по време на сесия за изображения, тъй като поема изключителния контрол върху процеса на фокусиране, докато работи.</emphasis>
      </para>
      <para
>Като начало конфигурирайте настройките за всеки филтър в таблицата в изскачащия прозорец Настройки на филтъра и след това стартирайте Задаване на отмествания. Изскачащият прозорец се стартира с таблица с данни със следните колони. </para>
      <itemizedlist>
          <listitem>
              <para
><guilabel
>Филтър</guilabel
>: Име на филтъра. Първият филтър има "*" след името на филтъра - "Lum *" в горния пример. Това означава, че Lum е референтен филтър, спрямо който ще се измерват отместванията на другите филтри. Щракнете два пъти върху друго име на филтър, за да направите този филтър референтен. </para>
          </listitem>
          <listitem>
              <para
><guilabel
>Отместване</guilabel
>: Текущото отместване. </para>
          </listitem>
          <listitem>
              <para
><guilabel
>Заключващ филтър</guilabel
>: Текущият филтър за заключване. </para>
          </listitem>
          <listitem>
              <para
><guilabel
>Брой фокусирания</guilabel
>: Броят на фокусиранията за този филтър. По подразбиране е 5. За да изключите филтър от процеса, задайте това поле на нула. Отбележете, че референтният филтър трябва да има поне 1 изпълнение. </para>
          </listitem>
      </itemizedlist>
      <para
>Когато <guilabel
>Брой фокусирания</guilabel
> са конфигурирани, натиснете бутона <guilabel
>Старт</guilabel
>, за да стартирате автоматизирания процес. </para>
      <para
>Натиснете бутона <guilabel
>Спиране</guilabel
>, за да спрете процеса по всяко време. </para>
      <para
>Превключете квадратчето за отметка <guilabel
>Адаптиране на фокуса</guilabel
> във всеки момент от обработката, за да превключите между измерените резултати от автоматичното фокусиране и резултатите след прилагане на корекциите на адаптивния фокус. Вижте раздела <link linkend="focus-adaptive"
>Адаптивен фокус</link
> за повече подробности относно това какво е Адаптивен фокус. </para>
      <para
>Да вземем пример, където имаме 7 филтъра: Lum, Red, Green, Blue, Sii, Ha и Oiii. 8-ият слот във филтърното колело е маркиран като празен. Процесът е завършил 5 изпълнения за всички филтри,0 за Blank (ефективно изключване на Blank от процеса). В този случай в таблицата са създадени 8 допълнителни колони. </para>
      <screenshot>
          <screeninfo
>Изграждане на отмествания на филтъра </screeninfo>
          <mediaobject>
              <imageobject>
                  <imagedata fileref="build_filter_offsets2.png" format="PNG" width="50%"/>
              </imageobject>
              <textobject>
                  <phrase
>Изграждане на отмествания на филтъра</phrase>
              </textobject>
          </mediaobject>
      </screenshot>
      <itemizedlist>
          <listitem>
              <para
>Автофокусиране 1-5: Максималният <guilabel
>Брой на автофокусиране</guilabel
>, избран от потребителя, е 5, така че са създадени 5 колони, по 1 за всяко решение за автофокусно изпълнение. </para>
          </listitem>
          <listitem>
              <para
>Средна стойност: Средната стойност на решенията на автофокуса. </para>
          </listitem>
          <listitem>
              <para
>Ново отместване: Отместването, изчислено от филтъра Lum. Например за Sii 36731 - 36743 = -12 </para>
          </listitem>
          <listitem>
              <para
>Запазване: Поставете отметка, за да запазите отместването за този филтър при натискане на бутона <guilabel
>Запазване</guilabel
>. По подразбиране тези квадратчета се поставят в отметка, но премахването на отметката позволява дадена стойност да бъде игнорирана, докато се запазват други филтри. </para>
          </listitem>
      </itemizedlist>
      <para
>На този етап се препоръчва да прегледате АФ сериите, за да се уверите, че всички са добри. Например, да приемем, че не сме доволни от второто АФ изпълнение на Oiii. В този случай бихме могли или:</para>
          <itemizedlist>
            <listitem>
              <para
>Редактирайте АФ изпълнение 2 и задайте стойността на каквато желаете стойност.</para>
            </listitem>
            <listitem>
              <para
>Редактирайте колоната Ново отместване и задайте стойността директно (заобикаляйки логиката за изчисляването ѝ).</para>
            </listitem>
            <listitem>
              <para
>Отхвърлете АФ изпълнение 2, като зададете стойността на 0 (вижте по-долу). В този случай средното и новото отместване за Oiii се преизчисляват на базата на АФ изпълнения 1, 3, 4,5. В примера по-долу новото средно и ново отместване се изчисляват и показват.</para>
            </listitem>
          </itemizedlist>
      <screenshot>
          <screeninfo
>Изграждане на отмествания на филтъра </screeninfo>
          <mediaobject>
              <imageobject>
                  <imagedata fileref="build_filter_offsets3.png" format="PNG" width="50%"/>
              </imageobject>
              <textobject>
                  <phrase
>Изграждане на отмествания на филтъра</phrase>
              </textobject>
          </mediaobject>
      </screenshot>
      <para
>След като прегледа резултатите, потребителят може да натисне: </para>
      <itemizedlist>
          <listitem>
              <para
>Запазване: Всички филтри, където е отметнато квадратчето <guilabel
>Запазване</guilabel
>, ще имат стойността за ново отместване, записана в Отместванията на филтъра за използване по време на следващата сесия за изображения. </para>
          </listitem>
          <listitem>
              <para
>Затваряне: Инструментът Задаване на отмествания се затваря, без записване на данни. </para>
          </listitem>
      </itemizedlist>
      <para
>Ако полето <guilabel
>Адаптиране на фокус</guilabel
> е отметнато, АФ сериите се актуализират за адаптивен фокус. Вижте раздела <link linkend="focus-adaptive"
>Адаптивен фокус</link
> за повече подробности относно теорията на адаптивния фокус. Първият АФ цикъл (в този пример АФ изпълнение 1 на Lum) е основата за адаптациите. Така че температурата и височината на АФ изпълнение 1 на Lum се използват като основа за всички останали АФ изпълнения и данните се адаптират обратно към това, което би било решението за АФ, ако беше изпълнено при температурата и височина на АФ изпълнение 1 на Lum. </para>
      <para
>В този пример адаптивният фокус е настроен за корекции на височината на червения филтър само в настройките на филтъра. Така че стойностите на адаптирано АФ изпълнение са същите като неадаптираните стойности за всички останали филтри. </para>

      <screenshot>
        <screeninfo
>Изграждане на отмествания на филтъра </screeninfo>
        <mediaobject>
            <imageobject>
                <imagedata fileref="build_filter_offsets4.png" format="PNG" width="50%"/>
            </imageobject>
            <textobject>
                <phrase
>Изграждане на отмествания на филтъра</phrase>
            </textobject>
        </mediaobject>
      </screenshot>
      <para
>Ако задържите курсора на мишката върху АФ изпълнение, ще се покаже подсказка за обяснение на адаптивния фокус. В примера мишката се движи над АФ изпълнение 1 на червено. Първият ред на Пояснение показва измерения резултат от автофокуса за този цикъл (36683), адаптации за температура (0,0C) и надморска височина (0, 2 градуса надморска височина). Вторият ред на полето Пояснение показва адаптациите: общо 206, 0 температура, 205, 9 височина. Третият ред показва адаптираната позиция на 36889. </para>
      <para
>Потребителят може да превключва между Адаптиран фокус или необработени стойности. Които и стойности да се показват в мрежата, ще бъдат запазените стойности. </para>
      <para
>Ето няколко съвета за използване на тази помощна програма: <itemizedlist>
            <listitem
><para
>Започнете, като се уверите, че зоната от небето, върху която използвате Задаване на отмествания, работи добре за автофокус. Прицелването високо в небето ще доведе до заснемания през по-тънка атмосфера с по-малки, по-плътни звезди. Уверете се, че има достатъчно звезди в кадъра. Избягвайте Обръщане на меридиана по време на процеса. Проследявайте една и съща област по време на процеса, така че всяко изпълнение да използва повече или по-малко същия набор от звезди. Въпреки че възможността да използвате на Адаптиране на фокус е налична за коригиране на промените в околната среда, като температура и височина, опитайте се да сведете до минимум тези промени в хода на работа на помощната програма, като изберете подходяща област на небето.</para
></listitem>

            <listitem
><para
>Уверете се, че вашето оборудване е в термично равновесие, преди да започнете. Изчислете приблизително, колко време ще отнеме помощната програма, което е общият брой AФ изпълнения * продължителността на едно АФ изпълнение. Опитайте се да се уверите, че условията ще останат възможно най-постоянни през това време, например има достатъчно време преди зазоряване, луната няма да повлияе на фокусирането на някои изображения повече от други, целта няма да падне под хоризонта по време на процеса и др.</para
></listitem>

            <listitem
><para
>Конфигурирайте помощната програма за Брой автофокусирания (5 е добро начало), референтен филтър (напр. Lum) и настройката за адаптиране на фокуса. Изпълнете помощната програма докрай.</para
></listitem>

            <listitem
><para
>Прегледайте резултатите. За всеки филтър прегледайте всяко АФ изпълнение, търсейки отклонения. За всяка извънредна стойност решете, какво да направите, например премахване от обработка чрез настройка на 0. Ако има филтри, за които не сте доволни от резултатите, премахнете отметката от квадратчето Запазване за тези филтри.</para
></listitem>

            <listitem
><para
>Ако сте доволни, натиснете Запазване, за да запазите отместванията на филтъра в настройките на филтъра за бъдеща употреба.</para
></listitem>
            </itemizedlist>
      </para>
</sect2>

  <sect2 id="focus-display">
    <title
>Панел Фокус</title>

    <screenshot>
      <screeninfo
>Панел Фокус </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_display.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Панел Фокус</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Панелът за фокусиране показва прозорец за преглед FITS върху кадъра, направен по време на процеса на фокусиране. Ако е избрана <guilabel
>Пръстеновидна маска</guilabel
>, маската се изчертава върху изображението. Всички звезди, открити от Ekos въз основа на избраните параметри, имат HFR стойност, показана до свързаната звезда (освен ако измерването е зададено на FWHM). </para>

    <para
>Ако <guilabel
>Мозаечна маска</guilabel
> е избрана, тогава FITS визуализаторът показва мозаечната мрежа 3x3, показваща центъра, ръбовете и страните, както е конфигурирано в опциите за мозаечна маска. <screenshot
><screeninfo
>Панел фокус - мозайка</screeninfo
><mediaobject>
    <imageobject
><imagedata fileref="focus_display_mosaic.png" format="PNG" width="50%"/></imageobject>
    <textobject
><phrase
>Панел фокус - мозайка</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>Прозорецът поддържа следните опции за преглед на FITS (в горната част на прозореца):</para>

    <itemizedlist>
      <listitem>
        <para
><guibutton
>Увеличаване</guibutton
> и <guibutton
>Намаляване</guibutton
>.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Мащаб по подразбиране</guibutton
> и <guibutton
>Оптимално мащабиране</guibutton
>.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Превключване на разтягане на изображението</guibutton
>: Включване или изключване на разтягане на образа.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Превключване на мерника</guibutton
>: Включване или изключване на мерника.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Превключване на решетъчни линии</guibutton
>: Включва или изключва решетъчни линии.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Превключване на звезди</guibutton
>: Включване или изключване на откриването на звезди.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Преглед на профила на звездата</guibutton
>: Стартира диалоговия прозорец Преглед на звезден профил.</para>
      </listitem>
    </itemizedlist>
  </sect2>

  <sect2 id="focus-v-curve">
    <title
>V-крива</title>

    <screenshot>
      <screeninfo
>Фокус - V- крива </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_vcurve.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Фокус - V- крива</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>V-кривата показва позицията на фокусиращото устройство (ос x) спрямо измерването на фокуса, напр. радиус на полуосветеност (HFR) (ос y). Всяка точка от данни се начертава на графиката и се представя от кръг с число, представляващо точката от данни. Колко точки от данни се вземат и как се движи фокусиращият елемент се определя от избраните параметри. </para>

    <para
>За определени алгоритми Ekos също ще начертае крива на най-добро прилягане през точките от данни. Ако е избрано <guilabel
>Използване на тежести</guilabel
>, тогава лентите за грешки се показват на всяка точка от данни, която съответства на стандартното отклонение в измерената стойност.</para>

    <para
>Единиците на оста y зависят от избраната измервателна единица за фокуса. Например, за HFR, оста y ще бъде или в пиксели, или в дъгови секунди в зависимост от това, какви са зададените <guilabel
>Измервателни единици</guilabel
>.</para>

    <para
>Ако е избрано <guilabel
>Прецизиране на кривата</guilabel
>, модулът Фокус ще провери за и потенциално ще изключи отдалечени точки от данни. В този случай точки от данни 1,5 и 7 са изключени.</para>

    <para
>Под V-кривата се показват редица параметри:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>HFR</guilabel
>: Показва HFR на звездата за най-скорошната точка от данни, ако е релевантно.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>FWHM</guilabel
>: Показва FWHM на звездата за най-новата точка от данни, ако е релевантно.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Звезди</guilabel
>: Броят звезди, използвани за най-новата точка от данни.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Итерация</guilabel
>: Броят точки от данни, взети досега.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Относителен профил...</guibutton
>: Извиква изскачащия прозорец <link linkend="focus-relative-profile"
>Относителен профил</link
>.</para>
      </listitem>

      <listitem>
        <para
><guibutton
>Изчистване на данните</guibutton
>: Нулира графиката на V-кривата чрез изчистване на показаните данни.</para>
      </listitem>
    </itemizedlist>

    <para
>Тук е показана V-крива, когато измерването е настроено на HFR кориг: <screenshot
><screeninfo
>HFR кориг. V-крива</screeninfo
><mediaobject
><imageobject>
          <imagedata fileref="focus_vcurve_hfradj.png" format="PNG" width="50%"/></imageobject
><textobject>
          <phrase
>V-крива с kорекции на HFR на фокуса</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>Тук е показана V-крива, когато измерването е зададено на FWHM: <screenshot
><screeninfo
>FWHM V-крива</screeninfo
><mediaobject
><imageobject>
      <imagedata fileref="focus_vcurve_fwhm.png" format="PNG" width="50%"/></imageobject
><textobject>
      <phrase
>V-крива с FWHM на фокус</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>Тук е показана V-крива, когато измерването е зададено в брой звезди. В този случай квадратчето <guilabel
>Показване</guilabel
> на критичната фокусна зона (CFZ) е отметнато, така че CFZ също се показва: <screenshot
><screeninfo
>V-крива Брой звезди</screeninfo
><mediaobject
><imageobject>
      <imagedata fileref="focus_vcurve_numstars.png" format="PNG" width="50%"/></imageobject
><textobject>
      <phrase
>Фокус на V-крива Брой звезди</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>Тук е показана V-крива, когато измерването е зададено на Фурие: <screenshot
><screeninfo
>V-крива на Fourier</screeninfo
><mediaobject
><imageobject>
      <imagedata fileref="focus_vcurve_fourier.png" format="PNG" width="50%"/></imageobject
><textobject>
      <phrase
>Фокус на V-крива на Фурие</phrase
></textobject
></mediaobject
></screenshot
></para>

    <para
>При кадриране форматът на графиката се променя на тези на "времеви серии", хоризонталната ос обозначава номера на кадъра. Това е в помощ при кадрирането, тъй като можете да видите как мярката, в този случай HFR, се променя между кадрите. </para>

    <para
>Това е много полезно, например, когато се опитвате да поставите системата на приблизителен фокус, преди да стартирате автоматично фокусиране. В този случай кадрирането се стартира и бутоните Стъпка навътре и Стъпка навън се използват за регулиране на фокуса и наблюдавания ефект върху V-кривата.</para>

    <screenshot>
      <screeninfo
>V-крива като времеви серии</screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_vcurve_timeseries.png" format="PNG"
                     width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Времеви серии на V-кривата на фокуса</phrase>
        </textobject>
      </mediaobject>
    </screenshot>
  </sect2>

  <sect2 id="focus-relative-profile">
    <title
>Относителен профил</title>

    <screenshot>
      <screeninfo
>Фокус -относителен профил </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_relative_profile.png" format="PNG"
                     width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Фокус -относителен профил</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Относителният профил е графика, която показва относителните стойности на HFR, нанесени една спрямо друга. По-ниските стойности на HFR съответстват на по-тесни форми и обратно. Плътната червена крива е профилът на текущата стойност на HFR, докато пунктираната зелена крива е за предишната стойност на HFR. И накрая, лилавата крива обозначава първата измерена HFR. Това ви позволява да прецените доколко процесът на автоматично фокусиране е подобрил относителното качество на фокуса. </para>
  </sect2>

  <sect2 id="How_to_Setup_for_an_Auto_Focus_Run">
    <title
>Как се настройва автофокусът за изпълнение</title>

    <para
>Точните настройки, които работят най-добре за дадена астрономическа настройка, трябва да бъдат разработени от потребителя чрез проба и грешка. Добро място за начало е секцията <link linkend="focus-advisor"
>Помощник за фокус</link
>. Стартирайте Помощник за фокус и приемете неговите препоръки. Той използва алгоритъма единично линейно преминаване:</para>

    <itemizedlist>
      <listitem>
        <para
>Настройка на луфт. Вижте раздела <link linkend="focus-backlash"
>Луфт</link
> за повече подробности.</para>
      </listitem>

      <listitem>
        <para
>Първоначален размер на стъпката. Това е критичен параметър. Може да имате идея от други хора с подобна настройка. Ако не, можете да опитате да го настроите от критичната фокусна зона (CFZ) за вашето оборудване. Вижте <link linkend="focus-cfz"
>раздела CFZ</link
> за повече подробности.</para>
        </listitem>

      <listitem>
        <para
>Започнете близо до фокуса, като намерите фокуса ръчно. Използвайте опцията <guibutton
>Стартиране на кадриране</guibutton
> и регулирайте ръчно фокуса, за да стигнете до приблизителен фокус.</para>
      </listitem>

      <listitem>
        <para
>Уверете се, че намирате достатъчно звезди. Увеличаването на експозицията обикновено открива повече звезди (но прави процеса на фокусиране по-дълъг).</para>
      </listitem>
    </itemizedlist>

    <para
>Изпълняване на автоматично фокусиране. Това е вида на V-крива, която търсите:</para>
    <screenshot
><screeninfo
>Добра фокусна крива </screeninfo
><mediaobject>
    <imageobject
><imagedata fileref="focus_good_focus.png" format="PNG" width="50%"/></imageobject>
    <textobject
><phrase
>Добра фокусна крива</phrase
></textobject
></mediaobject
></screenshot>

    <para
>За разлика от това, следващата снимка показва начален размер на стъпката, който е зададен твърде ниско. HFR варира от около 0, 78 до 0, 72. Което дава max / min малко над 1. Друг показател, че това е лоша настройка, е, че обхватът на лентата за грешки е много голям в сравнение с движението на HFR, което означава, че инструментът за решаване на крива чертае крива с много шум, което означава, че резултатите няма да са много точни.</para>
    <screenshot
><screeninfo
>Лоша крива на фокус </screeninfo
><mediaobject
><imageobject>
    <imagedata fileref="focus_bad_focus.png" format="PNG" width="50%"/></imageobject>
    <textobject
><phrase
>Лоша крива на фокус</phrase
></textobject
></mediaobject
></screenshot>
  </sect2>

  <sect2 id="focus-backlash">
    <title
>Луфт на фокусера</title>

    <para
>Хлабината или луфта в настройката на фокусиращото устройство се дължи на комбинация от хлабина в самия електронен фокусиращ механизъм (напр. в зъбния механизъм), при свързването на електронния фокусиращ елемент към изтеглящата тръба на телескопа и в механизма на изтеглящата тръба на телескопа. По този начин всяка настройка ще има своя собствена характеристика на луфт, дори ако се използва един и същ фокусер.</para>

    <para
>Важно е да имате ясна стратегия за справяне с луфта и да настроите фокуса по подходящ начин за избраната стратегия. Най-добре е реакцията да се управлява на едно място, за да се избегнат конфликти. Въпреки че е възможно коригиращата реакция да се управлява на няколко места (това е правено успешно), като цяло не се препоръчва, защото може да доведе до конфликти между софтуерните компоненти и фокусиращото устройство.</para>

    <para
>Има няколко начина за измерване на луфта в деления. Консултирайте се с документацията на вашия фокусер или използвайте интернет, включително форума на Indi.</para>

    <para
>Има няколко неща, които трябва да имате предвид, когато решавате, как да се справите с луфта: <itemizedlist>
      <listitem>
        <para
><emphasis role="bold"
>Без луфт</emphasis
>: Ако имате достатъчно късмет да имате настройка без луфт, тогава ще има смисъл да зададете <guilabel
>Луфт на механиката</guilabel
> и <guilabel
>Прескачане на АФ</guilabel
> изключено (настроено на нула).</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Луфт, управляван от фокусер</emphasis
>: Ако вашият фокусер има способността сам да управлява луфт, тогава можете да използвате това средство и да изключите <guilabel
>Луфт на механиката</guilabel
> и <guilabel
> Прескачане на АФ</guilabel
> (задаване на нула). Като алтернатива, ако е възможно, можете да изключите функцията за обратна реакция на фокусера и да използвате или драйвера на устройството, или Прескачане на АФ, за да управлявате луфта.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Луфт, управляван от драйвер на устройство</emphasis
>: Ако драйверът на вашето устройство има способността да управлява луфт, тогава можете да използвате това средство и да изключите <guilabel
>Прескачане на АФ</guilabel
> (зададено до нула). Като алтернатива можете да изключите функцията за обратна реакция на драйвера на устройството и да зададете <guilabel
>Прескачане на АФ</guilabel
>.</para>

        <para
>За да разберете, дали драйверът на устройството поддържа луфт, проверете полето <guilabel
>Луфт на механиката</guilabel
>. Ако е активирано и можете да задавате стойности, драйверът поддържа корекция на луфта. Ако полето не е активно, тогава драйверът не поддържа тази функция.</para>
      </listitem>

      <listitem>
        <para
><emphasis role="bold"
>Прескачане на АФ</emphasis
>: Модулът модула Фокус може сам да управлява луфт чрез сканиране на външни движения със стойността в полето <guilabel
>Прескачане на АФ</guilabel
>. Например, ако <guilabel
>Прескачане на АФ</guilabel
> е зададено на 40, тогава всеки път, когато модулът Фокус премества фокусера навън, той прави това като процес в 2 стъпки. Първо премества фокусера 40 деления отвъд мястото, където иска да фокусира и на втори етап се връща обратно с 40 деления.</para>

        <para
>Предимството на <guilabel
>Прескачане на АФ</guilabel
> е, че не е необходимо да знаете точно луфта, просто трябва да зададете <guilabel
>Прескачане на АФ</guilabel
> &gt;= луфт. Така че, например, ако измерите луфт с около 60 деления, тогава можете да зададете <guilabel
>Прескачане на АФ</guilabel
> на 80.</para>

        <para
><guilabel
>Прескачане на АФ</guilabel
> също е полезно, когато луфтът не е точно предвидим. Например, ако измерванията на луфта дават малко по-различни стойности, напр. 61,60,59 отметки, тогава с помощта на <guilabel
>Прескачане на АФ</guilabel
> това несъответствие може да бъде ефективно неутрализирано. Ако използвате <guilabel
>Луфт на фокусера</guilabel
>, вероятно ще осредните показанията и ще зададете стойността на 60. Понякога това правилно ще поеме цялата обратна реакция; понякога ще бъде под или над правилната фокусна позиция.</para>

        <para
>Всички движения на фокуса, управлявани от модула Фокус, ще имат приложено <guilabel
>Прескачане на АФ</guilabel
>, включително Стъпка навън, Goto, изпълнение на автоматично фокусиране, адаптивен фокус, движенията за адаптиране на началната позиция и заснемане на изглаждащи кадри в същата позиция като светлите кадри.</para>
      </listitem>
    </itemizedlist>
    </para>
  </sect2>

  <sect2 id="focus-adaptive">
    <title
>Адаптивно фокусиране</title>

    <screenshot>
      <screeninfo
>Адаптивен фокус </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="focus_adaptive_focus.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>Адаптивно фокусиране</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Ekos поддържа концепцията за адаптивен фокус (АФ). Без АФ, типичният план за изображения ще започне с автофокус, след това последователност от подкадри, след това автофокус и т.н. Автофокусът ще бъде задействан от редица фактори като време, промяна на филтъра, промяна на температурата и т.н. по принцип, когато се изпълнява последователност, подкадрите се отдалечават леко от оптималния фокус, докато дадена прагова стойност (напр. промяна на температурата) не задейства автоматичното фокусиране.</para>

    <para
>Идеята на АФ е да регулира фокуса, когато факторите на околната среда се променят, за да се опита да заснеме всеки субкадър възможно най-близо до оптималния фокус. В идеалния случай ефектът от адаптивния фокус е като извършване на автофокус преди всеки подкадър, но без допълнителни разходи като действителното извършване на цикъла.</para>

    <para
>АФ работи като допълнение към различните тригери за автофокус, които сега са налични в Ekos. Така че не е необходимо да променяте задействанията на автофокуса, когато започнете да използвате АФ. Наистина, в началото, като се има предвид, не се препоръчва да се облекчават условията на автофокус, когато се използва АФ. Въпреки това, с течение на времето, с нарастване на доверието в АФ, ще бъде възможно да се прави по-малко автоматично фокусиране (и следователно повече изображения). Но така или иначе, всеки подкадър трябва да е по-фокусиран, когато използвате АФ, при условие че е настроен правилно. </para>

    <para
>И така, как да разберете дали АФ би бил полезен за вашата настройка или не? Може би най-простият начин би бил да се изследват подкадрите непосредствено след автофокус и да се сравнят с подкадрите точно преди следващия автофокус. Виждате ли разлика във фокуса? Ако имате настройка, при която фокусната точка е толерантна към промените в околната среда между стартиранията на автофокуса, тогава АФ може да не добави нищо към вашите изображения; ако обаче имате настройка, която е чувствителна към промените в околната среда и честотата на стартиране на автофокуса е компромис между качество и време за изображения, тогава АФ трябва да подобри качеството на вашите подкадри.</para>

    <para
>Понастоящем АФ поддържа две измерения на околната среда: температура и надморска височина (на изобразената цел):</para>
    <itemizedlist>
      <listitem>
        <para
>температура. Всички компоненти на системата за изображения ще бъдат повлияни от промените в температурата на околната среда. Най-очевидната ще бъде тръбата на телескопа. Обикновено това ще се разшири с повишаване на температурата и ще се свие с понижаването ѝ. Това ще повлияе на фокусната точка. Но също и оптичният път, който светлината от изобразената цел преминава през атмосферата и през компонентите за изображения на телескопа, ще бъде повлиян от температурата и следователно ще повлияе на фокусната точка.</para>

        <para
>Необходимо е да има надежден източник на информация за температурата, наличен за модула за фокусиране, за да се използва функцията за температура на АФ.</para>

        <para
>Къде се намира източникът на температура, разбира се, зависи от потребителя. Като се имат предвид промените в температурния ефект на много компоненти, не е очевидно къде би било най-доброто местоположение. Може да се наложи известно експериментиране, за да се получат най-добри резултати, но като ориентир, източникът трябва да е близо до влака за изображения, но не близо до какъвто и да е топлинен ефект на електрическо оборудване, което би означавало, че нагрява източника на температура, но не и оптичната система. Последователността на местоположението вероятно ще бъде важна.</para>
      </listitem>

      <listitem>
        <para
>Надморска височина. Някои потребители съобщават, че фокусната точка се променя с надморската височина на целта. Този ефект вероятно ще бъде по-малък от температурния ефект и може да е незначителен за някои настройки.</para>
      </listitem>
    </itemizedlist>

    <para
>За да използвате АФ, първо трябва да решите дали искате да се адаптирате към температура, надморска височина или и двете. Ако сте нов в АФ, препоръчително е да започнете с температура и след като това работи, определете дали настройката ви ще се възползва от добавянето на надморска височина.</para>

    <para
>Първата стъпка е да установите <guilabel
>деления / °C</guilabel
> и/или <guilabel
>деления / °Alt</guilabel
> за вашето оборудване. За да направите това, в Ekos има съществуваща помощна програма, чрез която, когато регистрирането на фокус е активирано, в допълнение към добавянето на съобщения за фокус към регистрационния файл за отстраняване на грешки, всеки път, когато завърши изпълнение на автофокус, информацията се записва в текстов файл в директория, наречена focuslogs, разположена в същото място като директорията с регистрационни файлове за отстраняване на грешки. Файловете се наричат„autofocus-(datetime).txt”. Записаните данни са: дата, час, позиция, температура, филтър, HFR, надморска височина. Тези данни ще трябва да бъдат анализирани извън Ekos, за да се определят <guilabel
>деления / °C</guilabel
> и, ако е необходимо, <guilabel
>деления / °Alt</guilabel
>.</para>

    <para
>Ето пример за файл „autofocus-(datetime).txt“: <screenshot>
      <screeninfo
>Дневник на фокуса за автофокус </screeninfo>
      <mediaobject
> <imageobject
> <imagedata fileref="focus_autofocus_log.png" format="PNG" width="50%"/>
        </imageobject
><textobject
><phrase
>Дневник за фокусиране на автофокус</phrase
></textobject
></mediaobject>
    </screenshot
></para>

    <para
>В момента Ekos поддържа проста линейна зависимост между температурата или надморската височина и тиковете. В бъдеще, ако има търсене, могат да се поддържат по-сложни взаимоотношения. Линейната връзка ще осигури по-голямата част от ползата от АФ и е доста лесна за администриране. По-сложните взаимоотношения биха могли да бъдат по-точни, но идват с по-сложно администриране. Обърнете внимание също, че по-сложните зависимости на фокусната точка срещу температурата вероятно ще бъдат повече или по-малко линейни за малки промени в температурата.</para>

    <para
>Начин да получите стойност за <guilabel
>Тикове / °C</guilabel
> би бил да вземете данните от файловете autofocus-(datetime).txt от няколко нощи на наблюдение в електронна таблица и да изведете графика на позицията на фокуса спрямо температурата за всеки филтър. Прегледайте данните и премахнете всички извънредни стойности и начертайте линия с най-добро съответствие. Използвайте реда, за да получите <guilabel
>Отметки / °C</guilabel
>. Ако възнамерявате да се адаптирате за надморска височина, както и за температура, тогава би било по-добре да използвате набор от данни на подобна надморска височина, когато калибрирате температурата. След това е възможно да се изчисли ефектът от температурата и да се премахне това от данните при изчисляване на ефекта от надморската височина.</para>

    <para
>Ще трябва да се уверите, че вашата позиция на фокусиране може да се повтори със същата температура и височина и че няма приплъзване на фокусиращото устройство или некомпенсирана хлабина. Освен това, когато калибрирате, е по-добре да избягвате промяна на оптичната линия по начин, който може да промени позицията на фокуса. Ако това е неизбежно и ако промяната е засегнала позицията на фокуса, тогава ще трябва да коригирате по подходящ начин данните за фокуса в историята, за да могат да бъдат сравнени.</para>

    <para
>Един прост подход е да започнете с малко количество данни, да речем 1 нощувка, и да използвате това, за да изчислите, да речем тикове/градус C. Работете с това и го коригирайте с времето, докато събирате повече данни. Начин да проверите колко добре работи АФ би бил да използвате Анализиране, за да прегледате как АФ е преместил фокуса за 1 час. Ако нещата са на място, тогава където и да е АФ позиционирал фокусера след 1 час, ще съответства на резултата от автофокуса. Когато има несъответствие, то ще се дължи на произволност в резултата от автофокуса и грешно калибриране в АФ <guilabel
>отметки / °C</guilabel
>. Правейки това редовно, ще изградите познания за вашето оборудване и ще можете да настроите фино АФ. По-долу е екранна снимка на модула Анализиране, конфигуриран за Фокус, където можете да видите, как позицията на фокуса се променя по време на сесията за изображения: <screenshot>
      <screeninfo
>Анализ на фокус </screeninfo>
      <mediaobject
> <imageobject
> <imagedata fileref="focus_analyze.png" format="PNG" width="50%"/>
        </imageobject
><textobject
><phrase
>Анализ на фокуса</phrase
></textobject
></mediaobject>
    </screenshot
></para>

    <para
>След като разполагате с вашите данни, можете да ги конфигурирате в изскачащия прозорец <link linkend="focus-filter-settings"
>Настройки на филтъра</link
>. След това във модула Фокус включете Адаптивен фокус в раздела <link linkend="focus-settings"
>Настройки на фокус</link
>. В този момент, когато стартирате последователност, Ekos ще проверява след всеки подкадър дали трябва да адаптира позицията на фокусера. Ако е така, модула Фокус ще направи това и след това заснемането ще продължи със следващия подкадър.</para>

    <para
>Екранната снимка в горната част на този раздел показва пример. <guilabel
>Деления / °C</guilabel
> е настроен на 9. Автофокусът е изпълнен и се реши при 36580 при 10C. След това е изпълнена проста последователност от 5 субкадъра. Първоначално температурата беше настроена на 9C, а след това на 8C. След завършване на всеки подкадър Ekos извършва адаптивен фокус и там, където има промяна на температурата, изчислява броя на деленията за преместване на фокусера. В този пример фокусът е преместен навътре с 9 отметки в 2 отделни случая, като се започне от 36580, преди да се премести до 36571 и след това до 36562, както е показано в раздела „Фокус“ в изпълнимия модул „Текуща позиция“ и в полето за съобщения.</para>

    <para
>Концепцията за адаптивен фокус е вградена в инструмента <link linkend="build-filter-offsets"
>Задаване на отмествания</link
>.</para>
  </sect2>


  <sect2 id="Coefficient_of_Determination">
    <title
>Коефициент на детерминация, R²</title>

    <para
>Коефициентът на детерминация, или R², се изчислява, за да даде мярка за това колко добре напаснатата крива съответства на точките от данни. Повече информация можете да намерите <ulink url="https://en.wikipedia.org/wiki/Coefficient_of_determination"
>тук</ulink
>. Тази функция, която е налична за алгоритъма за фокусиране с единично линейно преминаване. По същество R² дава стойност между 0 и 1, като 1 означава идеално прилягане, когато всички точки от данни се намират на кривата, а 0 означава, че няма корелация между точките от данни и кривата. Потребителят трябва да експериментира със своето оборудване, за да види какви стойности може да получи, но като ориентир, по-висока стойност, да речем 0, 9, би била подходяща.</para>

    <para
>Има опция за задаване на „R² лимит“ в <link linkend="focus-settings"
>Настройки на фокуса</link
>, който се сравнява с изчисления R², след като изпълнението на автоматичния фокус е завършено. Ако граничната стойност не е достигната, автоматичният фокус се стартира отново.</para>

    <para
>Задаването на R² лимит може да бъде полезно за наблюдение без надзор, ако фокусирането даде лош резултат поради еднократна причина. Очевидно, ако причината не е временна, повторното изпълнение няма да подобри нищо.</para>

    <para
>Ако лимитът R² не бъде постигнат и процесът на фокусиране се стартира отново и отново не успее да достигне лимита R², тогава изпълнението на фокуса се маркира като успешно, за да се избегне зацикляне на процеса.</para>

    <para
>Тази функция се изключва чрез задаване на R² лимита на 0.</para>
  </sect2>

  <sect2 id="Levenberg-Marquardt">
    <title
>Алгоритъм за решаване на Левенберг – Марквард</title>

    <para
>Алгоритъмът на Левенберг-Марквард (LM) се използва за решаване на нелинейни проблеми на най-малките квадрати. Научната библиотека на GNU предоставя реализация на решаващия инструмент. Тези ресурси предоставят повече подробности: </para>

    <itemizedlist>
      <listitem>
        <para>
          <ulink url="https://en.wikipedia.org/wiki/Levenberg–Marquardt_algorithm"
></ulink>
        </para>
      </listitem>

      <listitem>
        <para>
          <ulink url="https://www.gnu.org/software/gsl/doc/html/nls.html"
></ulink>
        </para>
      </listitem>
    </itemizedlist>

    <para
>Алгоритъмът на Левенберг-Марквард е нелинеен метод за решаване на най-малките квадрати и следователно е подходящ за много различни уравнения. Основната идея е да коригирате уравнението y = f(x, P), така че изчислените стойности на y да са възможно най-близки до стойностите на y на предоставените точки от данни, така че получената крива да отговаря на данните възможно най-добре. P е набор от параметри, които се променят от решаващия инструмент, за да се намери най-доброто съответствие. Решаващият модул измерва колко далеч е кривата във всяка точка от данни, повдига резултата на квадрат и ги събира всички. Това е числото, което трябва да се минимизира, нека го наречем S. Решаващият модул се доставя с първоначално предположение за параметрите, P. Той изчислява S, прави корекция на P и изчислява нов S1. Предоставен S1 &lt; Тогава се движим в правилната посока. Той повтаря процедурата, докато:</para>

    <itemizedlist>
      <listitem>
        <para
>делтата в S е по-малка от предоставената граница (достигната е конвергенция), или</para>
      </listitem>

      <listitem>
        <para
>достигнат е максималния брой повторения или</para>
      </listitem>

      <listitem>
        <para
>решаващият модул срещне грешка.</para>
      </listitem>
    </itemizedlist>

    <para
>Решаващият модул е способен да решава набор от точки от данни, както със зададена, така и точки без зададена тежест. По същество набор от данни без зададена тежест, дава еднаква тежест на всяка точка от данни, когато се опитва да напасне кривата. Алтернативно, можете да зададете тежест на всяка точка от данни с мярка, която съответства на това, колко точно е действителното измерване на точката от данни. В нашия случай това е дисперсията на звездните HFR, свързани с точката от данни. Дисперсията е стандартното отклонение на квадрат.</para>

    <para
>Понастоящем решаващият модул се използва за напасване на параболична или хиперболична крива.</para>
  </sect2>

  <sect2 id="focus-aberration-inspector">
    <title
>Инспектор на аберациите</title>

    <screenshot>
      <screeninfo
>Инспектор на аберациите </screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="aberration_inspector.png" format="PNG" width="75%"/>
        </imageobject>

        <textobject>
          <phrase
>Инспектор на аберациите</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para
>Инспекторът на аберациите е инструмент, който използва автофокус, за да анализира обратното фокусиране и наклона на сензора в свързаната оптична система.</para>
    <para
>За да стартирате <guibutton
>Инспектора на аберациите</guibutton
> натиснете едноименния бутон. Вижте <link linkend="focus-tools"
>Инструменти</link
> за повече информация. Следните критерии трябва да бъдат изпълнени, за да може бутонът да бъде активен и инструментът да работи:</para>

    <itemizedlist>
      <listitem>
        <para
>Фокусерът трябва да бъде абсолютен фокусер.</para>
      </listitem>

      <listitem>
        <para
>Алгоритъмът за фокусиране трябва да е единично линейно преминаване.</para>
      </listitem>

      <listitem>
        <para
>Трябва да се приложи мозаична маска.</para>
      </listitem>

      <listitem>
        <para
>Размерът на стъпката на фокуса трябва да бъде настроен. Това е броят микрони, които фокалната равнина се движи за 1 деление на фокуса. Това се настройва в раздела с параметри на CFZ. Вижте <link linkend="focus-cfz"
>раздела CFZ</link
> за повече подробности.</para>
      </listitem>

    </itemizedlist>

    <para
>Когато се натисне бутонът Инспектор, ще се стартира автоматично фокусиране, но освен това за всяка точка от данни се улавя допълнителна информация за по-късна употреба от Инспектор на аберациите. След като автофокусът завърши, се показва диалоговият прозорец на Инспектор на аберациите.</para>

    <para
>За първоначална настройка за използване на инструмента се препоръчва да направите следното:</para>

    <itemizedlist>
      <listitem>
        <para
>Посочете част от небето, където автофокусът се справя добре. Обикновено това би било високо в небето, далеч от всякакви препятствия. Изберете място с много звезди като Млечния път. Причината, поради която това е по-важно за Инспектор на аберациите от автоматично фокусиране, е, че анализът на фокуса трябва да се извърши за всяка плочка в мозайката. Следователно е важно всяка плочка да има достатъчно звезди, за да извърши точен автофокус.</para>
      </listitem>

      <listitem>
        <para
>Стартирайте автоматично фокусиране няколко пъти, за да сте сигурни, че решава правилно и че имате добър набор от звезди във всяка мозаечна плочка. Въпреки че повечето параметри за фокусиране могат да се използват, препоръчва се да използвате параметрите, които работят най-добре за автофокус с вашето оборудване. Причината за това е, че Инспектор на аберациите трябва да се фокусира върху всяка мозаечна плочка, а не само върху сензора като цяло.</para>
      </listitem>

      <listitem>
        <para
>Задължително се прилага мозаечна маска. Ще са необходими известни експерименти, за да настроите това оптимално за вашето оборудване. Конфигурационният параметър за регулиране е размерът на плочката, който е размерът на плочката като процент от ширината на сензора. Колкото по-висок е процентът, толкова по-голяма е всяка плочка, например за сензор 4:3, използвайки размер на плочката от 25% означава, че всяка плочка е 8% от площта на сензора. Използването на размер на плочката от 10% означава, че всяка плочка е 1% от площта на сензора. Колкото по-голяма е площта, толкова повече звезди ще присъстват и толкова по-добре ще реши алгоритъмът за фокусиране. Въпреки това, целта на инспектора на аберациите е да предоставя информация за аберациите (заден фокус и наклон) в сензора, така че в идеалния случай информацията за всяка плочка би била специфична за възможно най-малка област.</para>
        <para
>Най/доброто място за размера на плочката е възможно най-малката стойност, която все още съдържа достатъчно звезди за добро решаване на всяка плочка.</para>
      </listitem>
    </itemizedlist>

    <para
>Инспекторът на аберациите може да се използва заедно с устройство за регулиране на наклона и/или обратното фокусиране. Методът за това е итеративен подход, като например колимиране на телескоп. Стъпките са:</para>

    <itemizedlist>
      <listitem>
        <para
>Стартирайте инспектора на аберациите и получете резултати.</para>
      </listitem>

      <listitem>
        <para
>Проверете резултатите и се уверете, че са добри, например броят на звездите във всяка плочка е достатъчен и R² е приемлив за всички съответни плочки.</para>
      </listitem>

      <listitem>
        <para
>Регулирайте наклона и/или задния фокус с помощта на вашето устройство въз основа на резултатите от инспектора на аберациите.</para>
      </listitem>

      <listitem>
        <para
>Стартирайте отново инспектора на аберациите. Ще стартира друг диалогов прозорец. Проверете резултатите както преди. Ако наклонът и / или задният фокус се подобряват, тогава настройката е направена в правилния смисъл; ако не опитайте отново. Използвайте обратната връзка от предишната настройка за следващата настройка.</para>
      </listitem>
    </itemizedlist>

    <para
>Повторете горния процес, докато се достигне границата на чувствителност на оборудването.</para>

    <para
>Обърнете внимание, че степента на регулиране, напр. до каква степен трябва да се завъртят болтовете по посока на часовниковата стрелка или обратно на нея, варира в зависимост от оборудването и трябва да се определи от потребителя по метода на пробите и грешките. Винаги спазвайте препоръките за наклон и обратен фокус, предоставени от производителя на устройството. </para>

    <para
>Всеки път, когато се стартира Инспектор на аберациите, той стартира нов диалог с номера на цикъла, добавен към заглавието. По този начин могат да се извършат няколко теста и да се сравнят резултатите. Обърнете внимание обаче, че диалоговият прозорец съдържа много данни (приблизително 10 пъти повече от стандартното изпълнение на автофокус). Системните ресурси, свързани с това, се освобождават при затваряне на диалоговия прозорец. Поради тази причина при машини с по-малка мощност, след като инструментът е бил използван, се препоръчва да затворите всички диалогови прозорци на инспектора на аберациите преди създаване на изображения.</para>

    <para
>Следващите редове описват разделите на диалоговия прозорец на инспектора на аберациите.</para>

    <sect3 id="aberration-inspector-vcurve">
      <title
>V-крива на инспектора на аберациите</title>

      <screenshot>
        <screeninfo
>V-крива на инспектора на аберации </screeninfo>

        <mediaobject>
          <imageobject>
          <imagedata fileref="aberration_inspector_vcurve.png" format="PNG" width="50%"/>
        </imageobject>

        <textobject>
          <phrase
>V-крива на инспектора на аберациите</phrase>
        </textobject>
        </mediaobject>
      </screenshot>

    <para
>В горната част на диалоговия прозорец има някои контроли, последвани от V-кривата. Контролите са:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Плочки</guilabel
>: Налични са три опции:</para>
        <itemizedlist>
          <listitem>
            <para
>Всички: Показват се всички 9 плочки.</para>
          </listitem>
          <listitem>
            <para
>Център и външни ъгли: Показват се централната и 4 ъглови плочки.</para>
          </listitem>
          <listitem>
            <para
>Център и вътрешен ромб: Показват се централната и 4 вътрешни плочки.</para>
          </listitem>
        </itemizedlist>
      </listitem>
      <listitem>
        <para
><guilabel
>Етикети</guilabel
>: квадратчето за отметка превключва етикетите на точките на фокус върху V-кривата.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>CFZ</guilabel
>: квадратчето за отметка превключва дали индикаторът на CFZ да се показва на V-кривата.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Оптимизиране на центровете на плочката</guilabel
>: Ако не е отметнато, се използва геометричният център на плочката; ако е отметнато, центърът на плочката се изчислява като средна стойност на позициите на звездите в плочката. Въпреки че теоретично е по-точно да се избере тази опция, е вероятно да има значително въздействие само ако броят на звездите е малък.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Затваряне</guilabel
>: Затваряне на диалоговия прозорец на Инспектора на аберациите.</para>
      </listitem>
    </itemizedlist>

    <para
>V-кривата е подобна на V-кривата в главния раздел Фокус, с изключение на това, че всяка плочка е представена от своя собствена крива. Броят на кривите се определя от настройката на падащия списък <guilabel
>Плочки</guilabel
>. Оста x показва позицията на фокусера, а оста y измерването (напр. HFR), използвано от автофокуса. Всяка крива има свой собствен цвят и идентификатор от 2 знака, както е показано в легендата.</para>

    <para
>Задръжте курсора на мишката върху минимума на кривата, за да видите повече информация за тази крива.</para>
    </sect3>

    <sect3 id="aberration-inspector-table">
    <title
>Таблица на инспектор на аберациите</title>

    <screenshot>
      <screeninfo
>Таблица за инспектор на аберации </screeninfo>

      <mediaobject>
        <imageobject>
        <imagedata fileref="aberration_inspector_table.png" format="PNG" width="50%"/>
      </imageobject>

      <textobject>
        <phrase
>Таблица на инспектор на аберациите</phrase>
      </textobject>
      </mediaobject>
    </screenshot>

    <para
>Таблицата показва информация, отнасяща се за всяка плочка, избрана от настройката <guilabel
>Плочки</guilabel
>.</para>

    <para
>Подсказка, подобна на графика, се показва, когато курсорът на мишката се задържи над някоя от най-левите 2 колони. Графиката показва картина на сензора, мащабирана до размерите на сензора. Върху сензора са насложени плочките, избрани от настройката <guilabel
>Плочки</guilabel
>. Плочките са мащабирани по подходящ начин за настройките на плочките. Всяка плочка е етикетирана с името на плочката и плочката, съответстваща на реда, над който мишката е поставена, се маркира в цвета на тази плочка.</para>

    <para
>Показани са следните колони:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Плочка</guilabel
>: Името на плочката от 1 или 2 знака, напр. TL = Горе вляво, C = Център и т.н.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Описание</guilabel
>: Описание на плочка, напр. горе вляво, център и т.н.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Решение</guilabel
>: Фокусното решение. Това съответства на решението на V-кривата.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Делта (деления)</guilabel
>: Това е делтата на решението за текущия ред на таблицата спрямо решението на централната плочка. Делтата на централния ред, разбира се, ще бъде нула.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Делта (μm)</guilabel
>: Това е делта (деления), преобразувана в микрони, използвайки размера на стъпката в микрони, както е посочено в раздела CFZ на модула Фокус.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Брой звезди</guilabel
>: Това показва минималния / максималния брой звезди, открити по време на изпълнението на автофокуса. Обикновено минималният брой ще бъде точка от данни, която е далеч извън фокуса, а максималният брой ще бъде точката от данни във фокус.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>R²</guilabel
>: R-квадрат на кривата, подходяща за тази плочка. Вижте <link linkend="Coefficient_of_Determination"
>Коефициент на детерминация</link
> за повече подробности.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Изключване</guilabel
>: Квадратче за отметка за включване/изключване на тази плочка в изчисленията. По подразбиране, ако една плочка е била монтирана по крива, тя ще бъде включена; ако една плочка не е монтирана с крива, тогава тя ще бъде изключена. В допълнение, потребителят може да реши, че определена плочка може да съдържа данни с лошо качество, например R² е ниско; или броят на звездите е малък. В този случай Изключване може да бъде отметнато и този ред ще бъде изключен от изчисленията. Обърнете внимание, че при изключване на някои редове някои изчисления може да не бъдат извършени. Ако централната плочка е изключена, не могат да се извършват изчисления.</para>

        <para
>Обърнете внимание, че въпреки че е възможно да изключите плочки и все пак да получите изчислени стойности, ако данните са с лошо качество, тогава се препоръчва да стартирате отново Инспектор на аберациите, вместо да продължавате с данни с лошо качество.</para>
      </listitem>
    </itemizedlist>

    <para
>Препоръчителният подход е да проверите таблицата за качествени данни и след постигането им да преминете към анализиране на <link linkend="aberration-inspector-results"
>Резултатите от инспектора за аберации</link
>.</para>
    </sect3>

    <sect3 id="aberration-inspector-results">
    <title
>Резултати от инспектора на аберациите</title>

    <screenshot>
      <screeninfo
>Резултати от инспектора за аберации </screeninfo>

      <mediaobject>
        <imageobject>
        <imagedata fileref="aberration_inspector_results.png" format="PNG" width="50%"/>
      </imageobject>

      <textobject>
        <phrase
>Резултати от инспектора на аберациите</phrase>
      </textobject>
      </mediaobject>
    </screenshot>

    <para
>Резултатите от изчислението се показват в този раздел въз основа на данните, показани в таблицата:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Заден фокус Δ</guilabel
>: Това е стойността на делтата на Заден фокус. Колкото по-близо до идеалния заден фокус, толкова по-ниска е делтата на заден фокус. Обърнете внимание, че делтата на заден фокус дава представа колко далеч е задният фокус по отношение на мащаба и посоката, но не е количеството, с което сензорът трябва да бъде преместен. Връзката между делтата на задния фокуси колко далеч да се премести сензорът ще варира в зависимост от използваното оборудване и трябва да бъде намерено от потребителя.</para>

        <para
>Полето дава напътствие за движението на задния фокус, необходимо за подобряване на фокуса: или преместете сензора по-близо до изравнителя на полето (телескоп), или го отдалечете.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Наклон ляво-дясно</guilabel
>: Дава наклона ляво дясно в микрони и като процент.</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Наклон нагоре-надолу</guilabel
>: Дава наклона нагоре-надолу в микрони и като процент</para>
      </listitem>
      <listitem>
        <para
><guilabel
>Общ наклон</guilabel
>: Диагоналния наклон в микрони и като процент.</para>
      </listitem>
    </itemizedlist>

    <para
>Колкото по-малка е делтата на задния фокус, толкова по-близо е сензорът до идеалния заден фокус. Ако инструментът за изравняване на полето не изравнява полето чак до краищата на сензора, това ще бъде видимо чрез превключване на опцията за плочки между "Център и външни ъгли" и "Център и вътрешен ромб". Ако резултатите от делтата на задния фокус са последователни при промяна на опцията "Плочки", това означава, че изравнителят на полето работи в ъглите на сензора.</para>

    <para
>Винаги ще има някаква делта на задния фокус поне поради шума в данните от наблюдението. Важното е, че когато са на фокус, звездите са кръгли във всички части на сензора.</para>

    <para
>Колкото по-малък е процентът на наклона, толкова по-близо е сензорът да бъде плосък към равнината на светлината от уреда за изравняване/телескопа. Както при делтата на задния фокус, винаги ще има някакъв шум в данните, който ще се представи като наклон. Важното е, че когато са на фокус, размерите на звездите са еднакви във всички части на сензора.</para>

    <para
>Поради естеството на изчисленията на делтата и наклона на задния фокус, едното ще повлияе на другото, така че вероятно ще е по-добре да опитате и коригирате и двете заедно, на малки стъпки, вместо да се опитвате да усъвършенствате едното поотделно, преди да коригирате другото.</para>
    </sect3>

    <sect3 id="aberration-inspector-3dgraphic">
    <title
>3D графика на инспектора за аберации</title>

    <screenshot>
      <screeninfo
>3D графика на инспектора за аберации </screeninfo>

      <mediaobject>
        <imageobject>
        <imagedata fileref="aberration_inspector_3dgraphic.png" format="PNG" width="50%"/>
      </imageobject>

      <textobject>
        <phrase
>3D графика на инспектора за аберации</phrase>
      </textobject>
      </mediaobject>
    </screenshot>

    <para
>3D графиката показва сензора, наклонен според <link linkend="aberration-inspector-results"
>Резултатите от инспектора за аберации</link
>. За да визуализирате повърхността на Petzval (вижте <ulink url="https://en.wikipedia.org/wiki/Petzval_field_curvature"
>Кривина на полето на Petzval</ulink
> за повече подробности) на светлината, излизаща от телескопа и падаща на сензора, повърхността също се моделира. Колкото по-голяма е грешката на обратното фокусиране, толкова по-извита е повърхността на Petzval.</para>

    <para
>Графиката може да се мащабира и завърта с помощта на жестове. За да увеличите, използвайте разтваряне с два пръста. За да завъртите, използвайте докосване и преместване.</para>

    <para
>Графиката има режим на симулация, който позволява регулиране на задния фокус и наклона чрез плъзгачите. Ефектът върху наклона на сензора и повърхността на Petzval е показан на графиката.</para>

    <para
>Налични са следните опции за графиката:</para>

    <itemizedlist>
      <listitem>
        <para
><guilabel
>Селекция</guilabel
>: Налични са следните опции:</para>

        <itemizedlist>
          <listitem>
          <para
>Без: Не е възможна селекция.</para>
          </listitem>

          <listitem>
          <para
>Елемент: Може да се избере точка от данни и да се покажат стойностите на данните.</para>
          </listitem>

          <listitem>
          <para
>Срез: Показва се 2D срез през 3D графиката.</para>
          </listitem>
        </itemizedlist>

      </listitem>
      <listitem>
        <para
><guilabel
>Тема</guilabel
>: Налични са няколко цветови теми.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Етикети</guilabel
>: Квадратче за отметка за показване/скриване на етикетите на плочките върху графиката.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Сензор</guilabel
>: Квадратче за отметка за показване/скриване на сензора.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Решетка на Petzval </guilabel
>: Квадратче за отметка за показване/скриване на повърхността на Petzval като графична мрежа.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Повърхност на Petzval</guilabel
>: Квадратче за отметка за показване/скриване на повърхността на Petzval.</para>
      </listitem>

      <listitem>
        <para
><guilabel
>Режим на симулация</guilabel
>: Квадратче за отметка за включване/изключване на режим на симулация. Когато е изключена, графиката показва сензора и повърхността на Petzval въз основа на изчислените резултати от изпълнението на инспектора за аберации. Когато са включени, плъзгачите за заден фокус, наклон наляво надясно и наклон нагоре надолу са активирани и те могат да бъдат плъзгани от потребителя, за да коригира графиката. Задръжте курсора на мишката върху всеки плъзгач, за да видите подсказките, описващи, какво прави всеки плъзгач.</para>
      </listitem>
    </itemizedlist>

    <para
>3D графиката не е от съществено значение за използването на Инспектор на аберациите. Цялата важна информация се показва в разделите <link linkend="aberration-inspector-table"
>Таблица</link
> и <link linkend="aberration-inspector-results"
>Резултати</link
> на диалоговия прозорец . Целта му е да помогне на потребителя да разбере данните от инспектора на аберациите и да се ориентира с информацията, която инструментът предоставя.</para>
    </sect3>
  </sect2>
</sect1>
